{"version":3,"file":"theme-switcher-DdK6h2Sc.js","sources":["../../src/utils/tooltip.ts","../../src/utils/theme-switcher.ts"],"sourcesContent":["/**\n * Enable tooltips everywhere\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-02-03\n */\n\nimport { Tooltip } from 'bootstrap';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\n  tooltipTriggerList.map((tooltipTriggerElement) => {\n    return new Tooltip(tooltipTriggerElement);\n  });\n});\n","/**\n * Theme switcher functionality for dark/light/high-contrast mode\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-08-24\n */\n\nexport class ThemeSwitcher {\n  private static readonly STORAGE_KEY = 'pmf-theme';\n  private static readonly THEME_ATTRIBUTE = 'data-bs-theme';\n  private static readonly LIGHT_THEME = 'light';\n  private static readonly DARK_THEME = 'dark';\n  private static readonly HIGH_CONTRAST_THEME = 'high-contrast';\n\n  private lightButton: HTMLButtonElement | null = null;\n  private darkButton: HTMLButtonElement | null = null;\n  private highContrastButton: HTMLButtonElement | null = null;\n\n  constructor() {\n    this.init();\n  }\n\n  /**\n   * Initialize the theme switcher\n   */\n  private init(): void {\n    this.setupEventListeners();\n    this.applyStoredTheme();\n    this.updateButtonState();\n  }\n\n  /**\n   * Set up event listeners for the theme buttons\n   */\n  private setupEventListeners(): void {\n    this.lightButton = document.getElementById('theme-light') as HTMLButtonElement;\n    this.darkButton = document.getElementById('theme-dark') as HTMLButtonElement;\n    this.highContrastButton = document.getElementById('theme-high-contrast') as HTMLButtonElement;\n\n    if (this.lightButton) {\n      this.lightButton.addEventListener('click', () => {\n        this.setTheme(ThemeSwitcher.LIGHT_THEME);\n      });\n    }\n\n    if (this.darkButton) {\n      this.darkButton.addEventListener('click', () => {\n        this.setTheme(ThemeSwitcher.DARK_THEME);\n      });\n    }\n\n    if (this.highContrastButton) {\n      this.highContrastButton.addEventListener('click', () => {\n        this.setTheme(ThemeSwitcher.HIGH_CONTRAST_THEME);\n      });\n    }\n  }\n\n  /**\n   * Set the theme\n   */\n  private setTheme(theme: string): void {\n    document.documentElement.setAttribute(ThemeSwitcher.THEME_ATTRIBUTE, theme);\n    localStorage.setItem(ThemeSwitcher.STORAGE_KEY, theme);\n    this.updateButtonState();\n  }\n\n  /**\n   * Get the current theme\n   */\n  private getCurrentTheme(): string {\n    return document.documentElement.getAttribute(ThemeSwitcher.THEME_ATTRIBUTE) || ThemeSwitcher.LIGHT_THEME;\n  }\n\n  /**\n   * Apply stored theme from localStorage\n   */\n  private applyStoredTheme(): void {\n    const storedTheme = localStorage.getItem(ThemeSwitcher.STORAGE_KEY);\n\n    if (storedTheme) {\n      this.setTheme(storedTheme);\n    } else {\n      // Check for system preference\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      const defaultTheme = prefersDark ? ThemeSwitcher.DARK_THEME : ThemeSwitcher.LIGHT_THEME;\n      this.setTheme(defaultTheme);\n    }\n  }\n\n  /**\n   * Update button state to show active theme\n   */\n  private updateButtonState(): void {\n    const currentTheme = this.getCurrentTheme();\n\n    // Remove active class from all buttons\n    if (this.lightButton) {\n      this.lightButton.classList.remove('active');\n    }\n    if (this.darkButton) {\n      this.darkButton.classList.remove('active');\n    }\n    if (this.highContrastButton) {\n      this.highContrastButton.classList.remove('active');\n    }\n\n    // Add active class to the current theme button\n    if (currentTheme === ThemeSwitcher.LIGHT_THEME && this.lightButton) {\n      this.lightButton.classList.add('active');\n    } else if (currentTheme === ThemeSwitcher.DARK_THEME && this.darkButton) {\n      this.darkButton.classList.add('active');\n    } else if (currentTheme === ThemeSwitcher.HIGH_CONTRAST_THEME && this.highContrastButton) {\n      this.highContrastButton.classList.add('active');\n    }\n  }\n\n  /**\n   * Listen for system theme changes\n   */\n  public watchSystemTheme(): void {\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event: MediaQueryListEvent): void => {\n      if (!localStorage.getItem(ThemeSwitcher.STORAGE_KEY)) {\n        const newTheme = event.matches ? ThemeSwitcher.DARK_THEME : ThemeSwitcher.LIGHT_THEME;\n        this.setTheme(newTheme);\n      }\n    });\n  }\n}\n\n// Initialize the theme switcher when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', (): void => {\n  const themeSwitcher = new ThemeSwitcher();\n  themeSwitcher.watchSystemTheme();\n});\n"],"names":["document","addEventListener","slice","call","querySelectorAll","map","tooltipTriggerElement","Tooltip","ThemeSwitcher","static","lightButton","darkButton","highContrastButton","constructor","this","init","setupEventListeners","applyStoredTheme","updateButtonState","getElementById","setTheme","LIGHT_THEME","DARK_THEME","HIGH_CONTRAST_THEME","theme","documentElement","setAttribute","THEME_ATTRIBUTE","localStorage","setItem","STORAGE_KEY","getCurrentTheme","getAttribute","storedTheme","getItem","defaultTheme","window","matchMedia","matches","currentTheme","classList","remove","add","watchSystemTheme","event","newTheme"],"mappings":"4CAiBAA,SAASC,iBAAiB,mBAAoB,KACjB,GAAGC,MAAMC,KAAKH,SAASI,iBAAiB,+BAChDC,IAAKC,GACf,IAAIC,EAAQD,MCLhB,MAAME,EACXC,mBAAsC,YACtCA,uBAA0C,gBAC1CA,mBAAsC,QACtCA,kBAAqC,OACrCA,2BAA8C,gBAEtCC,YAAwC,KACxCC,WAAuC,KACvCC,mBAA+C,KAEvD,WAAAC,GACEC,KAAKC,MACP,CAKQ,IAAAA,GACND,KAAKE,sBACLF,KAAKG,mBACLH,KAAKI,mBACP,CAKQ,mBAAAF,GACNF,KAAKJ,YAAcV,SAASmB,eAAe,eAC3CL,KAAKH,WAAaX,SAASmB,eAAe,cAC1CL,KAAKF,mBAAqBZ,SAASmB,eAAe,uBAE9CL,KAAKJ,aACPI,KAAKJ,YAAYT,iBAAiB,QAAS,KACzCa,KAAKM,SAASZ,EAAca,eAI5BP,KAAKH,YACPG,KAAKH,WAAWV,iBAAiB,QAAS,KACxCa,KAAKM,SAASZ,EAAcc,cAI5BR,KAAKF,oBACPE,KAAKF,mBAAmBX,iBAAiB,QAAS,KAChDa,KAAKM,SAASZ,EAAce,sBAGlC,CAKQ,QAAAH,CAASI,GACfxB,SAASyB,gBAAgBC,aAAalB,EAAcmB,gBAAiBH,GACrEI,aAAaC,QAAQrB,EAAcsB,YAAaN,GAChDV,KAAKI,mBACP,CAKQ,eAAAa,GACN,OAAO/B,SAASyB,gBAAgBO,aAAaxB,EAAcmB,kBAAoBnB,EAAca,WAC/F,CAKQ,gBAAAJ,GACN,MAAMgB,EAAcL,aAAaM,QAAQ1B,EAAcsB,aAEvD,GAAIG,EACFnB,KAAKM,SAASa,OACT,CAEL,MACME,EADcC,OAAOC,WAAW,gCAAgCC,QACnC9B,EAAcc,WAAad,EAAca,YAC5EP,KAAKM,SAASe,EAChB,CACF,CAKQ,iBAAAjB,GACN,MAAMqB,EAAezB,KAAKiB,kBAGtBjB,KAAKJ,aACPI,KAAKJ,YAAY8B,UAAUC,OAAO,UAEhC3B,KAAKH,YACPG,KAAKH,WAAW6B,UAAUC,OAAO,UAE/B3B,KAAKF,oBACPE,KAAKF,mBAAmB4B,UAAUC,OAAO,UAIvCF,IAAiB/B,EAAca,aAAeP,KAAKJ,YACrDI,KAAKJ,YAAY8B,UAAUE,IAAI,UACtBH,IAAiB/B,EAAcc,YAAcR,KAAKH,WAC3DG,KAAKH,WAAW6B,UAAUE,IAAI,UACrBH,IAAiB/B,EAAce,qBAAuBT,KAAKF,oBACpEE,KAAKF,mBAAmB4B,UAAUE,IAAI,SAE1C,CAKO,gBAAAC,GACLP,OAAOC,WAAW,gCAAgCpC,iBAAiB,SAAW2C,IAC5E,IAAKhB,aAAaM,QAAQ1B,EAAcsB,aAAc,CACpD,MAAMe,EAAWD,EAAMN,QAAU9B,EAAcc,WAAad,EAAca,YAC1EP,KAAKM,SAASyB,EAChB,GAEJ,EAIF7C,SAASC,iBAAiB,mBAAoB,MACtB,IAAIO,GACZmC"}