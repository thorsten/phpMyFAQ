{"version":3,"file":"backend.js","sources":["../../admin/assets/src/api/attachment.ts","../../admin/assets/src/api/category.ts","../../admin/assets/src/api/configuration.ts","../../admin/assets/src/api/faqs.ts","../../admin/assets/src/api/user.ts","../src/utils/version-compare.ts","../../admin/assets/src/dashboard.ts","../../admin/assets/src/api/verification.ts","../../admin/assets/src/statistics/admin-log.ts","../../admin/assets/src/api/statistics.ts","../../admin/assets/src/statistics/ratings.ts","../../admin/assets/src/statistics/report.ts","../../admin/assets/src/api/export.ts","../../admin/assets/src/statistics/search.ts","../../admin/assets/src/statistics/sessions.ts","../../admin/assets/src/configuration/configuration.ts","../../admin/assets/src/utils/session.ts","../../admin/assets/src/utils/utils.ts","../../admin/assets/src/configuration/elasticsearch.ts","../../admin/assets/src/api/elasticsearch.ts","../../admin/assets/src/configuration/forms.ts","../../admin/assets/src/api/forms.ts","../../admin/assets/src/configuration/instance.ts","../../admin/assets/src/api/instance.ts","../../admin/assets/src/configuration/opensearch.ts","../../admin/assets/src/api/opensearch.ts","../../admin/assets/src/configuration/stopwords.ts","../../admin/assets/src/api/stop-words.ts","../../admin/assets/src/configuration/upgrade.ts","../../admin/assets/src/api/upgrade.ts","../../admin/assets/src/content/attachment-upload.ts","../../admin/assets/src/content/attachments.ts","../../../node_modules/.pnpm/sortablejs@1.15.6/node_modules/sortablejs/modular/sortable.esm.js","../../admin/assets/src/content/category.ts","../../admin/assets/src/content/comment.ts","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/class-span/class-span.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/class-span/class-span.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/get-hash.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/remove-format/remove-format-for-collapsed-selection.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/eraser.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/fill-empty-paragraph.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/allow-attributes.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/remove-empty-text-node.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/remove-inv-text-nodes.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/replace-old-tags.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/sanitize-attributes.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/filters/try-remove-node.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/visitor/visit-node-walker.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/clean-html.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clean-html/helpers/remove-format/remove-format-for-selection.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clipboard/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clipboard/icons/copy.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clipboard/icons/cut.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clipboard/icons/paste.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clipboard/icons/select-all.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/clipboard/clipboard.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/copy-format.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/ar.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/cs_cz.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/de.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/es.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/fa.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/fi.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/fr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/he.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/hu.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/id.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/it.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/ja.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/ko.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/mn.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/nl.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/pl.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/pt_br.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/ru.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/tr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/zh_cn.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/langs/zh_tw.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/copy-format/copy-format.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/fullsize/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/fullsize/icons/fullsize.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/fullsize/icons/shrink.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/fullsize/fullsize.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/hr/hr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/hr/hr.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-processor/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-processor/image-processor.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/ui/ui-image-main-tab.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/utils/utils.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/ui/ui-image-position-tab.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/ui/ui-image-form.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/readers/index.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/readers/align.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/readers/margin.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/readers/link.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/readers/size.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/writers/index.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/writers/link.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/writers/size.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/writers/margin.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/image-properties.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/utils/open-image-editor.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/image-properties/utils/open-image-popup.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/indent/icons/indent.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/indent/helpers.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/indent/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/indent/icons/outdent.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/indent/indent.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/justify/justify.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/justify/justify.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/line-height.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/ar.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/cs_cz.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/de.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/es.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/fa.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/fi.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/fr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/he.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/hu.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/id.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/it.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/ja.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/ko.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/mn.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/nl.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/pl.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/pt_br.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/ru.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/tr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/ua.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/zh_cn.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/langs/zh_tw.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/line-height/line-height.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/media/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/media/media.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/paste/helpers.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/paste-storage/paste-storage.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/paste-from-word/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/paste-from-word/paste-from-word.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/preview/preview.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/print/print.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/print/print.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/print/lib/generate-critical-css.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/resizer/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/resizer/resizer.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/search/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/search/search.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/search/helpers/highlight-text-ranges.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/search/helpers/sentence-finder.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/search/ui/search.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/search/search.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/select/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/select/select.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/source.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/editor/sourceEditor.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/editor/engines/ace.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/editor/engines/area.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/editor/factory.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/source/source.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/symbols.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/ar.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/cs_cz.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/de.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/es.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/fa.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/fi.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/fr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/he.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/hu.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/id.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/it.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/ja.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/ko.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/mn.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/nl.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/pl.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/pt_br.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/ru.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/tr.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/ua.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/zh_cn.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/langs/zh_tw.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/symbols/symbols.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/video/config.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/video/video.svg.js","../../../node_modules/.pnpm/jodit@4.7.9/node_modules/jodit/esm/plugins/video/video.js","../../admin/assets/src/plugins/phpmyfaq/phpmyfaq.ts","../../admin/assets/src/plugins/phpmyfaq/phpmyfaq.svg.ts","../../admin/assets/src/plugins/code-snippet/code-snippet.ts","../../admin/assets/src/plugins/code-snippet/code-snippet.svg.ts","../../admin/assets/src/content/editor.ts","../../admin/assets/src/content/faqs.ts","../../admin/assets/src/content/faqs.autocomplete.ts","../../admin/assets/src/content/faqs.editor.ts","../../admin/assets/src/content/glossary.ts","../../admin/assets/src/api/glossary.ts","../../admin/assets/src/content/markdown.ts","../../admin/assets/src/api/markdown.ts","../../admin/assets/src/api/media-browser.ts","../../admin/assets/src/content/news.ts","../../admin/assets/src/api/news.ts","../../admin/assets/src/content/faqs.overview.ts","../../admin/assets/src/content/question.ts","../../admin/assets/src/api/question.ts","../../admin/assets/src/content/tags.ts","../../admin/assets/src/api/tags.ts","../../admin/assets/src/content/stickyfaqs.ts","../../admin/assets/src/user/users.ts","../../admin/assets/src/user/autocomplete.ts","../../admin/assets/src/user/user-list.ts","../../admin/assets/src/group/groups.ts","../../admin/assets/src/api/group.ts","../../admin/assets/src/index.ts","../../admin/assets/src/utils/sidebar.ts","../../admin/assets/src/content/media.browser.ts","../../admin/assets/src/statistics/statistics.ts","../../admin/assets/src/content/csvimport.ts"],"sourcesContent":["/**\n * Fetch data for attachment management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-05-01\n */\n\nimport { Response } from '../interfaces';\n\nexport const deleteAttachments = async (attachmentId: string, csrfToken: string): Promise<Response> => {\n  try {\n    const response = await fetch('./api/content/attachments', {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ attId: attachmentId, csrf: csrfToken }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const refreshAttachments = async (attachmentId: string, csrfToken: string): Promise<Response> => {\n  try {\n    const response = await fetch('./api/content/attachments/refresh', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ attId: attachmentId, csrf: csrfToken }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const uploadAttachments = async (formData: FormData): Promise<Response> => {\n  try {\n    const response = await fetch('./api/content/attachments/upload', {\n      method: 'POST',\n      cache: 'no-cache',\n      body: formData,\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Fetch data for category management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-12-28\n */\nimport { CategoryTranslations, Response } from '../interfaces';\n\nexport const fetchCategoryTranslations = async (categoryId: string): Promise<CategoryTranslations> => {\n  try {\n    const response = await fetch(`./api/category/translations/${categoryId}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteCategory = async (\n  categoryId: string,\n  language: string,\n  csrfToken: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/category/delete`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        categoryId: categoryId,\n        language: language,\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const setCategoryTree = async (\n  categoryTree: any,\n  categoryId: string,\n  csrfToken: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/category/update-order', {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        categoryTree: categoryTree,\n        categoryId: categoryId,\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Fetch data for configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-01-21\n */\n\nimport { Response } from '../interfaces';\n\nexport const fetchConfiguration = async (target: string, language: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/list/${target.substring(1)}`, {\n      headers: {\n        'Accept-Language': language,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error('Network response was not ok.');\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchFaqsSortingKeys = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/faqs-sorting-key/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchFaqsSortingOrder = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/faqs-sorting-order/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchFaqsSortingPopular = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/faqs-sorting-popular/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchPermLevel = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/perm-level/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchReleaseEnvironment = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/release-environment/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchSearchRelevance = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/search-relevance/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchSeoMetaTags = async (currentValue: string): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/seo-metatags/${currentValue}`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchTemplates = async (): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/templates`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchTranslations = async (): Promise<string> => {\n  try {\n    const response = await fetch(`./api/configuration/translations`);\n\n    if (!response.ok) {\n      return '';\n    }\n\n    return await response.text();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const saveConfiguration = async (data: FormData): Promise<void> => {\n  try {\n    const response = (await fetch('api/configuration', {\n      method: 'POST',\n      body: data,\n    })) as unknown as Response;\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Fetch data for FAQs overview management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-12-27\n */\n\nimport { Response } from '../interfaces';\nimport { FaqList } from '../interfaces';\n\nexport const fetchAllFaqsByCategory = async (\n  categoryId: string,\n  language: string,\n  onlyInactive?: boolean,\n  onlyNew?: boolean\n): Promise<FaqList> => {\n  try {\n    let currentUrl: string = window.location.protocol + '//' + window.location.host;\n    let pathname: string = window.location.pathname;\n\n    if (pathname.endsWith('/faqs')) {\n      pathname = pathname.slice(0, -5);\n    }\n\n    currentUrl += pathname;\n    const url = new URL(`${currentUrl}/api/faqs/${categoryId}/${language}`);\n    if (onlyInactive) {\n      url.searchParams.set('only-inactive', onlyInactive as unknown as string);\n    }\n    if (onlyNew) {\n      url.searchParams.set('only-new', onlyNew as unknown as string);\n    }\n    const response = await fetch(url.toString(), {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchFaqsByAutocomplete = async (searchTerm: string, csrfToken: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/faq/search`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        search: searchTerm,\n        csrf: csrfToken,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteFaq = async (faqId: string, faqLanguage: string, token: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/faq/delete', {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: token,\n        faqId: faqId,\n        faqLanguage: faqLanguage,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const create = async (formData: any): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/faq/create', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        data: formData,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const update = async (formData: any): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/faq/update', {\n      method: 'PUT',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        data: formData,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Fetch data for user management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-03-23\n */\n\nimport { Response, UserData } from '../interfaces';\n\nexport const fetchUsers = async (userName: string): Promise<Response> => {\n  try {\n    const response = await fetch(`./api/user/users?filter=${userName}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchUserData = async (userId: string): Promise<UserData> => {\n  try {\n    const response = await fetch(`./api/user/data/${userId}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchUserRights = async (userId: string): Promise<number[]> => {\n  try {\n    const response = await fetch(`./api/user/permissions/${userId}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchAllUsers = async (): Promise<Response> => {\n  try {\n    const response = await fetch('./api/user/users', {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const overwritePassword = async (\n  csrf: string,\n  userId: string,\n  newPassword: string,\n  passwordRepeat: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/user/overwrite-password', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        userId: userId,\n        newPassword: newPassword,\n        passwordRepeat: passwordRepeat,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const postUserData = async (url: string = '', data: Record<string, any> = {}): Promise<Response> => {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(data),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const activateUser = async (userId: string, csrfToken: string): Promise<Response> => {\n  try {\n    const response = await fetch('./api/user/activate', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n        userId: userId,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteUser = async (userId: string, csrfToken: string): Promise<Response> => {\n  try {\n    const response = await fetch('./api/user/delete', {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n        userId: userId,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Version comparison utility function\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-11-25\n */\n\ntype VersionOperator = '<' | 'lt' | '<=' | 'le' | '>' | 'gt' | '>=' | 'ge' | '==' | '=' | 'eq' | '!=' | '<>' | 'ne';\n\n/**\n * Special version identifiers and their order\n * The lower the value, the lower the priority\n */\nconst VERSION_SPECIAL: Record<string, number> = {\n  dev: 0,\n  alpha: 1,\n  a: 1,\n  beta: 2,\n  b: 2,\n  rc: 3,\n  '#': 4,\n  pl: 5,\n  p: 5,\n};\n\ninterface ParsedVersion {\n  parts: number[];\n  special: string | null;\n  specialNumber: number;\n}\n\n/**\n * Parses a version string into its components\n * @param version - Version string to parse\n * @returns Parsed version object\n */\nconst parseVersion = (version: string): ParsedVersion => {\n  // Remove leading/trailing whitespace\n  version = version.trim().toLowerCase();\n\n  // Initialize result\n  const result: ParsedVersion = {\n    parts: [],\n    special: null,\n    specialNumber: 0,\n  };\n\n  // Extract special version identifier (dev, alpha, beta, rc, pl, etc.)\n  let specialMatch = version.match(/(dev|alpha|a|beta|b|rc|pl|p)(\\d*)/);\n  if (specialMatch) {\n    result.special = specialMatch[1];\n    result.specialNumber = specialMatch[2] ? parseInt(specialMatch[2], 10) : 0;\n    // Remove the special part from version\n    version = version.substring(0, specialMatch.index);\n  }\n\n  // Remove any non-numeric characters except dots (like #, -, _)\n  version = version.replace(/[^0-9.]/g, '.');\n\n  // Split by dots and parse numbers\n  const parts = version.split('.');\n  for (const part of parts) {\n    if (part === '') continue;\n    const num = parseInt(part, 10);\n    if (!isNaN(num)) {\n      result.parts.push(num);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Compares two parsed version objects\n * @param v1 - First parsed version\n * @param v2 - Second parsed version\n * @returns -1 if v1 < v2, 0 if equal, 1 if v1 > v2\n */\nconst compareVersions = (v1: ParsedVersion, v2: ParsedVersion): number => {\n  // Compare numeric parts\n  const maxLength = Math.max(v1.parts.length, v2.parts.length);\n  for (let i = 0; i < maxLength; i++) {\n    const part1 = v1.parts[i] || 0;\n    const part2 = v2.parts[i] || 0;\n\n    if (part1 < part2) return -1;\n    if (part1 > part2) return 1;\n  }\n\n  // If numeric parts are equal, compare special versions\n  const special1 = v1.special ? VERSION_SPECIAL[v1.special] : 4; // Default to '#' level if no special\n  const special2 = v2.special ? VERSION_SPECIAL[v2.special] : 4;\n\n  if (special1 < special2) return -1;\n  if (special1 > special2) return 1;\n\n  // If special versions are the same, compare special numbers\n  if (v1.specialNumber < v2.specialNumber) return -1;\n  if (v1.specialNumber > v2.specialNumber) return 1;\n\n  return 0;\n};\n\n/**\n * Compares two version strings, mimicking PHP's version_compare() function\n *\n * @param version1 - First version string\n * @param version2 - Second version string\n * @param operator - Optional comparison operator\n * @returns boolean result\n *\n * @example\n * ```typescript\n * versionCompare('1.0.0', '1.0.1', '<'); // true\n * versionCompare('2.0.0', '1.0.0', '>='); // true\n * ```\n */\nexport function versionCompare(version1: string, version2: string, operator: VersionOperator): boolean {\n  const v1 = parseVersion(version1);\n  const v2 = parseVersion(version2);\n  const result = compareVersions(v1, v2);\n\n  // Apply operator\n  switch (operator) {\n    case '<':\n    case 'lt':\n      return result < 0;\n    case '<=':\n    case 'le':\n      return result <= 0;\n    case '>':\n    case 'gt':\n      return result > 0;\n    case '>=':\n    case 'ge':\n      return result >= 0;\n    case '==':\n    case '=':\n    case 'eq':\n      return result === 0;\n    case '!=':\n    case '<>':\n    case 'ne':\n      return result !== 0;\n    default:\n      throw new Error(`Invalid operator: ${operator}`);\n  }\n}\n","/**\n * Admin dashboard\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2020-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2020-04-22\n */\n\nimport Masonry from 'masonry-layout';\nimport { Chart, registerables } from 'chart.js';\nimport { getRemoteHashes, verifyHashes } from './api';\nimport { addElement, TranslationService } from '../../../assets/src/utils';\n\n// Read current Bootstrap theme colors from CSS variables (light/dark aware)\nconst getThemeColors = () => {\n  const styles: CSSStyleDeclaration = getComputedStyle(document.documentElement);\n  const primary: string = (styles.getPropertyValue('--bs-primary') || '#0d6efd').trim();\n  const bodyColor: string = (styles.getPropertyValue('--bs-body-color') || '#212529').trim();\n  const bodyColorRgb: string = (styles.getPropertyValue('--bs-body-color-rgb') || '33, 37, 41').trim();\n  const borderColorVar: string = styles.getPropertyValue('--bs-border-color').trim();\n  const gridColor: string = borderColorVar !== '' ? borderColorVar : `rgba(${bodyColorRgb}, 0.4)`;\n  const tooltipBg: string = (styles.getPropertyValue('--bs-tertiary-bg') || `rgba(${bodyColorRgb}, 0.85)`).trim();\n  return { primary, bodyColor, gridColor, tooltipBg } as const;\n};\n\nexport const renderVisitorCharts = async (): Promise<void> => {\n  const context = document.getElementById('pmf-chart-visits') as HTMLCanvasElement | null;\n\n  if (context) {\n    Chart.register(...registerables);\n\n    const colors = getThemeColors();\n\n    const visitorChart = new Chart(context, {\n      type: 'line',\n      data: {\n        labels: [] as string[],\n        datasets: [\n          {\n            data: [] as number[],\n            borderWidth: 2,\n            borderColor: colors.primary,\n            backgroundColor: colors.primary,\n            label: ' Visitors',\n            pointStyle: 'circle',\n            pointRadius: 4,\n            pointHoverRadius: 8,\n            pointBackgroundColor: colors.primary,\n            pointBorderColor: colors.primary,\n            fill: false,\n            cubicInterpolationMode: 'monotone',\n            tension: 0.4,\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        interaction: {\n          intersect: false,\n        },\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false,\n            labels: {\n              color: colors.bodyColor,\n            },\n          },\n          tooltip: {\n            backgroundColor: colors.tooltipBg,\n            titleColor: colors.bodyColor,\n            bodyColor: colors.bodyColor,\n            borderColor: colors.gridColor,\n            borderWidth: 1,\n          },\n        },\n        scales: {\n          x: {\n            display: true,\n            title: {\n              display: false,\n              color: colors.bodyColor,\n            },\n            ticks: {\n              color: colors.bodyColor,\n            },\n            grid: {\n              color: colors.gridColor,\n            },\n          },\n          y: {\n            display: true,\n            title: {\n              display: true,\n              text: 'Visitors',\n              color: colors.bodyColor,\n            },\n            ticks: {\n              color: colors.bodyColor,\n            },\n            grid: {\n              color: colors.gridColor,\n            },\n          },\n        },\n      },\n    });\n\n    // Update chart colors on theme change\n    const applyVisitorTheme = (): void => {\n      const c = getThemeColors();\n      const ds = visitorChart.data.datasets[0];\n      ds.borderColor = c.primary;\n      (ds as any).pointBackgroundColor = c.primary;\n      (ds as any).pointBorderColor = c.primary;\n      visitorChart.options.plugins = visitorChart.options.plugins || {};\n      visitorChart.options.plugins.legend = { display: false, labels: { color: c.bodyColor } };\n      visitorChart.options.plugins.tooltip = {\n        backgroundColor: c.tooltipBg,\n        titleColor: c.bodyColor,\n        bodyColor: c.bodyColor,\n        borderColor: c.gridColor,\n        borderWidth: 1,\n      };\n      visitorChart.options.scales = visitorChart.options.scales || {};\n      (visitorChart.options.scales.x as any) = {\n        display: true,\n        title: { display: false, color: c.bodyColor },\n        ticks: { color: c.bodyColor },\n        grid: { color: c.gridColor },\n      };\n      (visitorChart.options.scales.y as any) = {\n        display: true,\n        title: { display: true, text: 'Visitors', color: c.bodyColor },\n        ticks: { color: c.bodyColor },\n        grid: { color: c.gridColor },\n      };\n      visitorChart.update('none');\n    };\n\n    const themeObserver = new MutationObserver((mutations) => {\n      for (const m of mutations) {\n        if (m.type === 'attributes' && m.attributeName === 'data-bs-theme') {\n          applyVisitorTheme();\n        }\n      }\n    });\n    themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-bs-theme'] });\n\n    const getData = async (): Promise<void> => {\n      try {\n        const response = await fetch('./api/dashboard/visits', {\n          method: 'GET',\n          cache: 'no-cache',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          redirect: 'follow',\n          referrerPolicy: 'no-referrer',\n        });\n\n        if (response.status === 200) {\n          const visits: { date: string; number: number }[] = await response.json();\n\n          visits.forEach((visit) => {\n            visitorChart.data.labels!.push(visit.date);\n            (visitorChart.data.datasets[0].data as number[]).push(visit.number);\n          });\n\n          visitorChart.update();\n        }\n      } catch (error) {\n        console.error('Request failure: ', error);\n      }\n    };\n\n    await getData();\n  }\n};\n\nexport const renderTopTenCharts = async (): Promise<void> => {\n  const context = document.getElementById('pmf-chart-topten') as HTMLCanvasElement | null;\n\n  if (context) {\n    Chart.register(...registerables);\n\n    const colorsForBars = getThemeColors();\n\n    let colors: string[] = [];\n\n    const doughnutChart = new Chart(context, {\n      type: 'bar',\n      data: {\n        labels: [] as string[],\n        datasets: [\n          {\n            data: [] as number[],\n            borderWidth: 1,\n            borderColor: 'white',\n            backgroundColor: colors,\n            label: ' Visitors',\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        interaction: {\n          intersect: false,\n        },\n        plugins: {\n          legend: {\n            display: false,\n            labels: {\n              color: colorsForBars.bodyColor,\n            },\n          },\n        },\n        maintainAspectRatio: false,\n        scales: {\n          x: {\n            display: true,\n            title: {\n              display: false,\n              color: colorsForBars.bodyColor,\n            },\n            ticks: {\n              display: false,\n              color: colorsForBars.bodyColor,\n            },\n            grid: {\n              color: colorsForBars.gridColor,\n            },\n          },\n          y: {\n            display: true,\n            title: {\n              display: false,\n              color: colorsForBars.bodyColor,\n            },\n            ticks: {\n              color: colorsForBars.bodyColor,\n            },\n            grid: {\n              color: colorsForBars.gridColor,\n            },\n          },\n        },\n      },\n    });\n\n    const applyBarTheme = (): void => {\n      const c = getThemeColors();\n      if (!doughnutChart.options.plugins) doughnutChart.options.plugins = {};\n      doughnutChart.options.plugins.legend = { display: false, labels: { color: c.bodyColor } };\n      (doughnutChart.options.scales!.x as any) = {\n        display: true,\n        title: { display: false, color: c.bodyColor },\n        ticks: { display: false, color: c.bodyColor },\n        grid: { color: c.gridColor },\n      };\n      (doughnutChart.options.scales!.y as any) = {\n        display: true,\n        title: { display: false, color: c.bodyColor },\n        ticks: { color: c.bodyColor },\n        grid: { color: c.gridColor },\n      };\n      doughnutChart.update('none');\n    };\n\n    const themeObserver = new MutationObserver((mutations) => {\n      for (const m of mutations) {\n        if (m.type === 'attributes' && m.attributeName === 'data-bs-theme') {\n          applyBarTheme();\n        }\n      }\n    });\n    themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-bs-theme'] });\n\n    const dynamicColors = (): string => {\n      const r: number = Math.floor(Math.random() * 255);\n      const g: number = Math.floor(Math.random() * 255);\n      const b: number = Math.floor(Math.random() * 255);\n      return 'rgb(' + r + ',' + g + ',' + b + ')';\n    };\n\n    const getData = async (): Promise<void> => {\n      try {\n        const response = await fetch('./api/dashboard/topten', {\n          method: 'GET',\n          cache: 'no-cache',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          redirect: 'follow',\n          referrerPolicy: 'no-referrer',\n        });\n\n        if (response.status === 200) {\n          const topTen: { question: string; visits: number }[] = await response.json();\n\n          topTen.forEach((faq: { question: string; visits: number }): void => {\n            doughnutChart.data.labels!.push(faq.question);\n            (doughnutChart.data.datasets[0].data as number[]).push(faq.visits);\n            colors.push(dynamicColors());\n          });\n\n          doughnutChart.update();\n        }\n      } catch (error) {\n        console.error('Request failure: ', error);\n      }\n    };\n\n    await getData();\n  }\n};\n\nexport const getLatestVersion = async (): Promise<void> => {\n  const loader = document.getElementById('version-loader') as HTMLDivElement;\n  const versionText = document.getElementById('phpmyfaq-latest-version') as HTMLDivElement;\n\n  if (loader && versionText) {\n    loader.classList.remove('d-none');\n\n    try {\n      const response = await fetch('./api/dashboard/versions', {\n        method: 'GET',\n        cache: 'no-cache',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n      });\n\n      if (response.ok) {\n        const version = await response.json();\n        loader.classList.add('d-none');\n\n        if (version.success) {\n          versionText.insertAdjacentElement(\n            'afterend',\n            addElement('div', {\n              classList: 'alert alert-success',\n              innerText: version.success,\n            })\n          );\n        }\n        if (version.warning) {\n          versionText.insertAdjacentElement(\n            'afterend',\n            addElement('div', {\n              classList: 'alert alert-danger',\n              innerText: version.warning,\n            })\n          );\n        }\n        if (version.error) {\n          versionText.insertAdjacentElement(\n            'afterend',\n            addElement('div', {\n              classList: 'alert alert-danger',\n              innerText: version.error,\n            })\n          );\n        }\n      } else {\n        throw new Error('Network response was not ok');\n      }\n    } catch (error) {\n      const errorMessage = (error as Error).message || 'Unknown error';\n      loader.classList.add('d-none');\n      versionText.insertAdjacentElement(\n        'afterend',\n        addElement('div', {\n          classList: 'alert alert-danger',\n          innerText: errorMessage,\n        })\n      );\n    }\n  }\n};\n\nexport const handleVerificationModal = async (): Promise<void> => {\n  const verificationModal = document.getElementById('verificationModal') as HTMLDivElement;\n  const Translator = new TranslationService();\n  if (verificationModal) {\n    verificationModal.addEventListener('show.bs.modal', async (): Promise<void> => {\n      const spinner = document.getElementById('pmf-verification-spinner') as HTMLDivElement;\n      const version = verificationModal.getAttribute('data-pmf-current-version') as string;\n      const updates = document.getElementById('pmf-verification-updates') as HTMLDivElement;\n      const language: string = document.documentElement.lang;\n      await Translator.loadTranslations(language);\n      if (spinner && updates && version) {\n        spinner.classList.remove('d-none');\n        updates.innerText = Translator.translate('msgFetchingHashes');\n        const remoteHashes = (await getRemoteHashes(version)) as Record<string, string>;\n        updates.innerText = Translator.translate('msgCheckHashes');\n        const issues = await verifyHashes(remoteHashes);\n\n        if (typeof issues !== 'object') {\n          console.error('Invalid JSON data provided.');\n        }\n\n        const ul = document.createElement('ul') as HTMLUListElement;\n        for (const [filename, hashValue] of Object.entries(issues)) {\n          const li = document.createElement('li') as HTMLLIElement;\n          li.textContent = `${Translator.translate('msgAttachmentsFilename')}: ${filename}, Hash: ${hashValue}`;\n          ul.appendChild(li);\n        }\n\n        updates.appendChild(ul);\n        spinner.classList.add('d-none');\n      }\n    });\n  }\n};\n\nwindow.onload = (): void => {\n  const masonryElement = document.querySelector('.masonry-grid') as HTMLElement;\n  if (masonryElement) {\n    new Masonry(masonryElement, { percentPosition: true });\n  }\n};\n","/**\n * Fetch data for verification\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-07-09\n */\n\ninterface RemoteHashes {\n  [key: string]: string;\n}\n\nexport const getRemoteHashes = async (version: string): Promise<RemoteHashes | undefined> => {\n  try {\n    const response = await fetch(`https://api.phpmyfaq.de/verify/${version}`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const verifyHashes = async (remoteHashes: RemoteHashes): Promise<any> => {\n  try {\n    const response = await fetch('./api/dashboard/verify', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(remoteHashes),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Handle admin log management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-04-21\n */\n\nimport { deleteAdminLog } from '../api';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\nexport const handleDeleteAdminLog = (): void => {\n  const buttonDeleteAdminLog = document.getElementById('pmf-delete-admin-log') as HTMLButtonElement | null;\n\n  if (buttonDeleteAdminLog) {\n    buttonDeleteAdminLog.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const target = event.target as HTMLElement;\n      const csrf = target.getAttribute('data-pmf-csrf')!;\n      const response = (await deleteAdminLog(csrf)) as Response;\n\n      if (response.success) {\n        pushNotification(response.success);\n      } else {\n        pushErrorNotification(response.error);\n      }\n    });\n  }\n};\n","/**\n * Fetch data for statistics management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-04-21\n */\n\nimport { Response } from '../interfaces';\n\nexport const deleteAdminLog = async (csrfToken: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/statistics/admin-log`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const truncateSearchTerms = async (csrfToken: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/statistics/search-terms`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const clearRatings = async (csrfToken: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/statistics/ratings/clear`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\nexport const clearVisits = async (csrfToken: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/statistics/visits/clear`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteSessions = async (csrfToken: string, month: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/statistics/sessions`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n        month: month,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Clear Ratings Handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-11-14\n */\n\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { clearRatings } from '../api';\nimport { Response } from '../interfaces';\n\nexport const handleClearRatings = (): void => {\n  const buttonClearRatings = document.getElementById('pmf-admin-clear-ratings') as HTMLButtonElement | null;\n\n  if (buttonClearRatings) {\n    buttonClearRatings.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const target = event.target as HTMLElement;\n      const csrf = target.getAttribute('data-pmf-csrf')!;\n      const response = (await clearRatings(csrf)) as Response;\n\n      if (response.success) {\n        pushNotification(response.success);\n      } else {\n        pushErrorNotification(response.error);\n      }\n    });\n  }\n};\n","import { createReport } from '../api/export';\nimport { pushErrorNotification, serialize } from '../../../../assets/src/utils';\n\nexport const handleCreateReport = (): void => {\n  const createReportButton = document.getElementById('pmf-admin-create-report') as HTMLButtonElement | null;\n\n  if (createReportButton) {\n    createReportButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n\n      const form = document.getElementById('pmf-admin-report-form') as HTMLFormElement;\n      const formData = new FormData(form);\n\n      const serializedData = serialize(formData);\n\n      const response = await createReport(serializedData);\n\n      if ('error' in response) {\n        pushErrorNotification(response.error);\n      } else {\n        // Create a download link\n        const url = window.URL.createObjectURL(response);\n        const anchor = document.createElement('a');\n        anchor.href = url;\n        anchor.download = 'phpmyfaq-report-' + new Date().toISOString().substring(0, 10) + '.csv';\n        document.body.appendChild(anchor);\n        anchor.click();\n        document.body.removeChild(anchor);\n        window.URL.revokeObjectURL(url);\n      }\n    });\n  }\n};\n","/**\n * Fetch data for exports\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-05-05\n */\n\nimport { Response } from '../interfaces';\n\nexport const createReport = async (data: any, csrfToken: string): Promise<Blob | Response | undefined> => {\n  try {\n    const response = await fetch('./api/export/report', {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        data: data,\n        csrfToken: csrfToken,\n      }),\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    if (response.ok) {\n      return await response.blob();\n    } else {\n      return await response.json();\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\n","/**\n * Search Term Handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Jan Harms <model_railroader@gmx-topmail.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-05-09\n */\n\nimport { truncateSearchTerms } from '../api';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\nexport const handleTruncateSearchTerms = (): void => {\n  const buttonTruncateSearchTerms = document.getElementById(\n    'pmf-button-truncate-search-terms'\n  ) as HTMLButtonElement | null;\n\n  if (buttonTruncateSearchTerms) {\n    buttonTruncateSearchTerms.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n\n      const target = event.target as HTMLElement;\n      const csrf = target.getAttribute('data-pmf-csrf-token')!;\n\n      if (confirm('Are you sure?')) {\n        const response = (await truncateSearchTerms(csrf)) as Response;\n\n        if (response.success) {\n          const tableToDelete = document.getElementById('pmf-table-search-terms') as HTMLElement;\n          tableToDelete.remove();\n          pushNotification(response.success);\n        } else {\n          pushErrorNotification(response.error);\n        }\n      }\n    });\n  }\n};\n","/**\n * Session Handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Jan Harms <model_railroader@gmx-topmail.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-01-14\n */\n\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { clearVisits, deleteSessions } from '../api';\n\nexport const handleSessionsFilter = (): void => {\n  const button = document.getElementById('pmf-admin-session-day') as HTMLButtonElement | null;\n\n  if (button) {\n    button.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const form = document.getElementById('pmf-admin-form-session') as HTMLFormElement;\n      const timestamp = (document.getElementById('day') as HTMLInputElement).value;\n      const day = new Date(Number(timestamp) * 1000).toISOString().split('T')[0];\n      form.action = `./statistics/sessions/${day}`;\n      form.submit();\n    });\n  }\n};\n\nexport const handleSessions = (): void => {\n  const firstHour = document.getElementById('firstHour') as HTMLInputElement | null;\n  const lastHour = document.getElementById('lastHour') as HTMLInputElement | null;\n  const exportSessions = document.getElementById('exportSessions') as HTMLButtonElement | null;\n  const csrf = document.getElementById('csrf') as HTMLInputElement | null;\n\n  if (firstHour && lastHour) {\n    firstHour.addEventListener('change', () => {\n      if (exportSessions) {\n        exportSessions.disabled = !(firstHour.value !== '' && lastHour.value !== '');\n      }\n    });\n    lastHour.addEventListener('change', () => {\n      if (exportSessions) {\n        exportSessions.disabled = !(lastHour.value !== '' && firstHour.value !== '');\n      }\n    });\n  }\n\n  if (exportSessions) {\n    exportSessions.disabled = true;\n    exportSessions.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n\n      try {\n        const response = await fetch('./api/session/export', {\n          method: 'POST',\n          headers: {\n            Accept: 'application/json, text/plain, */*',\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            csrf: csrf?.value,\n            firstHour: firstHour?.value,\n            lastHour: lastHour?.value,\n          }),\n        });\n        if (response.ok) {\n          const blob = await response.blob();\n          const url = URL.createObjectURL(blob);\n          const link = document.createElement('a');\n          link.href = url;\n          link.download = `sessions_${firstHour?.value}--${lastHour?.value}.csv`;\n          document.body.appendChild(link);\n          link.click();\n          URL.revokeObjectURL(url);\n        } else {\n          const jsonResponse = await response.json();\n          pushErrorNotification(jsonResponse.error);\n        }\n      } catch (error) {\n        console.error(error.message);\n      }\n    });\n  }\n};\n\nexport const handleClearVisits = (): void => {\n  const buttonClearVisits = document.getElementById('pmf-admin-clear-visits') as HTMLButtonElement | null;\n\n  if (buttonClearVisits) {\n    buttonClearVisits.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const target = event.target as HTMLElement;\n      const csrf = target.getAttribute('data-pmf-csrf')!;\n      const response = await clearVisits(csrf);\n\n      if (response.success) {\n        pushNotification(response.success);\n      } else {\n        pushErrorNotification(response.error);\n      }\n    });\n  }\n};\n\nexport const handleDeleteSessions = (): void => {\n  const buttonDeleteSessions = document.getElementById('pmf-admin-delete-sessions') as HTMLButtonElement | null;\n\n  if (buttonDeleteSessions) {\n    buttonDeleteSessions.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const csrf = (document.getElementById('pmf-csrf-token') as HTMLInputElement).value;\n      const month = (document.getElementById('month') as HTMLInputElement).value;\n      const response = await deleteSessions(csrf, month);\n\n      if (response.success) {\n        pushNotification(response.success);\n      } else {\n        pushErrorNotification(response.error);\n      }\n    });\n  }\n};\n","/**\n * Admin configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-01-29\n */\n\nimport { Tab } from 'bootstrap';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport {\n  fetchConfiguration,\n  fetchFaqsSortingKeys,\n  fetchFaqsSortingOrder,\n  fetchFaqsSortingPopular,\n  fetchPermLevel,\n  fetchReleaseEnvironment,\n  fetchSearchRelevance,\n  fetchSeoMetaTags,\n  fetchTemplates,\n  fetchTranslations,\n  saveConfiguration,\n} from '../api';\nimport { Response } from '../interfaces';\n\nexport const handleConfiguration = async (): Promise<void> => {\n  const configTabList: HTMLElement[] = [].slice.call(document.querySelectorAll('#configuration-list a'));\n  const result = document.getElementById('pmf-configuration-result') as HTMLElement;\n  if (configTabList.length) {\n    let tabLoaded: boolean = false;\n    configTabList.forEach((element: HTMLElement): void => {\n      const configTabTrigger = new Tab(element);\n      element.addEventListener('shown.bs.tab', async (event: Event): Promise<void> => {\n        event.preventDefault();\n        const target = (event.target as HTMLAnchorElement).getAttribute('href') as string;\n        await handleConfigurationTab(target);\n\n        switch (target) {\n          case '#main':\n            await handleTranslation();\n            break;\n          case '#layout':\n            await handleTemplates();\n            break;\n          case '#records':\n            await handleFaqsSortingKeys();\n            await handleFaqsSortingOrder();\n            await handleFaqsSortingPopular();\n            break;\n          case '#search':\n            await handleSearchRelevance();\n            break;\n          case '#security':\n            await handlePermLevel();\n            break;\n          case '#seo':\n            await handleSeoMetaTags();\n            break;\n          case '#upgrade':\n            await handleReleaseEnvironment();\n            break;\n          case '#mail':\n            await handleSMTPPasswordToggle();\n            break;\n        }\n\n        tabLoaded = true;\n        if (configTabTrigger instanceof Element) {\n          configTabTrigger.show();\n        }\n        result.innerHTML = '';\n      });\n    });\n\n    if (!tabLoaded) {\n      await handleConfigurationTab('#main');\n      await handleTranslation();\n    }\n  }\n};\n\nexport const handleSaveConfiguration = async (): Promise<void> => {\n  const saveConfigurationButton = document.getElementById('save-configuration') as HTMLButtonElement;\n\n  if (saveConfigurationButton) {\n    saveConfigurationButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const form = document.getElementById('configuration-list') as HTMLFormElement;\n      const formData = new FormData(form);\n\n      // Collect all configuration field names that are currently in the form\n      const availableFields: string[] = [];\n      const inputs = form.querySelectorAll('input, select, textarea');\n      inputs.forEach((input: Element): void => {\n        const name = (input as HTMLInputElement).name;\n        if (name && name.startsWith('edit[')) {\n          // Extract the config key from a name like \"edit[main.language]\"\n          const match = name.match(/edit\\[([^\\]]+)\\]/);\n          if (match) {\n            availableFields.push(match[1]);\n          }\n        }\n      });\n\n      // Add the available fields list to the form data\n      formData.append('availableFields', JSON.stringify(availableFields));\n\n      const response = (await saveConfiguration(formData)) as unknown as Response;\n\n      if (typeof response.success === 'string') {\n        pushNotification(response.success);\n      } else {\n        pushErrorNotification(response.error as string);\n      }\n    });\n  }\n};\n\nexport const handleSMTPPasswordToggle = async (): Promise<void> => {\n  const passwordField = document.getElementsByName('edit[mail.remoteSMTPPassword]') as NodeListOf<HTMLInputElement>;\n  const toggleHTML =\n    '<span class=\"input-group-text\" id=\"SMTPtogglePassword\"><i class=\"bi bi-eye-slash\" id=\"SMTPtogglePassword_icon\"></i></span>';\n  const containerDiv = document.createElement('div');\n  containerDiv.classList.add('input-group');\n  containerDiv.innerHTML = `\n        <input class=\"form-control\" type=\"password\" autocomplete=\"off\" name=\"edit[mail.remoteSMTPPassword]\" value=\"\" data-pmf-toggle=\"SMTPtogglePassword\">\n        ${toggleHTML}\n    `;\n  passwordField[0].insertAdjacentElement('afterend', containerDiv);\n  passwordField[0].remove();\n  const toggle = document.getElementById('SMTPtogglePassword') as HTMLElement;\n  toggle.addEventListener('click', () => {\n    const type = passwordField[0].getAttribute('type') === 'password' ? 'text' : 'password';\n    passwordField[0].setAttribute('type', type);\n    const icon = document.getElementById('SMTPtogglePassword_icon') as HTMLElement;\n    icon.classList.toggle('bi-eye');\n    icon.classList.toggle('bi-eye-slash');\n  });\n};\n\nexport const handleTranslation = async (): Promise<void> => {\n  const translationSelectBox = document.getElementsByName('edit[main.language]') as NodeListOf<HTMLSelectElement>;\n\n  if (translationSelectBox !== null) {\n    const options = await fetchTranslations();\n    if (translationSelectBox[0]) {\n      translationSelectBox[0].insertAdjacentHTML('beforeend', options);\n    }\n  }\n};\n\nexport const handleTemplates = async (): Promise<void> => {\n  const templateSelectBox = document.getElementsByName('edit[layout.templateSet]') as NodeListOf<HTMLSelectElement>;\n  if (templateSelectBox !== null) {\n    const options = await fetchTemplates();\n    templateSelectBox[0].insertAdjacentHTML('beforeend', options);\n  }\n};\n\nexport const handleFaqsSortingKeys = async (): Promise<void> => {\n  const faqsOrderSelectBox = document.getElementsByName('edit[records.orderby]') as NodeListOf<HTMLSelectElement>;\n  if (faqsOrderSelectBox !== null) {\n    const currentValue = faqsOrderSelectBox[0].dataset.pmfConfigurationCurrentValue as string;\n    const options = await fetchFaqsSortingKeys(currentValue);\n    if (faqsOrderSelectBox[0]) {\n      faqsOrderSelectBox[0].insertAdjacentHTML('beforeend', options);\n    }\n  }\n};\n\nexport const handleFaqsSortingOrder = async (): Promise<void> => {\n  const faqsOrderSelectBox = document.getElementsByName('edit[records.sortby]') as NodeListOf<HTMLSelectElement>;\n  if (faqsOrderSelectBox !== null) {\n    const currentValue = faqsOrderSelectBox[0].dataset.pmfConfigurationCurrentValue as string;\n    const options = await fetchFaqsSortingOrder(currentValue);\n    faqsOrderSelectBox[0].insertAdjacentHTML('beforeend', options);\n  }\n};\n\nexport const handleFaqsSortingPopular = async (): Promise<void> => {\n  const faqsPopularSelectBox = document.getElementsByName(\n    'edit[records.orderingPopularFaqs]'\n  ) as NodeListOf<HTMLSelectElement>;\n  if (faqsPopularSelectBox !== null) {\n    const currentValue = faqsPopularSelectBox[0].dataset.pmfConfigurationCurrentValue as string;\n    const options = await fetchFaqsSortingPopular(currentValue);\n    faqsPopularSelectBox[0].insertAdjacentHTML('beforeend', options);\n  }\n};\n\nexport const handlePermLevel = async (): Promise<void> => {\n  const permLevelSelectBox = document.getElementsByName('edit[security.permLevel]') as NodeListOf<HTMLSelectElement>;\n  if (permLevelSelectBox !== null) {\n    const currentValue = permLevelSelectBox[0].dataset.pmfConfigurationCurrentValue as string;\n    const options = await fetchPermLevel(currentValue);\n    permLevelSelectBox[0].insertAdjacentHTML('beforeend', options);\n  }\n};\n\nexport const handleReleaseEnvironment = async (): Promise<void> => {\n  const releaseEnvironmentSelectBox = document.getElementsByName(\n    'edit[upgrade.releaseEnvironment]'\n  ) as NodeListOf<HTMLSelectElement>;\n  if (releaseEnvironmentSelectBox !== null) {\n    const currentValue = releaseEnvironmentSelectBox[0].dataset.pmfConfigurationCurrentValue as string;\n    const options = await fetchReleaseEnvironment(currentValue);\n    releaseEnvironmentSelectBox[0].insertAdjacentHTML('beforeend', options);\n  }\n};\n\nexport const handleSearchRelevance = async (): Promise<void> => {\n  const searchRelevanceSelectBox = document.getElementsByName(\n    'edit[search.relevance]'\n  ) as NodeListOf<HTMLSelectElement>;\n  if (searchRelevanceSelectBox !== null) {\n    const currentValue = searchRelevanceSelectBox[0].dataset.pmfConfigurationCurrentValue as string;\n    const options = await fetchSearchRelevance(currentValue);\n    searchRelevanceSelectBox[0].insertAdjacentHTML('beforeend', options);\n  }\n};\n\nexport const handleSeoMetaTags = async (): Promise<void> => {\n  const seoMetaTagsSelectBoxes = document.querySelectorAll(\n    'select[name^=\"edit[seo.metaTags\"]'\n  ) as NodeListOf<HTMLSelectElement>;\n\n  if (seoMetaTagsSelectBoxes) {\n    for (const seoMetaTagsSelectBox of seoMetaTagsSelectBoxes) {\n      const currentValue = seoMetaTagsSelectBox.dataset.pmfConfigurationCurrentValue as string;\n      const options = await fetchSeoMetaTags(currentValue);\n      seoMetaTagsSelectBox.insertAdjacentHTML('beforeend', options);\n    }\n  }\n};\n\nexport const handleConfigurationTab = async (target: string): Promise<void> => {\n  const languageElement = document.getElementById('pmf-language') as HTMLInputElement;\n  if (!languageElement) {\n    throw new Error('Language element not found');\n  }\n  const language: string = languageElement.value;\n  const response: string = await fetchConfiguration(target, language);\n\n  const tabContent = document.querySelector(target) as HTMLElement;\n  if (!tabContent) {\n    throw new Error(`Tab content for target ${target} not found`);\n  }\n\n  while (tabContent.firstChild) {\n    tabContent.removeChild(tabContent.firstChild);\n  }\n\n  tabContent.innerHTML = response.toString();\n\n  // Special cases\n  const dateLastChecked = tabContent.querySelector('input[name=\"edit[upgrade.dateLastChecked]\"]') as HTMLInputElement;\n  if (dateLastChecked) {\n    const date: string = new Date(dateLastChecked.value).toLocaleString();\n    if (date !== 'Invalid Date') {\n      dateLastChecked.value = date;\n    } else {\n      dateLastChecked.value = 'n/a';\n    }\n  }\n};\n","/**\n * phpMyFAQ session notification\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-06-16\n */\nimport { Modal } from 'bootstrap';\n\nexport const handleSessionTimeout = (): void => {\n  const showWarning = top?.document.getElementById('pmf-show-session-warning');\n  const config: MutationObserverInit = { attributes: true };\n  if (showWarning) {\n    const observer = new MutationObserver(onAttributeChange);\n    observer.observe(showWarning, config);\n    reloadCurrentPage();\n  }\n};\n\nconst onAttributeChange = (mutationsList: MutationRecord[]): void => {\n  for (const mutation of mutationsList) {\n    if (mutation.type === 'attributes' && mutation.attributeName === 'data-value') {\n      const value = (mutation.target as HTMLElement).getAttribute('data-value');\n      toggleSessionWarningModal(value);\n    }\n  }\n};\n\nconst toggleSessionWarningModal = (toggle: string | null): void => {\n  const sessionWarningModal = new Modal(top?.document.getElementById('sessionWarningModal') as HTMLElement);\n  if (toggle === 'show') {\n    sessionWarningModal.show();\n  } else {\n    sessionWarningModal.hide();\n  }\n};\n\nconst reloadCurrentPage = (): void => {\n  const reloadButton = document.getElementById('pmf-button-reload-page') as HTMLButtonElement;\n  if (reloadButton) {\n    reloadButton.addEventListener('click', (): void => {\n      location.reload();\n    });\n  }\n};\n","/**\n * Utility functions\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-01-04\n */\n\nimport { Tooltip } from 'bootstrap';\n\nexport const selectAll = (selectId: string): void => {\n  const selectElement = document.querySelector(`#${selectId}`) as HTMLSelectElement;\n  if (selectElement) {\n    for (const option of selectElement.options) {\n      option.selected = true;\n    }\n  }\n};\n\nexport const unSelectAll = (selectId: string): void => {\n  const selectElement = document.querySelector(`#${selectId}`) as HTMLSelectElement;\n  if (selectElement) {\n    for (const option of selectElement.options) {\n      option.selected = false;\n    }\n  }\n};\n\nexport const formatBytes = (bytes: number, decimals: number = 2): string => {\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n\nexport const initializeTooltips = (): void => {\n  const tooltipTriggerList = Array.from(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\n  tooltipTriggerList.forEach((tooltipTriggerEl) => {\n    new Tooltip(tooltipTriggerEl);\n  });\n};\n\nexport const normalizeLanguageCode = (code: string): string => {\n  if (!code) {\n    return code;\n  }\n  return code.replace(/_/g, '-').replace(/-([a-z]{2})$/i, (_, region) => '-' + region.toUpperCase());\n};\n","/**\n * Admin Elasticsearch configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-03-20\n */\n\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { fetchElasticsearchAction, fetchElasticsearchStatistics } from '../api';\nimport { ElasticsearchResponse, Response } from '../interfaces';\nimport { formatBytes } from '../utils';\n\nexport const handleElasticsearch = async (): Promise<void> => {\n  const buttons: NodeListOf<HTMLButtonElement> = document.querySelectorAll('button.pmf-elasticsearch');\n\n  if (buttons) {\n    buttons.forEach((element: HTMLButtonElement): void => {\n      element.addEventListener('click', async (event: Event): Promise<void> => {\n        event.preventDefault();\n\n        const action = (event.target as HTMLButtonElement).getAttribute('data-action') as string;\n\n        try {\n          const response = (await fetchElasticsearchAction(action)) as unknown as Response;\n\n          if (typeof response.success !== 'undefined') {\n            pushNotification(response.success);\n            setInterval(elasticsearchStats, 5000);\n          } else {\n            pushErrorNotification(response.error as string);\n          }\n        } catch (error) {\n          pushErrorNotification(error as string);\n        }\n      });\n\n      const elasticsearchStats = async (): Promise<void> => {\n        const div = document.getElementById('pmf-elasticsearch-stats') as HTMLElement;\n        if (div) {\n          div.innerHTML = '';\n\n          try {\n            const response = (await fetchElasticsearchStatistics()) as unknown as ElasticsearchResponse;\n\n            if (response.index) {\n              const indexName = response.index as string;\n              const stats = response.stats;\n              const count: number = stats.indices[indexName].total.docs.count ?? 0;\n              const sizeInBytes: number = stats.indices[indexName].total.store.size_in_bytes ?? 0;\n              let html: string = '<dl class=\"row\">';\n              html += `<dt class=\"col-sm-3\">Documents</dt><dd class=\"col-sm-9\">${count ?? 0}</dd>`;\n              html += `<dt class=\"col-sm-3\">Storage size</dt><dd class=\"col-sm-9\">${formatBytes(sizeInBytes ?? 0)}</dd>`;\n              html += '</dl>';\n              div.innerHTML = html;\n            }\n          } catch (error) {\n            pushErrorNotification(error as string);\n          }\n        }\n      };\n\n      elasticsearchStats();\n    });\n  }\n};\n","/**\n * Fetch data for Elasticsearch configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-01-26\n */\n\nimport { ElasticsearchResponse, Response } from '../interfaces';\n\nexport const fetchElasticsearchAction = async (action: string): Promise<Response> => {\n  try {\n    const response = await fetch(`./api/elasticsearch/${action}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchElasticsearchStatistics = async (): Promise<ElasticsearchResponse> => {\n  try {\n    const response = await fetch('./api/elasticsearch/statistics', {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Handle Form edit\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @author    Jan Harms <modelrailroader@gmx-topmail.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2014-03-09\n */\n\nimport {\n  fetchActivateInput,\n  fetchAddTranslation,\n  fetchDeleteTranslation,\n  fetchEditTranslation,\n  fetchSetInputAsRequired,\n} from '../api';\nimport { pushNotification } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\nexport const handleFormEdit = (): void => {\n  const forms = document.getElementById('forms') as HTMLElement;\n  if (forms) {\n    // Handle activate checkboxes\n    document.querySelectorAll<HTMLInputElement>('#active').forEach((element: HTMLInputElement): void => {\n      element.addEventListener('change', async (): Promise<void> => {\n        const checked: boolean = element.checked;\n        const csrf = element.getAttribute('data-pmf-csrf-token') as string;\n        const inputId = element.getAttribute('data-pmf-inputid') as string;\n        const formId = element.getAttribute('data-pmf-formid') as string;\n        const response = (await fetchActivateInput(csrf, formId, inputId, checked)) as unknown as Response;\n        if (typeof response.success === 'string') {\n          pushNotification(response.success);\n        } else {\n          console.error(response.error);\n        }\n      });\n    });\n\n    // Handle required checkboxes\n    document.querySelectorAll<HTMLInputElement>('#required').forEach((element: HTMLInputElement): void => {\n      element.addEventListener('change', async (): Promise<void> => {\n        const checked: boolean = element.checked;\n        const csrf = element.getAttribute('data-pmf-csrf-token') as string;\n        const inputId = element.getAttribute('data-pmf-inputid') as string;\n        const formId = element.getAttribute('data-pmf-formid') as string;\n        const response = (await fetchSetInputAsRequired(csrf, formId, inputId, checked)) as unknown as Response;\n        if (typeof response.success === 'string') {\n          pushNotification(response.success);\n        } else {\n          console.error(response.error);\n        }\n      });\n    });\n\n    // Handle tabs\n    const tabAskQuestion = document.getElementById('ask-question-tab') as HTMLElement;\n    const tabAddContent = document.getElementById('add-content-tab') as HTMLElement;\n    const tabContentAskQuestion = document.getElementById('ask-question') as HTMLElement;\n    const tabContentAddContent = document.getElementById('add-content') as HTMLElement;\n\n    if (tabAskQuestion) {\n      tabAskQuestion.addEventListener('click', (event: Event): void => {\n        event.preventDefault();\n        tabAskQuestion.classList.add('active');\n        tabAddContent.classList.remove('active');\n        tabContentAskQuestion.classList.add('active');\n        tabContentAddContent.classList.remove('active');\n      });\n    }\n\n    if (tabAddContent) {\n      tabAddContent.addEventListener('click', (event: Event): void => {\n        event.preventDefault();\n        tabAddContent.classList.add('active');\n        tabAskQuestion.classList.remove('active');\n        tabContentAddContent.classList.add('active');\n        tabContentAskQuestion.classList.remove('active');\n      });\n    }\n  }\n};\n\nexport const handleFormTranslations = (): void => {\n  const table = document.getElementById('formTranslations') as HTMLElement;\n  if (table) {\n    // Edit translation\n    const editButtons: NodeListOf<HTMLElement> = document.querySelectorAll<HTMLElement>('#editTranslation');\n    editButtons.forEach((element: HTMLElement): void => {\n      element.addEventListener('click', async (): Promise<void> => {\n        const lang = element.getAttribute('data-pmf-lang') as string;\n        const input = document.getElementById('labelInput_' + lang) as HTMLInputElement;\n        if (input.disabled) {\n          input.disabled = false;\n          element.classList.remove('bg-primary');\n          element.classList.add('bg-success');\n          if (element.children[0]) {\n            element.children[0].classList.remove('bi-check');\n            element.children[0].classList.add('bi-pencil');\n          }\n        } else {\n          input.disabled = true;\n          element.classList.add('bg-primary');\n          element.classList.remove('bg-success');\n          if (element.children[0]) {\n            element.children[0].classList.add('bi-pencil');\n            element.children[0].classList.remove('bi-check');\n          }\n          const csrf = element.getAttribute('data-pmf-csrf') as string;\n          const formId = element.getAttribute('data-pmf-formId') as string;\n          const inputId = element.getAttribute('data-pmf-inputId') as string;\n          const response = (await fetchEditTranslation(\n            csrf,\n            formId,\n            inputId,\n            lang,\n            input.value\n          )) as unknown as Response;\n          if (typeof response.success === 'string') {\n            pushNotification(response.success);\n          } else {\n            console.error(response.error);\n          }\n        }\n      });\n    });\n    // Delete translation\n    const deleteButtons: NodeListOf<HTMLElement> = document.querySelectorAll<HTMLElement>('#deleteTranslation');\n    deleteButtons.forEach((element: HTMLElement) => {\n      element.addEventListener('click', async (): Promise<void> => {\n        const csrf = element.getAttribute('data-pmf-csrf') as string;\n        const inputId = element.getAttribute('data-pmf-inputId') as string;\n        const formId = element.getAttribute('data-pmf-formId') as string;\n        const lang = element.getAttribute('data-pmf-lang') as string;\n        const response = (await fetchDeleteTranslation(csrf, formId, inputId, lang)) as unknown as Response;\n        if (typeof response.success === 'string') {\n          pushNotification(response.success);\n          document.getElementById('item_' + lang)?.remove();\n          const option = document.createElement('option') as HTMLOptionElement;\n          option.innerText = element.getAttribute('data-pmf-langname')!;\n          document.getElementById('languageSelect')?.appendChild(option);\n        } else {\n          console.error(response.error);\n        }\n      });\n    });\n    // Add Translation\n    const addTranslationButton = document.getElementById('addTranslation') as HTMLElement;\n    const languageSelect = document.getElementById('languageSelect') as HTMLSelectElement;\n    const translationInput = document.getElementById('translationText') as HTMLInputElement;\n\n    if (addTranslationButton) {\n      addTranslationButton.addEventListener('click', async (event: Event): Promise<void> => {\n        event.preventDefault();\n        const csrf = addTranslationButton.getAttribute('data-pmf-csrf') as string;\n        const inputId = addTranslationButton.getAttribute('data-pmf-inputId') as string;\n        const formId = addTranslationButton.getAttribute('data-pmf-formId') as string;\n        const response = (await fetchAddTranslation(\n          csrf,\n          formId,\n          inputId,\n          languageSelect.value,\n          translationInput.value\n        )) as unknown as Response;\n        if (typeof response.success === 'string') {\n          pushNotification(response.success);\n          setTimeout((): void => {\n            window.location.reload();\n          }, 3000);\n        } else {\n          console.error(response.error);\n        }\n      });\n    }\n  }\n};\n","/**\n * API fetch requests for form editing\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @author    Jan Harms <modelrailroader@gmx-topmail.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2014-03-21\n */\n\nexport const fetchActivateInput = async (\n  csrf: string,\n  formId: string,\n  inputId: string,\n  checked: boolean\n): Promise<void> => {\n  try {\n    const response = await fetch('api/forms/activate', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        formid: formId,\n        inputid: inputId,\n        checked: checked,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchSetInputAsRequired = async (\n  csrf: string,\n  formId: string,\n  inputId: string,\n  checked: boolean\n): Promise<void> => {\n  try {\n    const response = await fetch('api/forms/required', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        formid: formId,\n        inputid: inputId,\n        checked: checked,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchEditTranslation = async (\n  csrf: string,\n  formId: string,\n  inputId: string,\n  label: string,\n  lang: string\n): Promise<void> => {\n  try {\n    const response = await fetch('api/forms/translation-edit', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        formId: formId,\n        inputId: inputId,\n        lang: lang,\n        label: label,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchDeleteTranslation = async (\n  csrf: string,\n  formId: string,\n  inputId: string,\n  lang: string\n): Promise<void> => {\n  try {\n    const response = await fetch('api/forms/translation-delete', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        formId: formId,\n        inputId: inputId,\n        lang: lang,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchAddTranslation = async (\n  csrf: string,\n  formId: string,\n  inputId: string,\n  lang: string,\n  translation: string\n): Promise<void> => {\n  try {\n    const response = await fetch('api/forms/translation-add', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        formId: formId,\n        inputId: inputId,\n        lang: lang,\n        translation: translation,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Multi Instance Handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-02-28\n */\n\nimport { Modal } from 'bootstrap';\nimport { addElement } from '../../../../assets/src/utils';\nimport { InstanceResponse, Response } from '../interfaces';\nimport { addInstance, deleteInstance } from '../api';\n\nexport const handleInstances = (): void => {\n  const addInstanceButton = document.querySelector('.pmf-instance-add') as HTMLElement;\n  const deleteInstanceButton = document.querySelectorAll('.pmf-instance-delete') as NodeListOf<HTMLElement>;\n  const container = document.getElementById('pmf-modal-add-instance') as HTMLElement;\n\n  if (addInstanceButton) {\n    const modal = new Modal(container);\n    addInstanceButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const csrf = (document.querySelector('#pmf-csrf-token') as HTMLInputElement).value as string;\n      const url = (document.querySelector('#url') as HTMLInputElement).value as string;\n      const instance = (document.querySelector('#instance') as HTMLInputElement).value as string;\n      const comment = (document.querySelector('#comment') as HTMLInputElement).value as string;\n      const email = (document.querySelector('#email') as HTMLInputElement).value as string;\n      const admin = (document.querySelector('#admin') as HTMLInputElement).value as string;\n      const password = (document.querySelector('#password') as HTMLInputElement).value as string;\n\n      try {\n        const response = (await addInstance(\n          csrf,\n          url,\n          instance,\n          comment,\n          email,\n          admin,\n          password\n        )) as unknown as InstanceResponse;\n\n        if (response.added) {\n          const table = document.querySelector('.table tbody') as HTMLElement;\n          const row: Element = addElement('tr', { id: `row-instance-${response.added}` }, [\n            addElement('td', { innerText: response.added }),\n            addElement('td', {}, [\n              addElement('a', {\n                href: response.url,\n                target: '_blank',\n                innerText: response.url,\n              }),\n            ]),\n            addElement('td', { innerText: instance }),\n            addElement('td', { innerText: comment }),\n            addElement('td', {}, [\n              addElement(\n                'a',\n                {\n                  href: `./instance/edit/${response.added}`,\n                  classList: 'btn btn-info',\n                },\n                [addElement('i', { classList: 'bi bi-pencil', ariaHidden: true })]\n              ),\n            ]),\n            addElement('td', {}, [\n              addElement(\n                'button',\n                {\n                  classList: 'btn btn-danger',\n                  'data-delete-instance-id': `${response.added}`,\n                  type: 'button',\n                },\n                [\n                  addElement('i', {\n                    ariaHidden: true,\n                    classList: 'bi bi-trash',\n                    'data-delete-instance-id': `${response.added}`,\n                  }),\n                ]\n              ),\n            ]),\n          ]);\n          table.appendChild(row);\n          modal.hide();\n        } else {\n          throw new Error('Network response was not ok');\n        }\n      } catch (error) {\n        const table = document.querySelector('.table') as Element;\n        table.insertAdjacentElement(\n          'afterend',\n          addElement('div', { classList: 'alert alert-danger', innerText: error })\n        );\n      }\n    });\n  }\n\n  if (deleteInstanceButton) {\n    deleteInstanceButton.forEach((element: HTMLElement): void => {\n      element.addEventListener('click', async (event: Event): Promise<void> => {\n        event.preventDefault();\n\n        const instanceId = (event.target as HTMLElement).getAttribute('data-delete-instance-id') as string;\n        const csrf = (event.target as HTMLElement).getAttribute('data-csrf-token') as string;\n\n        if (confirm('Are you sure?')) {\n          try {\n            const response = (await deleteInstance(csrf, instanceId)) as unknown as InstanceResponse;\n\n            if (response.deleted) {\n              const row = document.getElementById(`row-instance-${response.deleted}`) as HTMLElement;\n              row.addEventListener('click', (): string => (row.style.opacity = '0'));\n              row.addEventListener('transitionend', (): void => row.remove());\n            } else {\n              throw new Error('Network response was not ok');\n            }\n          } catch (error) {\n            const table = document.querySelector('.table') as HTMLElement;\n            const errorMessage = (await (error as any).cause.response.json()) as Response;\n            table.insertAdjacentElement(\n              'afterend',\n              addElement('div', { classList: 'alert alert-danger', innerText: errorMessage.error })\n            );\n          }\n        }\n      });\n    });\n  }\n};\n","/**\n * Fetch data for instance configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-01-26\n */\n\nimport { InstanceResponse } from '../interfaces';\n\nexport const addInstance = async (\n  csrf: string,\n  url: string,\n  instance: string,\n  comment: string,\n  email: string,\n  admin: string,\n  password: string\n): Promise<InstanceResponse> => {\n  try {\n    const response = await fetch(`./api/faq/search`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        url: url,\n        instance: instance,\n        comment: comment,\n        email: email,\n        admin: admin,\n        password: password,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteInstance = async (csrf: string, instanceId: string): Promise<InstanceResponse> => {\n  try {\n    const response = await fetch('./api/instance/delete', {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        instanceId: instanceId,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Admin OpenSearch configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-05-12\n */\n\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { fetchOpenSearchAction, fetchOpenSearchStatistics } from '../api';\nimport { ElasticsearchResponse, Response } from '../interfaces';\nimport { formatBytes } from '../utils';\n\nexport const handleOpenSearch = async (): Promise<void> => {\n  const buttons: NodeListOf<HTMLButtonElement> = document.querySelectorAll('button.pmf-opensearch');\n\n  if (buttons) {\n    buttons.forEach((element: HTMLButtonElement): void => {\n      element.addEventListener('click', async (event: Event): Promise<void> => {\n        event.preventDefault();\n\n        const action = (event.target as HTMLButtonElement).getAttribute('data-action') as string;\n\n        try {\n          const response = (await fetchOpenSearchAction(action)) as unknown as Response;\n\n          if (typeof response.success !== 'undefined') {\n            pushNotification(response.success);\n            setInterval(openSearchStats, 5000);\n          } else {\n            pushErrorNotification(response.error as string);\n          }\n        } catch (error) {\n          pushErrorNotification(error as string);\n        }\n      });\n\n      const openSearchStats = async (): Promise<void> => {\n        const div = document.getElementById('pmf-opensearch-stats') as HTMLElement;\n        if (div) {\n          div.innerHTML = '';\n\n          try {\n            const response = (await fetchOpenSearchStatistics()) as unknown as ElasticsearchResponse;\n\n            if (response.index) {\n              const indexName = response.index as string;\n              const stats = response.stats;\n              const count: number = stats.indices[indexName].total.docs.count ?? 0;\n              const sizeInBytes: number = stats.indices[indexName].total.store.size_in_bytes ?? 0;\n              let html: string = '<dl class=\"row\">';\n              html += `<dt class=\"col-sm-3\">Documents</dt><dd class=\"col-sm-9\">${count ?? 0}</dd>`;\n              html += `<dt class=\"col-sm-3\">Storage size</dt><dd class=\"col-sm-9\">${formatBytes(sizeInBytes ?? 0)}</dd>`;\n              html += '</dl>';\n              div.innerHTML = html;\n            }\n          } catch (error) {\n            pushErrorNotification(error as string);\n          }\n        }\n      };\n\n      openSearchStats();\n    });\n  }\n};\n","/**\n * Fetch data for OpenSearch configuration\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-05-12\n */\n\nimport { ElasticsearchResponse, Response } from '../interfaces';\n\nexport const fetchOpenSearchAction = async (action: string): Promise<Response> => {\n  try {\n    const response = await fetch(`./api/opensearch/${action}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchOpenSearchStatistics = async (): Promise<ElasticsearchResponse> => {\n  try {\n    const response = await fetch('./api/opensearch/statistics', {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Stop word Handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-02-28\n */\n\nimport { addElement } from '../../../../assets/src/utils';\nimport { StopWord } from '../interfaces';\nimport { fetchByLanguage, postStopWord, removeStopWord } from '../api/stop-words';\n\nconst maxCols = 4;\n\nexport const handleStopWords = (): void => {\n  const stopWordsLanguageSelector = document.getElementById('pmf-stop-words-language-selector') as HTMLSelectElement;\n  const addStopWordInput = document.getElementById('pmf-stop-words-add-input') as HTMLButtonElement;\n\n  if (stopWordsLanguageSelector) {\n    stopWordsLanguageSelector.addEventListener('change', async (event) => {\n      const selectedLanguage = (event.target as HTMLSelectElement).value as string;\n      if ('none' !== selectedLanguage) {\n        startLoadingIndicator();\n        await fetchStopWordsByLanguage(selectedLanguage);\n        addStopWordInput.removeAttribute('disabled');\n        stopLoadingIndicator();\n      }\n    });\n    addStopWordInput.addEventListener('click', () => {\n      const language = stopWordsLanguageSelector.value as string;\n      setContentAndHandler([{ id: -1, lang: language, stopword: '' }]);\n    });\n  }\n};\n\nconst fetchStopWordsByLanguage = async (language: string): Promise<void> => {\n  try {\n    const stopWordsList = (await fetchByLanguage(language)) as unknown as StopWord[];\n    setContentAndHandler(stopWordsList);\n  } catch (error) {\n    const errorMessage = await (error as any).cause.response.json();\n    console.error(errorMessage);\n  }\n};\n\nconst setContentAndHandler = (stopWordsList: StopWord[]): void => {\n  const stopWordsHtml = buildStopWordsHTML(stopWordsList) as string;\n  const stopWordsContainer = document.getElementById('pmf-stopwords-content') as HTMLElement;\n  stopWordsContainer.innerHTML = stopWordsHtml;\n\n  const stopWordInputs = document.querySelectorAll('.pmf-stop-word-input') as NodeListOf<HTMLInputElement>;\n  if (stopWordInputs) {\n    stopWordInputs.forEach((element: HTMLInputElement) => {\n      element.addEventListener('keydown', async (event: KeyboardEvent): Promise<void> => {\n        await saveStopWordHandleOnEnter(element.id, event);\n      });\n      element.addEventListener('blur', async (): Promise<void> => {\n        await saveStopWord(element.id);\n      });\n      element.addEventListener('focus', (): void => {\n        saveOldValue(element.id);\n      });\n    });\n  }\n};\n\nconst startLoadingIndicator = (): void => {\n  const loadingIndicator = document.getElementById('pmf-stop-words-loading-indicator') as HTMLElement;\n  const startLoading = addElement('i', { classList: 'bi bi-cog bi-spin bi-fw' }, [\n    addElement('span', { classList: 'sr-only', innerText: 'Loading...' }),\n  ]);\n  loadingIndicator.appendChild(startLoading);\n};\n\nconst stopLoadingIndicator = (): void => {\n  const loadingIndicator = document.getElementById('pmf-stop-words-loading-indicator') as HTMLElement;\n  loadingIndicator.innerHTML = '';\n};\n\nconst buildStopWordsHTML = (stopWordData: StopWord[]): string => {\n  if (typeof stopWordData !== 'object') {\n    return '';\n  }\n  const table: HTMLElement = addElement('table', { classList: 'table table-hover align-middle' });\n  let tr: HTMLElement | null = null;\n  for (let i: number = 0; i < stopWordData.length; i++) {\n    if (i % maxCols === 0) {\n      tr = addElement('tr', { id: `stopwords_group_${i}` });\n      table.appendChild(tr);\n    }\n\n    const elementId: string = buildStopWordInputElementId(stopWordData[i].id, stopWordData[i].lang);\n\n    const td: HTMLElement = addElement('td', { classList: 'align-middle' });\n    td.appendChild(buildStopWordInputElement(elementId, stopWordData[i].stopword));\n    if (tr) {\n      tr.appendChild(td);\n    }\n  }\n\n  return table.outerHTML;\n};\n\nconst buildStopWordInputElement = (elementId: string, stopWord: string): HTMLElement => {\n  const input: HTMLElement = addElement('input', {\n    id: elementId || buildStopWordInputElementId(),\n    classList: 'form-control form-control-sm pmf-stop-word-input',\n    type: 'text',\n  });\n  input.setAttribute('value', stopWord || '');\n  return input;\n};\n\nconst buildStopWordInputElementId = (id?: number, language?: string): string => {\n  id = id || -1;\n  language = language || (document.getElementById('pmf-stop-words-language-selector') as HTMLSelectElement).value;\n\n  return `stopword_${id}_${language}`;\n};\n\nconst parseStopWordInputElemId = (elementId: string): { id: number; lang: string } => {\n  const info = elementId.split('_');\n  return { id: parseInt(info[1]), lang: info[2] };\n};\n\nconst saveStopWordHandleOnEnter = async (elementId: string, event: KeyboardEvent): Promise<void> => {\n  const element = document.getElementById(elementId) as HTMLInputElement;\n  const key: number = event.charCode || event.keyCode || 0;\n  if (key === 13) {\n    if (element.value === '') {\n      await deleteStopWord(elementId);\n    } else {\n      element.blur();\n    }\n  }\n};\n\nconst saveStopWord = async (elementId: string): Promise<void> => {\n  const info = parseStopWordInputElemId(elementId);\n  const element = document.getElementById(elementId) as HTMLInputElement;\n  const csrfToken: string = (document.getElementById('pmf-csrf-token') as HTMLInputElement).value;\n\n  if (element.getAttribute('data-old-value') !== element.value) {\n    try {\n      await postStopWord(csrfToken, element.value, info.id, info.lang);\n      element.style.borderColor = '#198754';\n      element.style.backgroundImage =\n        \"url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\\\")\";\n      element.style.backgroundRepeat = 'no-repeat';\n      element.style.backgroundPosition = 'right calc(0.375em + 0.1875rem) center';\n      element.style.backgroundSize = 'calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)';\n    } catch (error) {\n      const errorMessage = await (error as any).cause.response.json();\n      const table = document.querySelector('.table') as HTMLElement;\n      table.insertAdjacentElement(\n        'beforebegin',\n        addElement('div', { classList: 'alert alert-danger', innerText: errorMessage })\n      );\n    }\n  } else {\n    if (info.id < 0 && element.value === '') {\n      element.remove();\n    }\n  }\n};\n\nconst saveOldValue = (elementId: string): void => {\n  const element = document.getElementById(elementId) as HTMLInputElement;\n  element.setAttribute('data-old-value', element.value);\n};\n\nconst deleteStopWord = async (elementId: string): Promise<void> => {\n  const info = parseStopWordInputElemId(elementId);\n  const element = document.getElementById(elementId) as HTMLInputElement;\n  const csrfToken: string = (document.getElementById('pmf-csrf-token') as HTMLInputElement).value;\n\n  try {\n    await removeStopWord(csrfToken, info.id, info.lang);\n    element.addEventListener('click', () => (element.style.opacity = '0'));\n    element.addEventListener('transitionend', () => element.remove());\n  } catch (error) {\n    const errorMessage = (await (error as any).cause.response.json()) as string;\n    const table = document.querySelector('.table') as HTMLElement;\n    table.insertAdjacentElement(\n      'beforebegin',\n      addElement('div', { classList: 'alert alert-danger', innerText: errorMessage })\n    );\n  }\n};\n","/**\n * Fetch data for stop words\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-02-08\n */\n\nexport const fetchByLanguage = async (language: string): Promise<void> => {\n  try {\n    const response = await fetch(`./api/stopwords?language=${language}`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const postStopWord = async (\n  csrf: string,\n  stopWord: string,\n  stopWordId: number,\n  stopWordLanguage: string\n): Promise<void> => {\n  try {\n    const response = await fetch('./api/stopword/save', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        stopWord: stopWord,\n        stopWordId: stopWordId,\n        stopWordsLang: stopWordLanguage,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const removeStopWord = async (csrf: string, stopWordId: number, stopWordLanguage: string): Promise<void> => {\n  try {\n    const response = await fetch('./api/stopword/delete', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrf,\n        stopWordId: stopWordId,\n        stopWordsLang: stopWordLanguage,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Upgrade related code.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @author    Jan Harms <model_railroader@gmx-topmail.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-07-11\n */\n\nimport { addElement, versionCompare } from '../../../../assets/src/utils';\nimport {\n  activateMaintenanceMode,\n  checkForUpdates,\n  downloadPackage,\n  extractPackage,\n  fetchHealthCheck,\n  startDatabaseUpdate,\n  startInstallation,\n  startTemporaryBackup,\n} from '../api';\n\ninterface ResponseData {\n  success?: string;\n  warning?: string;\n  error?: string;\n  dateLastChecked?: string;\n  version?: string;\n  message?: string;\n}\n\ninterface ProgressData {\n  progress?: string;\n}\n\n/**\n * Handles streaming progress updates for a progress bar\n * @param response - The fetch Response object with a readable stream\n * @param progressBarId - The ID of the progress bar element\n * @returns Promise that resolves when the stream is complete\n */\nexport const handleStreamingProgress = async (response: Response, progressBarId: string): Promise<void> => {\n  const progressBar = document.getElementById(progressBarId);\n\n  if (!progressBar) {\n    console.error(`Progress bar element with id \"${progressBarId}\" not found`);\n    return;\n  }\n\n  if (!response.body) {\n    console.error('Response body is null, cannot stream progress');\n    return;\n  }\n\n  const reader: ReadableStreamDefaultReader<Uint8Array> = response.body.getReader();\n  const bar = progressBar; // Create a non-null reference for closure\n\n  async function pump(): Promise<void> {\n    const { done, value } = await reader.read();\n\n    if (done) {\n      bar.style.width = '100%';\n      bar.innerText = '100%';\n      bar.classList.remove('progress-bar-animated', 'bg-primary');\n      bar.classList.add('bg-success');\n      return;\n    }\n\n    const decodedValue: string = new TextDecoder().decode(value);\n    try {\n      const data: ProgressData = JSON.parse(decodedValue);\n      if (data.progress) {\n        bar.style.width = data.progress;\n        bar.innerText = data.progress;\n      }\n    } catch (e) {\n      // Ignore JSON parse errors for incomplete chunks\n      console.debug('JSON parse error (likely incomplete chunk):', e);\n    }\n\n    return pump();\n  }\n\n  await pump();\n};\n\nexport const handleCheckForUpdates = (): void => {\n  const checkHealthButton = document.getElementById('pmf-button-check-health') as HTMLButtonElement;\n  const checkUpdateButton = document.getElementById('pmf-button-check-updates') as HTMLButtonElement;\n  const downloadButton = document.getElementById('pmf-button-download-now') as HTMLButtonElement;\n  const extractButton = document.getElementById('pmf-button-extract-package') as HTMLButtonElement;\n  const installButton = document.getElementById('pmf-button-install-package') as HTMLButtonElement;\n  const buttonActivate = document.getElementById('pmf-button-activate-maintenance-mode') as HTMLButtonElement;\n\n  // Health Check\n  if (checkHealthButton) {\n    checkHealthButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      try {\n        const response = (await fetchHealthCheck()) as ResponseData;\n        const result = document.getElementById('result-check-health') as HTMLElement;\n        const card = document.getElementById('pmf-update-step-health-check') as HTMLElement;\n\n        if (response.success) {\n          card.classList.add('text-bg-success');\n          result.replaceWith(addElement('p', { id: 'result-check-health', innerText: response.success }));\n        }\n        if (response.warning) {\n          card.classList.add('text-bg-warning');\n          result.replaceWith(addElement('p', { id: 'result-check-health', innerText: response.warning }));\n          buttonActivate.classList.remove('d-none');\n        }\n        if (response.error) {\n          card.classList.add('text-bg-danger');\n          result.replaceWith(addElement('p', { id: 'result-check-health', innerText: response.error }));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  // Activate Maintenance Mode\n  if (buttonActivate) {\n    buttonActivate.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      try {\n        const csrfToken = buttonActivate.getAttribute('data-pmf-csrf') as string;\n        const response = (await activateMaintenanceMode(csrfToken)) as ResponseData;\n        const result = document.getElementById('result-check-health') as HTMLElement;\n        const card = document.getElementById('pmf-update-step-health-check') as HTMLElement;\n\n        if (response.success) {\n          card.classList.remove('text-bg-warning');\n          card.classList.add('text-bg-success');\n          result.replaceWith(addElement('p', { innerText: response.success }));\n          buttonActivate.classList.add('d-none');\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  // Check Update\n  if (checkUpdateButton) {\n    checkUpdateButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const spinner = document.getElementById('spinner-check-versions') as HTMLElement;\n      spinner.classList.remove('d-none');\n      try {\n        const response = (await checkForUpdates()) as ResponseData;\n        const dateLastChecked = document.getElementById('dateLastChecked') as HTMLElement;\n        const versionCurrent = document.getElementById('versionCurrent') as HTMLElement;\n        const versionLastChecked = document.getElementById('versionLastChecked') as HTMLElement;\n        const card = document.getElementById('pmf-update-step-check-versions') as HTMLElement;\n\n        if (dateLastChecked && response.dateLastChecked) {\n          const date = new Date(response.dateLastChecked);\n          dateLastChecked.innerText = `${date.toLocaleString()}`;\n        }\n\n        if (versionCurrent && versionLastChecked && response.version) {\n          const installedVersion = versionCurrent.innerText.trim();\n          const availableVersion = response.version.trim();\n\n          versionLastChecked.innerText = availableVersion;\n\n          const result = document.getElementById('result-check-versions') as HTMLElement | null;\n          if (result) {\n            card.classList.remove('text-bg-success', 'text-bg-warning', 'text-bg-danger');\n\n            const isNewer = versionCompare(availableVersion, installedVersion, '>=');\n\n            if (isNewer) {\n              card.classList.add('text-bg-success');\n            } else {\n              card.classList.add('text-bg-danger');\n              downloadButton.disabled = true;\n            }\n\n            result.replaceWith(addElement('p', { innerText: response.message! }));\n            spinner.classList.add('d-none');\n            checkUpdateButton.disabled = true;\n          }\n        } else {\n          const result = document.getElementById('result-check-versions') as HTMLElement | null;\n          if (result && response.message) {\n            card.classList.add('text-bg-danger');\n            result.replaceWith(addElement('p', { innerText: response.message }));\n          }\n          spinner.classList.add('d-none');\n        }\n      } catch (error) {\n        console.error(error);\n        spinner.classList.add('d-none');\n      }\n    });\n  }\n\n  // Download package\n  if (downloadButton) {\n    downloadButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n\n      let version: string;\n      const versionLastChecked = document.getElementById('versionLastChecked') as HTMLElement;\n      const releaseEnvironment = document.getElementById('releaseEnvironment') as HTMLElement;\n      const spinner = document.getElementById('spinner-download-new-version') as HTMLElement;\n      spinner.classList.remove('d-none');\n\n      if (releaseEnvironment!.innerText.toLowerCase() === 'nightly') {\n        version = 'nightly';\n      } else {\n        version = versionLastChecked!.innerText;\n      }\n\n      try {\n        const response = (await downloadPackage(version)) as ResponseData;\n        const result = document.getElementById('result-download-new-version') as HTMLElement;\n        const divExtractPackage = document.getElementById('pmf-update-step-extract-package') as HTMLElement;\n        const card = document.getElementById('pmf-update-step-download') as HTMLElement;\n\n        if (response.success) {\n          card.classList.add('text-bg-success');\n          divExtractPackage!.classList.remove('d-none');\n          result.replaceWith(addElement('p', { innerText: response.success! }));\n          spinner.classList.add('d-none');\n          downloadButton.disabled = true;\n        }\n\n        if (response.error) {\n          card.classList.add('text-bg-danger');\n          result.replaceWith(addElement('p', { innerText: response.error! }));\n          spinner.classList.add('d-none');\n        }\n      } catch (error) {\n        const errorMessage = error as ResponseData;\n        const result = document.getElementById('result-download-new-version') as HTMLElement;\n        result.replaceWith(addElement('p', { innerText: errorMessage.error }));\n        spinner.classList.add('d-none');\n      }\n    });\n  }\n\n  // Extract package\n  if (extractButton) {\n    extractButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const spinner = document.getElementById('spinner-extract-package') as HTMLElement;\n      spinner.classList.remove('d-none');\n\n      try {\n        const response = (await extractPackage()) as ResponseData;\n        const result = document.getElementById('result-extract-package') as HTMLElement;\n        const divInstallPackage = document.getElementById('pmf-update-step-install-package') as HTMLElement;\n        const card = document.getElementById('pmf-update-step-extract-package') as HTMLElement;\n\n        if (result) {\n          card.classList.add('text-bg-success');\n          divInstallPackage!.classList.remove('d-none');\n          result.replaceWith(addElement('p', { innerText: response.message! }));\n          spinner.classList.add('d-none');\n          extractButton.disabled = true;\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  // Install package\n  if (installButton) {\n    installButton.addEventListener('click', async (event) => {\n      event.preventDefault();\n      const spinner = document.getElementById('spinner-install-package') as HTMLElement;\n      spinner.classList.remove('d-none');\n      await createTemporaryBackup();\n      spinner.classList.add('d-none');\n    });\n  }\n};\n\nconst createTemporaryBackup = async (): Promise<void> => {\n  try {\n    const response = (await startTemporaryBackup()) as unknown as Response;\n    await handleStreamingProgress(response, 'result-backup-package');\n  } catch (error) {\n    console.error('Error during temporary backup:', error);\n    const progressBar = document.getElementById('result-backup-package') as HTMLElement | null;\n    if (progressBar) {\n      progressBar.classList.remove('progress-bar-animated', 'bg-primary');\n      progressBar.classList.add('bg-danger');\n    }\n    throw error;\n  }\n\n  await installPackage();\n};\n\nconst installPackage = async (): Promise<void> => {\n  try {\n    const response = (await startInstallation()) as unknown as Response;\n    await handleStreamingProgress(response, 'result-install-package');\n  } catch (error) {\n    console.error('Error during package installation:', error);\n    const progressBar = document.getElementById('result-install-package') as HTMLElement | null;\n    if (progressBar) {\n      progressBar.classList.remove('progress-bar-animated', 'bg-primary');\n      progressBar.classList.add('bg-danger');\n    }\n    throw error;\n  }\n\n  await updateDatabase();\n};\n\nconst updateDatabase = async (): Promise<void> => {\n  const card = document.getElementById('pmf-update-step-install-package') as HTMLElement | null;\n\n  try {\n    const response = (await startDatabaseUpdate()) as unknown as Response;\n    await handleStreamingProgress(response, 'result-update-database');\n\n    if (card) {\n      card.classList.add('text-bg-success');\n    }\n  } catch (error) {\n    console.error('Error during database update:', error);\n    const progressBar = document.getElementById('result-update-database') as HTMLElement | null;\n    if (progressBar) {\n      progressBar.classList.remove('progress-bar-animated', 'bg-primary');\n      progressBar.classList.add('bg-danger');\n    }\n    if (card) {\n      card.classList.add('text-bg-danger');\n    }\n    throw error;\n  }\n};\n","/**\n * Upgrade API functionality\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-05-30\n */\n\ninterface ResponseData {\n  success?: string;\n  warning?: string;\n  error?: string;\n  dateLastChecked?: string;\n  version?: string;\n  message?: string;\n}\n\nexport const fetchHealthCheck = async (): Promise<ResponseData> => {\n  try {\n    const response: Response = await fetch(`./api/health-check`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const activateMaintenanceMode = async (csrfToken: string): Promise<ResponseData> => {\n  try {\n    const response: Response = await fetch('./api/configuration/activate-maintenance-mode', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ csrf: csrfToken }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const checkForUpdates = async (): Promise<ResponseData> => {\n  try {\n    const response: Response = await fetch('./api/update-check', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const downloadPackage = async (version: string): Promise<ResponseData> => {\n  try {\n    const response: Response = await fetch(`./api/download-package/${version}`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const extractPackage = async (): Promise<ResponseData> => {\n  try {\n    const response: Response = await fetch('./api/extract-package', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const startTemporaryBackup = async (): Promise<Response> => {\n  try {\n    const response = await fetch('./api/create-temporary-backup', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return response;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const startInstallation = async (): Promise<Response> => {\n  try {\n    const response: Response = await fetch('./api/install-package', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return response;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const startDatabaseUpdate = async (): Promise<Response> => {\n  try {\n    const response: Response = await fetch('./api/update-database', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return response;\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * FAQ attachment upload stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-04-11\n */\nimport { addElement } from '../../../../assets/src/utils';\nimport { uploadAttachments } from '../api';\nimport { Attachment } from '../interfaces';\n\nexport const handleAttachmentUploads = (): void => {\n  const filesToUpload = document.getElementById('filesToUpload') as HTMLInputElement | null;\n  const fileUploadButton = document.getElementById('pmf-attachment-modal-upload') as HTMLButtonElement | null;\n\n  if (filesToUpload) {\n    filesToUpload.addEventListener('change', (): void => {\n      const files: FileList | null = filesToUpload.files;\n      const fileSize = document.getElementById('filesize') as HTMLElement;\n      const fileList = document.querySelector('.pmf-attachment-upload-files') as HTMLElement;\n\n      fileList.classList.remove('invisible');\n\n      let bytes: number = 0;\n      const numFiles: number = files?.length || 0;\n      const fileItems: HTMLElement[] = [];\n      for (let fileId: number = 0; fileId < numFiles; fileId++) {\n        bytes += files![fileId].size;\n        fileItems.push(addElement('li', { innerText: files![fileId].name }));\n      }\n\n      let output: string = bytes + ' bytes';\n      for (\n        let multiples: string[] = ['KiB', 'MiB', 'GiB', 'TiB'], multiple: number = 0, approx: number = bytes / 1024;\n        approx > 1;\n        approx /= 1024, multiple++\n      ) {\n        output = approx.toFixed(2) + ' ' + multiples[multiple] + ' (' + bytes + ' bytes)';\n      }\n\n      fileSize.innerHTML = output;\n      fileList.append(addElement('ul', { className: 'mt-2' }, fileItems));\n    });\n\n    fileUploadButton?.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n\n      const files: FileList | null = filesToUpload.files;\n      if (!files || files.length === 0) {\n        console.error('No files selected for upload.');\n        return;\n      }\n\n      const formData = new FormData();\n      for (let i: number = 0; i < files.length; i++) {\n        formData.append('filesToUpload[]', files[i]);\n      }\n      formData.append('record_id', (document.getElementById('attachment_record_id') as HTMLInputElement).value);\n      formData.append('record_lang', (document.getElementById('attachment_record_lang') as HTMLInputElement).value);\n\n      try {\n        const response = (await uploadAttachments(formData)) as unknown as Attachment[];\n        const modal = document.getElementById('attachmentModal') as HTMLElement;\n        const modalBackdrop = document.querySelector('.modal-backdrop.fade.show') as HTMLElement;\n        const attachmentList = document.querySelector('.adminAttachments') as HTMLElement;\n        const fileSize = document.getElementById('filesize') as HTMLElement;\n        const fileList: NodeListOf<Element> = document.querySelectorAll('.pmf-attachment-upload-files li');\n\n        response.forEach((attachment: Attachment): void => {\n          const csrfToken = attachmentList.getAttribute('data-pmf-csrf-token') as string;\n          attachmentList.insertAdjacentElement(\n            'beforeend',\n            addElement('li', {}, [\n              addElement('a', {\n                className: 'me-2',\n                href: `../index.php?action=attachment&id=${attachment.attachmentId}`,\n                innerText: attachment.fileName,\n              }),\n              addElement(\n                'button',\n                {\n                  type: 'button',\n                  className: 'btn btn-sm btn-danger pmf-delete-attachment-button',\n                  'data-pmfAttachmentId': attachment.attachmentId,\n                  'data-pmfCsrfToken': csrfToken,\n                },\n                [\n                  addElement('i', {\n                    className: 'bi bi-trash',\n                    'data-pmfAttachmentId': attachment.attachmentId,\n                    'data-pmfCsrfToken': csrfToken,\n                  }),\n                ]\n              ),\n            ])\n          );\n        });\n\n        fileSize.innerHTML = '';\n        fileList.forEach((li: Element): void => {\n          li.remove();\n        });\n\n        modal.style.display = 'none';\n        modal.classList.remove('show');\n        modalBackdrop.remove();\n      } catch (error) {\n        console.error('An error occurred:', error);\n      }\n    });\n  }\n};\n","/**\n * Attachment administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-03-22\n */\n\nimport { deleteAttachments, refreshAttachments } from '../api';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\nexport const handleDeleteAttachments = (): void => {\n  const deleteButtons = document.querySelectorAll<HTMLButtonElement>('.btn-delete-attachment');\n\n  if (deleteButtons.length > 0) {\n    deleteButtons.forEach((button) => {\n      const newButton = button.cloneNode(true) as HTMLButtonElement;\n      button.replaceWith(newButton);\n\n      newButton.addEventListener('click', async (event: MouseEvent) => {\n        event.preventDefault();\n\n        const attachmentId = newButton.getAttribute('data-attachment-id');\n        const csrf = newButton.getAttribute('data-csrf');\n\n        if (attachmentId && csrf) {\n          const response = await deleteAttachments(attachmentId, csrf);\n\n          if (response.success) {\n            pushNotification(response.success);\n            const row = document.getElementById(`attachment_${attachmentId}`) as HTMLElement;\n            row.style.opacity = '0';\n            row.addEventListener('transitionend', () => row.remove());\n          }\n          if (response.error) {\n            pushErrorNotification(response.error);\n          }\n        }\n      });\n    });\n  }\n};\n\nexport const handleRefreshAttachments = (): void => {\n  const refreshButtons = document.querySelectorAll<HTMLButtonElement>(\n    '.btn-refresh-attachment'\n  ) as NodeListOf<HTMLButtonElement>;\n\n  if (refreshButtons.length > 0) {\n    refreshButtons.forEach((button: HTMLButtonElement): void => {\n      const newButton = button.cloneNode(true) as HTMLButtonElement;\n      button.replaceWith(newButton);\n\n      newButton.addEventListener('click', async (event: MouseEvent): Promise<void> => {\n        event.preventDefault();\n\n        const attachmentId = newButton.getAttribute('data-attachment-id') as string;\n        const csrf = newButton.getAttribute('data-csrf') as string;\n\n        if (attachmentId && csrf) {\n          const response = (await refreshAttachments(attachmentId, csrf)) as unknown as Response;\n\n          if (response.success) {\n            pushNotification(response.success);\n            if (response.delete) {\n              const row = document.getElementById(`attachment_${attachmentId}`) as HTMLElement;\n              row.style.opacity = '0';\n              row.addEventListener('transitionend', () => row.remove());\n            }\n          }\n          if (response.error) {\n            pushErrorNotification(response.error);\n          }\n        }\n      });\n    });\n  }\n};\n","/**!\n * Sortable 1.15.6\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.6\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    // Disabled on Safari: #1571; Enabled on Safari IOS: #2244\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && (!Safari || IOS),\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      if (options.supportPointer) {\n        on(ownerDocument, 'pointerup', _this._onDrop);\n        // Native D&D triggers pointercancel\n        !this.nativeDraggable && on(ownerDocument, 'pointercancel', _this._onDrop);\n      } else {\n        on(ownerDocument, 'mouseup', _this._onDrop);\n        on(ownerDocument, 'touchend', _this._onDrop);\n        on(ownerDocument, 'touchcancel', _this._onDrop);\n      }\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        if (options.supportPointer) {\n          on(ownerDocument, 'pointerup', _this._disableDelayedDrag);\n          on(ownerDocument, 'pointercancel', _this._disableDelayedDrag);\n        } else {\n          on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        }\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'pointerup', this._disableDelayedDrag);\n    off(ownerDocument, 'pointercancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = getParentOrHost(parent));\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    window.getSelection().removeAllRanges();\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'pointercancel', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild,\n  expando: expando\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              (function () {\n                // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n                // (but previous selection existed)\n                var n, i;\n                if (currentIndex > lastIndex) {\n                  i = lastIndex;\n                  n = currentIndex;\n                } else {\n                  i = currentIndex;\n                  n = lastIndex + 1;\n                }\n                var filter = options.filter;\n                for (; i < n; i++) {\n                  if (~multiDragElements.indexOf(children[i])) continue;\n                  // Check if element is draggable\n                  if (!closest(children[i], options.draggable, parentEl, false)) continue;\n                  // Check if element is filtered\n                  var filtered = filter && (typeof filter === 'function' ? filter.call(sortable, evt, children[i], sortable) : filter.split(',').some(function (criteria) {\n                    return closest(children[i], criteria.trim(), parentEl, false);\n                  }));\n                  if (filtered) continue;\n                  toggleClass(children[i], options.selectedClass, true);\n                  multiDragElements.push(children[i]);\n                  dispatchEvent({\n                    sortable: sortable,\n                    rootEl: rootEl,\n                    name: 'select',\n                    targetEl: children[i],\n                    originalEvent: evt\n                  });\n                }\n              })();\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","/**\n * Category administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2014-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2014-06-02\n */\n\nimport Sortable, { SortableEvent } from 'sortablejs';\nimport { Modal } from 'bootstrap';\nimport { deleteCategory, setCategoryTree } from '../api';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\nconst nestedQuery = '.nested-sortable';\nconst identifier = 'pmfCatid';\n\ninterface SerializedTree {\n  id: string;\n  children: SerializedTree[];\n}\n\nexport const handleCategories = (): void => {\n  const root = document.getElementById('pmf-category-tree') as HTMLElement;\n  const nestedSortables: NodeListOf<HTMLElement> = document.querySelectorAll<HTMLElement>(nestedQuery);\n  for (let i: number = 0; i < nestedSortables.length; i++) {\n    new Sortable(nestedSortables[i], {\n      group: 'Categories',\n      animation: 150,\n      fallbackOnBody: true,\n      swapThreshold: 0.65,\n      dataIdAttr: identifier,\n      emptyInsertThreshold: 10,\n      onStart: (): void => {\n        // Add class to all empty drop zones when drag starts\n        const emptySortables = document.querySelectorAll<HTMLElement>(`${nestedQuery}:empty`);\n        emptySortables.forEach((sortable: HTMLElement): void => {\n          sortable.classList.add('sortable-drag-active');\n        });\n      },\n      onEnd: async (event: SortableEvent): Promise<void> => {\n        // Remove class from all drop zones when drag ends\n        const allSortables = document.querySelectorAll<HTMLElement>(nestedQuery);\n        allSortables.forEach((sortable: HTMLElement): void => {\n          sortable.classList.remove('sortable-drag-active');\n        });\n\n        const categoryId = event.item.getAttribute('data-pmf-catid') as string;\n        const csrf: string = (document.querySelector('input[name=pmf-csrf-token]') as HTMLInputElement).value;\n        const data: SerializedTree[] = serializedTree(root);\n        const response = (await setCategoryTree(data, categoryId, csrf)) as unknown as Response;\n        if (response.success) {\n          pushNotification(response.success);\n        } else {\n          pushErrorNotification(response.error as string);\n        }\n      },\n    });\n  }\n\n  const serializedTree = (sortable: HTMLElement): SerializedTree[] => {\n    return Array.from(sortable.children).map((child: Element): SerializedTree => {\n      const nested = child.querySelector(nestedQuery) as HTMLElement;\n      return {\n        id: (child as HTMLElement).dataset[identifier] as string,\n        children: nested ? serializedTree(nested) : [],\n      };\n    });\n  };\n};\n\nexport const handleCategoryDelete = async (): Promise<void> => {\n  const deleteButtons: NodeListOf<HTMLElement> = document.getElementsByName('pmf-category-delete-button');\n  const modalElement = document.getElementById('deleteConfirmModal') as HTMLElement;\n\n  if (!modalElement || !deleteButtons) {\n    return;\n  }\n\n  const deleteModal = new Modal(modalElement);\n  const confirmButton = document.getElementById('confirmDeleteButton') as HTMLButtonElement;\n\n  let currentCategoryId: string = '';\n  let currentLanguage: string = '';\n\n  deleteButtons.forEach((button: HTMLElement): void => {\n    button.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      const target = event.target as HTMLElement;\n      currentCategoryId = target.getAttribute('data-pmf-category-id') as string;\n      currentLanguage = target.getAttribute('data-pmf-language') as string;\n      deleteModal.show();\n    });\n  });\n\n  confirmButton.addEventListener('click', async (): Promise<void> => {\n    if (!currentCategoryId || !currentLanguage) {\n      return;\n    }\n\n    const csrfToken: string = (document.querySelector('input[name=pmf-csrf-token]') as HTMLInputElement).value;\n    const response = (await deleteCategory(currentCategoryId, currentLanguage, csrfToken)) as unknown as Response;\n    if (response.success) {\n      pushNotification(response.success);\n    }\n\n    document.getElementById(`pmf-category-${currentCategoryId}`)?.remove();\n    deleteModal.hide();\n\n    currentCategoryId = '';\n    currentLanguage = '';\n  });\n};\n\nexport const handleResetCategoryImage = (): void => {\n  const resetButton = document.getElementById('button-reset-category-image') as HTMLButtonElement;\n\n  if (resetButton) {\n    const categoryExistingImage = document.getElementById('pmf-category-existing-image') as HTMLInputElement;\n    const categoryImageInput = document.getElementById('pmf-category-image-upload') as HTMLInputElement;\n    const categoryImageLabel = document.getElementById('pmf-category-image-label') as HTMLLabelElement;\n    resetButton.addEventListener('click', (): void => {\n      categoryImageInput.value = '';\n      categoryExistingImage.value = '';\n      categoryImageLabel.innerHTML = '';\n    });\n  }\n};\n","/**\n * Comment handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-04-12\n */\n\nimport { addElement, serialize } from '../../../../assets/src/utils';\n\nexport const handleDeleteComments = (): void => {\n  const deleteFaqComments = document.getElementById('pmf-button-delete-faq-comments');\n  const deleteNewsComments = document.getElementById('pmf-button-delete-news-comments');\n\n  if (deleteFaqComments) {\n    deleteFaqComments.addEventListener('click', () => {\n      deleteComments('faq');\n    });\n  }\n\n  if (deleteNewsComments) {\n    deleteNewsComments.addEventListener('click', () => {\n      deleteComments('news');\n    });\n  }\n};\n\nconst deleteComments = (type: 'faq' | 'news'): void => {\n  const responseMessage = document.getElementById('returnMessage') as HTMLElement;\n  const form = document.getElementById(`pmf-comments-selected-${type}`) as HTMLFormElement;\n  const comments = new FormData(form);\n\n  fetch(`${window.location.pathname}api/content/comments`, {\n    method: 'DELETE',\n    headers: {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      type: type,\n      data: serialize(comments),\n    }),\n  })\n    .then(async (response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      throw new Error('Network response was not ok.');\n    })\n    .then((response) => {\n      if (response.success) {\n        const commentsToDelete = document.querySelectorAll('tr td input:checked');\n        commentsToDelete.forEach((toDelete) => {\n          toDelete.parentNode?.parentNode?.parentNode?.remove();\n        });\n      } else {\n        responseMessage.append(addElement('div', { className: 'alert alert-danger', innerText: response.error }));\n      }\n    })\n    .catch(async (error) => {\n      const errorMessage = await (error as any).cause.response.json();\n      responseMessage.append(addElement('div', { className: 'alert alert-danger', innerText: errorMessage }));\n    });\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { memorizeExec } from \"../../core/helpers/utils/utils.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport classSpanIcon from \"./class-span.svg.js\";\nConfig.prototype.controls.classSpan = {\n    command: 'applyClassName',\n    exec: memorizeExec,\n    list: [\n        'enabled',\n        'disabled',\n        'activated',\n        'text-left',\n        'text-center',\n        'text-right',\n        'warning',\n        'error'\n    ],\n    isChildActive: (editor, button) => {\n        const current = editor.s.current();\n        if (current) {\n            const currentBpx = Dom.closest(current, Dom.isElement, editor.editor) || editor.editor;\n            return Boolean(button.control.args &&\n                currentBpx.classList.contains(button.control.args[0].toString()));\n        }\n        return false;\n    },\n    isActive: (editor, btn) => {\n        const current = editor.s.current();\n        if (current) {\n            const currentBpx = Dom.closest(current, Dom.isElement, editor.editor) || editor.editor;\n            let present = false;\n            btn.control.list &&\n                Object.keys(btn.control.list).forEach((className) => {\n                    if (currentBpx.classList.contains(className)) {\n                        present = true;\n                    }\n                });\n            return Boolean(currentBpx &&\n                currentBpx !== editor.editor &&\n                btn.control.list !== undefined &&\n                present);\n        }\n        return false;\n    },\n    childTemplate: (e, key, value) => `<span class=\"${key}\">${e.i18n(value)}</span>`,\n    tooltip: 'Insert className'\n};\n/**\n * Applying some className to selected text.\n * @example\n * ```js\n * const editor = Jodit.make('#editor', {\n *\tcontrols: {\n *\t\tclassSpan: {\n *\t\t\tlist: {\n *\t\t\t\tclass1: 'Classe 1',\n *\t\t\t\tclass2: 'Classe 2',\n *\t\t\t\tclass3: 'Classe 3',\n *\t\t\t\tclass4: 'Classe 4',\n *\t\t\t\tclass5: 'Classe 5'\n *\t\t\t}\n *\t\t}\n *\t}\n * });\n * ```\n */\nexport class classSpan extends Plugin {\n    constructor() {\n        super(...arguments);\n        /** @override */\n        this.buttons = [\n            {\n                name: 'classSpan',\n                group: 'script'\n            }\n        ];\n    }\n    /** @override */\n    afterInit(jodit) {\n        jodit.registerCommand('applyClassName', (command, second, third) => {\n            jodit.s.commitStyle({\n                attributes: {\n                    ['class']: third\n                }\n            });\n            return false;\n        });\n    }\n    /** @override */\n    beforeDestruct() { }\n}\npluginSystem.add('classSpan', classSpan);\nIcon.set('class-span', classSpanIcon);\n","export default \"<svg viewBox=\\\"0 0 48 48\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path d=\\\"M36 4h-24c-2.21 0-4 1.79-4 4v32c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4v-32c0-2.21-1.79-4-4-4zm-24 4h10v16l-5-3-5 3v-16z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { isString } from \"../../../core/helpers/checker/is-string.js\";\nimport { trim } from \"../../../core/helpers/string/trim.js\";\n/**\n * @private\n */\nexport function getHash(tags) {\n    const attributesReg = /([^[]*)\\[([^\\]]+)]/;\n    const separator = /[\\s]*,[\\s]*/, attrReg = /^(.*)[\\s]*=[\\s]*(.*)$/;\n    const tagsHash = {};\n    if (isString(tags)) {\n        tags.split(separator).map((elm) => {\n            elm = trim(elm);\n            const attr = attributesReg.exec(elm), allowAttributes = {}, attributeMap = (attrName) => {\n                attrName = trim(attrName);\n                const val = attrReg.exec(attrName);\n                if (val) {\n                    allowAttributes[val[1]] = val[2];\n                }\n                else {\n                    allowAttributes[attrName] = true;\n                }\n            };\n            if (attr) {\n                const attr2 = attr[2].split(separator);\n                if (attr[1]) {\n                    attr2.forEach(attributeMap);\n                    tagsHash[attr[1].toUpperCase()] = allowAttributes;\n                }\n            }\n            else {\n                tagsHash[elm.toUpperCase()] = true;\n            }\n        });\n        return tagsHash;\n    }\n    if (tags) {\n        Object.keys(tags).forEach(tagName => {\n            tagsHash[tagName.toUpperCase()] = tags[tagName];\n        });\n        return tagsHash;\n    }\n    return false;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { INSEPARABLE_TAGS } from \"../../../../core/constants.js\";\nimport { Dom } from \"../../../../core/dom/dom.js\";\n/**\n * For collapsed selection move cursor outside or split inline block\n * @private\n */\nexport function removeFormatForCollapsedSelection(jodit, fake) {\n    const { s } = jodit;\n    let fakeNode = fake;\n    if (!fakeNode) {\n        fakeNode = jodit.createInside.fake();\n        const { range } = s;\n        Dom.safeInsertNode(range, fakeNode);\n        range.collapse();\n    }\n    const mainInline = Dom.furthest(fakeNode, isInlineBlock, jodit.editor);\n    if (mainInline) {\n        if (s.cursorOnTheLeft(mainInline)) {\n            Dom.before(mainInline, fakeNode);\n        }\n        else if (s.cursorOnTheRight(mainInline)) {\n            Dom.after(mainInline, fakeNode);\n        }\n        else {\n            const leftHand = s.splitSelection(mainInline);\n            leftHand && Dom.after(leftHand, fakeNode);\n        }\n    }\n    if (!fake) {\n        s.setCursorBefore(fakeNode);\n        Dom.safeRemove(fakeNode);\n    }\n}\n/**\n * Element has inline display mode\n * @private\n */\nexport function isInlineBlock(node) {\n    return Dom.isInlineBlock(node) && !Dom.isTag(node, INSEPARABLE_TAGS);\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport eraserIcon from \"./eraser.svg.js\";\nConfig.prototype.cleanHTML = {\n    timeout: 300,\n    removeEmptyElements: true,\n    fillEmptyParagraph: true,\n    replaceNBSP: true,\n    replaceOldTags: {\n        i: 'em',\n        b: 'strong'\n    },\n    allowTags: false,\n    denyTags: 'script',\n    useIframeSandbox: false,\n    removeOnError: true,\n    safeJavaScriptLink: true,\n    disableCleanFilter: null\n};\nConfig.prototype.controls.eraser = {\n    command: 'removeFormat',\n    tooltip: 'Clear Formatting'\n};\nIcon.set('eraser', eraserIcon);\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M832 1408l336-384h-768l-336 384h768zm1013-1077q15 34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38 0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38 0 69.5 20.5t47.5 54.5z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { INSEPARABLE_TAGS } from \"../../../../../core/constants.js\";\nimport { Dom } from \"../../../../../core/dom/dom.js\";\nconst TABLE_CONTAINER_TAGS = new Set([\n    'table',\n    'tbody',\n    'thead',\n    'tfoot',\n    'tr'\n]);\n/**\n * @private\n */\nexport function fillEmptyParagraph(jodit, nodeElm, hadEffect) {\n    if (jodit.o.cleanHTML.fillEmptyParagraph &&\n        Dom.isBlock(nodeElm) &&\n        Dom.isEmpty(nodeElm, INSEPARABLE_TAGS) &&\n        !Dom.isTag(nodeElm, TABLE_CONTAINER_TAGS)) {\n        const br = jodit.createInside.element('br');\n        nodeElm.appendChild(br);\n        return true;\n    }\n    return hadEffect;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../../../core/dom/dom.js\";\n/**\n * @private\n */\nexport function allowAttributes(jodit, nodeElm, hadEffect, allow) {\n    if (allow && Dom.isElement(nodeElm) && allow[nodeElm.nodeName] !== true) {\n        const attrs = nodeElm.attributes;\n        if (attrs && attrs.length) {\n            const removeAttrs = [];\n            for (let i = 0; i < attrs.length; i += 1) {\n                const attr = allow[nodeElm.nodeName][attrs[i].name];\n                if (!attr || (attr !== true && attr !== attrs[i].value)) {\n                    removeAttrs.push(attrs[i].name);\n                }\n            }\n            if (removeAttrs.length) {\n                hadEffect = true;\n            }\n            removeAttrs.forEach(attr => {\n                nodeElm.removeAttribute(attr);\n            });\n        }\n    }\n    return hadEffect;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../../../core/dom/dom.js\";\n/**\n * @private\n */\nexport function removeEmptyTextNode(jodit, node, hadEffect, arg, argi, currentNode) {\n    if (Dom.isText(node) && !node.nodeValue) {\n        if (node === currentNode && jodit.s.isCollapsed()) {\n            jodit.s.setCursorAfter(node);\n        }\n        Dom.safeRemove(node);\n        return true;\n    }\n    return hadEffect;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { INVISIBLE_SPACE_REG_EXP as INV_REG } from \"../../../../../core/constants.js\";\nimport { Dom } from \"../../../../../core/dom/dom.js\";\n/**\n * @private\n */\nexport function removeInvTextNodes(jodit, node, hadEffect, arg, argi, currentNode) {\n    if (currentNode === node || !Dom.isText(node) || node.nodeValue == null) {\n        return hadEffect;\n    }\n    if (!INV_REG().test(node.nodeValue)) {\n        return hadEffect;\n    }\n    const focusBox = Dom.furthest(currentNode, Dom.isBlock, jodit.editor);\n    if (!focusBox || Dom.isOrContains(focusBox, node)) {\n        return hadEffect;\n    }\n    node.nodeValue = node.nodeValue.replace(INV_REG(), '');\n    if (node === currentNode && jodit.s.isCollapsed()) {\n        jodit.s.setCursorAfter(node);\n    }\n    if (!node.nodeValue) {\n        Dom.safeRemove(node);\n    }\n    return true;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../../../core/dom/dom.js\";\n/**\n * @private\n */\nexport function replaceOldTags(jodit, nodeElm, hadEffect) {\n    const newNodeElm = replaceIfMatched(jodit, nodeElm, jodit.o.cleanHTML.replaceOldTags);\n    if (nodeElm !== newNodeElm) {\n        nodeElm = newNodeElm;\n        return true;\n    }\n    return hadEffect;\n}\n/**\n * Replaces an element with a newer one if specified in the configuration match\n * @private\n */\nfunction replaceIfMatched(jodit, oldParent, list) {\n    if (!list || !Dom.isHTMLElement(oldParent)) {\n        return oldParent;\n    }\n    const tagName = list[oldParent.nodeName.toLowerCase()] || list[oldParent.nodeName];\n    if (tagName) {\n        return Dom.replace(oldParent, tagName, jodit.createInside, true, false);\n    }\n    return oldParent;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../../../core/dom/dom.js\";\nimport { sanitizeHTMLElement } from \"../../../../../core/helpers/index.js\";\n/**\n * @private\n */\nexport function sanitizeAttributes(jodit, nodeElm, hadEffect) {\n    if (Dom.isElement(nodeElm) &&\n        sanitizeHTMLElement(nodeElm, {\n            safeJavaScriptLink: jodit.options.cleanHTML.safeJavaScriptLink,\n            removeOnError: jodit.options.cleanHTML.removeOnError\n        })) {\n        return true;\n    }\n    return hadEffect;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { IS_INLINE } from \"../../../../../core/constants.js\";\nimport { Dom } from \"../../../../../core/dom/dom.js\";\nimport { trimInv } from \"../../../../../core/helpers/string/trim.js\";\n/**\n * @private\n */\nexport function tryRemoveNode(jodit, nodeElm, hadEffect, allowTags, denyTags, currentSelectionNode) {\n    if (isRemovableNode(jodit, nodeElm, currentSelectionNode, allowTags, denyTags)) {\n        Dom.safeRemove(nodeElm);\n        return true;\n    }\n    return hadEffect;\n}\n/**\n * @private\n */\nfunction isRemovableNode(jodit, node, current, allow, deny) {\n    if (!Dom.isText(node)) {\n        if (allow && !allow[node.nodeName]) {\n            return true;\n        }\n        if (!allow && deny && deny[node.nodeName]) {\n            return true;\n        }\n    }\n    if (!jodit.o.cleanHTML.removeEmptyElements) {\n        return false;\n    }\n    return (Dom.isElement(node) &&\n        node.nodeName.match(IS_INLINE) != null &&\n        !Dom.isTemporary(node) &&\n        trimInv(node.innerHTML).length === 0 &&\n        (current == null || !Dom.isOrContains(node, current)));\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { IS_PROD } from \"../../../../core/constants.js\";\nimport * as filters from \"./filters/index.js\";\nconst keys = Object.keys(filters);\n/**\n * @private\n */\nexport function visitNodeWalker(jodit, nodeElm, allowTags, denyTags, currentSelectionNode) {\n    let hadEffect = false;\n    const dcf = jodit.o.cleanHTML.disableCleanFilter;\n    for (const key of keys) {\n        if (dcf && dcf.has(key)) {\n            continue;\n        }\n        const filter = filters[key];\n        const tmp = hadEffect;\n        hadEffect = filter(jodit, nodeElm, hadEffect, allowTags, denyTags, currentSelectionNode);\n        if (!IS_PROD && !tmp && hadEffect) {\n            console.warn(`CleanHTML: Effect \"${key}\"`);\n        }\n        if (!nodeElm.isConnected) {\n            return true;\n        }\n    }\n    return hadEffect;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { hook, watch } from \"../../core/decorators/index.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { LazyWalker } from \"../../core/dom/lazy-walker.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { safeHTML } from \"../../core/helpers/html/safe-html.js\";\nimport { Plugin } from \"../../core/plugin/plugin.js\";\nimport \"./config.js\";\nimport { getHash, removeFormatForCollapsedSelection, removeFormatForSelection, visitNodeWalker } from \"./helpers/index.js\";\n/**\n * Clean HTML after removeFormat and insertHorizontalRule command\n */\nexport class cleanHtml extends Plugin {\n    constructor() {\n        super(...arguments);\n        /** @override */\n        this.buttons = [\n            {\n                name: 'eraser',\n                group: 'font-style'\n            }\n        ];\n        this.currentSelectionNode = null;\n        this.walker = new LazyWalker(this.j.async, {\n            timeout: this.j.o.cleanHTML.timeout\n        });\n    }\n    /** @override */\n    afterInit(jodit) { }\n    get isEditMode() {\n        return !(this.j.isInDestruct ||\n            !this.j.isEditorMode() ||\n            this.j.getReadOnly());\n    }\n    /**\n     * Clean HTML code on every change\n     */\n    onChangeCleanHTML() {\n        if (!this.isEditMode) {\n            return;\n        }\n        const editor = this.j;\n        this.walker.setWork(editor.editor);\n        this.currentSelectionNode = editor.s.current();\n    }\n    startWalker() {\n        const { jodit } = this;\n        const allow = getHash(this.j.o.cleanHTML.allowTags);\n        const deny = getHash(this.j.o.cleanHTML.denyTags);\n        this.walker\n            .on('visit', (node) => visitNodeWalker(jodit, node, allow, deny, this.currentSelectionNode))\n            .on('end', (affected) => {\n            this.j.e.fire(affected\n                ? 'internalChange finishedCleanHTMLWorker'\n                : 'finishedCleanHTMLWorker');\n        });\n    }\n    beforeCommand(command) {\n        if (command.toLowerCase() === 'removeformat') {\n            if (this.j.s.isCollapsed()) {\n                removeFormatForCollapsedSelection(this.j);\n            }\n            else {\n                removeFormatForSelection(this.j);\n            }\n            return false;\n        }\n    }\n    /**\n     * Event handler when manually assigning a value to the HTML editor.\n     */\n    onBeforeSetNativeEditorValue(data) {\n        const [sandBox, iframe] = this.j.o.cleanHTML.useIframeSandbox\n            ? this.j.createInside.sandbox()\n            : [this.j.createInside.div()];\n        sandBox.innerHTML = data.value;\n        this.onSafeHTML(sandBox);\n        data.value = sandBox.innerHTML;\n        safeHTML(sandBox, { safeJavaScriptLink: true, removeOnError: true });\n        Dom.safeRemove(iframe);\n        return false;\n    }\n    onSafeHTML(sandBox) {\n        safeHTML(sandBox, this.j.o.cleanHTML);\n    }\n    /** @override */\n    beforeDestruct() {\n        this.walker.destruct();\n    }\n}\n__decorate([\n    watch([':change', ':afterSetMode', ':afterInit', ':mousedown', ':keydown'])\n], cleanHtml.prototype, \"onChangeCleanHTML\", null);\n__decorate([\n    hook('ready')\n], cleanHtml.prototype, \"startWalker\", null);\n__decorate([\n    watch(':beforeCommand')\n], cleanHtml.prototype, \"beforeCommand\", null);\n__decorate([\n    watch(':beforeSetNativeEditorValue')\n], cleanHtml.prototype, \"onBeforeSetNativeEditorValue\", null);\n__decorate([\n    watch(':safeHTML')\n], cleanHtml.prototype, \"onSafeHTML\", null);\npluginSystem.add('cleanHtml', cleanHtml);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../../core/dom/dom.js\";\nimport { attr } from \"../../../../core/helpers/utils/index.js\";\nimport { isInlineBlock, removeFormatForCollapsedSelection } from \"./remove-format-for-collapsed-selection.js\";\n/**\n * Remove formatting for all selected elements\n * @private\n */\nexport function removeFormatForSelection(jodit) {\n    const { s, editor, createInside } = jodit, { range } = s, left = range.cloneRange(), right = range.cloneRange(), fakeLeft = createInside.fake(), fakeRight = createInside.fake();\n    left.collapse(true);\n    right.collapse(false);\n    Dom.safeInsertNode(left, fakeLeft);\n    Dom.safeInsertNode(right, fakeRight);\n    range.setStartBefore(fakeLeft);\n    range.collapse(true);\n    s.selectRange(range);\n    removeFormatForCollapsedSelection(jodit, fakeLeft);\n    range.setEndAfter(fakeRight);\n    range.collapse(false);\n    s.selectRange(range);\n    removeFormatForCollapsedSelection(jodit, fakeRight);\n    const shouldUnwrap = [];\n    Dom.between(fakeLeft, fakeRight, node => {\n        if (isInlineBlock(node) && !Dom.isTag(node, 'a')) {\n            shouldUnwrap.push(node);\n        }\n        if (Dom.isElement(node) && attr(node, 'style')) {\n            attr(node, 'style', null);\n        }\n    });\n    shouldUnwrap.forEach(node => Dom.unwrap(node));\n    const clearParent = (node, left) => {\n        if (!Dom.findNotEmptySibling(node, left)) {\n            const pn = node.parentNode;\n            if (pn && pn !== editor && attr(pn, 'style')) {\n                attr(pn, 'style', null);\n                clearParent(pn, left);\n                return true;\n            }\n        }\n    };\n    clearParent(fakeLeft, true) && clearParent(fakeRight, false);\n    range.setStartAfter(fakeLeft);\n    range.setEndBefore(fakeRight);\n    s.selectRange(range);\n    Dom.safeRemove(fakeLeft);\n    Dom.safeRemove(fakeRight);\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport copyIcon from \"./icons/copy.svg.js\";\nimport cutIcon from \"./icons/cut.svg.js\";\nimport pasteIcon from \"./icons/paste.svg.js\";\nimport selectAllIcon from \"./icons/select-all.svg.js\";\nConfig.prototype.controls.cut = {\n    command: 'cut',\n    isDisabled: (editor) => editor.s.isCollapsed(),\n    tooltip: 'Cut selection'\n};\nConfig.prototype.controls.copy = {\n    command: 'copy',\n    isDisabled: (editor) => editor.s.isCollapsed(),\n    tooltip: 'Copy selection'\n};\nConfig.prototype.controls.selectall = {\n    icon: 'select-all',\n    command: 'selectall',\n    tooltip: 'Select all'\n};\nIcon.set('copy', copyIcon)\n    .set('cut', cutIcon)\n    .set('paste', pasteIcon)\n    .set('select-all', selectAllIcon);\n","export default \"<svg viewBox=\\\"0 0 32 32\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path d=\\\"M24.89,6.61H22.31V4.47A2.47,2.47,0,0,0,19.84,2H6.78A2.47,2.47,0,0,0,4.31,4.47V22.92a2.47,2.47,0,0,0,2.47,2.47H9.69V27.2a2.8,2.8,0,0,0,2.8,2.8h12.4a2.8,2.8,0,0,0,2.8-2.8V9.41A2.8,2.8,0,0,0,24.89,6.61ZM6.78,23.52a.61.61,0,0,1-.61-.6V4.47a.61.61,0,0,1,.61-.6H19.84a.61.61,0,0,1,.61.6V6.61h-8a2.8,2.8,0,0,0-2.8,2.8V23.52Zm19,3.68a.94.94,0,0,1-.94.93H12.49a.94.94,0,0,1-.94-.93V9.41a.94.94,0,0,1,.94-.93h12.4a.94.94,0,0,1,.94.93Z\\\"/> <path d=\\\"M23.49,13.53h-9.6a.94.94,0,1,0,0,1.87h9.6a.94.94,0,1,0,0-1.87Z\\\"/> <path d=\\\"M23.49,17.37h-9.6a.94.94,0,1,0,0,1.87h9.6a.94.94,0,1,0,0-1.87Z\\\"/> <path d=\\\"M23.49,21.22h-9.6a.93.93,0,1,0,0,1.86h9.6a.93.93,0,1,0,0-1.86Z\\\"/> </svg> \";\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M960 896q26 0 45 19t19 45-19 45-45 19-45-19-19-45 19-45 45-19zm300 64l507 398q28 20 25 56-5 35-35 51l-128 64q-13 7-29 7-17 0-31-8l-690-387-110 66q-8 4-12 5 14 49 10 97-7 77-56 147.5t-132 123.5q-132 84-277 84-136 0-222-78-90-84-79-207 7-76 56-147t131-124q132-84 278-84 83 0 151 31 9-13 22-22l122-73-122-73q-13-9-22-22-68 31-151 31-146 0-278-84-82-53-131-124t-56-147q-5-59 15.5-113t63.5-93q85-79 222-79 145 0 277 84 83 52 132 123t56 148q4 48-10 97 4 1 12 5l110 66 690-387q14-8 31-8 16 0 29 7l128 64q30 16 35 51 3 36-25 56zm-681-260q46-42 21-108t-106-117q-92-59-192-59-74 0-113 36-46 42-21 108t106 117q92 59 192 59 74 0 113-36zm-85 745q81-51 106-117t-21-108q-39-36-113-36-100 0-192 59-81 51-106 117t21 108q39 36 113 36 100 0 192-59zm178-613l96 58v-11q0-36 33-56l14-8-79-47-26 26q-3 3-10 11t-12 12q-2 2-4 3.5t-3 2.5zm224 224l96 32 736-576-128-64-768 431v113l-160 96 9 8q2 2 7 6 4 4 11 12t11 12l26 26zm704 416l128-64-520-408-177 138q-2 3-13 7z\\\"/> </svg> \";\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path stroke-width=\\\"0\\\" d=\\\"M10.5 20H2a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h1V3l2.03-.4a3 3 0 0 1 5.94 0L13 3v1h1a2 2 0 0 1 2 2v1h-2V6h-1v1H3V6H2v12h5v2h3.5zM8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2 4h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2zm0 2v8h8v-8h-8z\\\"/> </svg> \";\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 18 18\\\"> <g fill-rule=\\\"evenodd\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\"> <g transform=\\\"translate(-381.000000, -381.000000)\\\"> <g transform=\\\"translate(381.000000, 381.000000)\\\"> <path d=\\\"M0,2 L2,2 L2,0 C0.9,0 0,0.9 0,2 L0,2 Z M0,10 L2,10 L2,8 L0,8 L0,10 L0,10 Z M4,18 L6,18 L6,16 L4,16 L4,18 L4,18 Z M0,6 L2,6 L2,4 L0,4 L0,6 L0,6 Z M10,0 L8,0 L8,2 L10,2 L10,0 L10,0 Z M16,0 L16,2 L18,2 C18,0.9 17.1,0 16,0 L16,0 Z M2,18 L2,16 L0,16 C0,17.1 0.9,18 2,18 L2,18 Z M0,14 L2,14 L2,12 L0,12 L0,14 L0,14 Z M6,0 L4,0 L4,2 L6,2 L6,0 L6,0 Z M8,18 L10,18 L10,16 L8,16 L8,18 L8,18 Z M16,10 L18,10 L18,8 L16,8 L16,10 L16,10 Z M16,18 C17.1,18 18,17.1 18,16 L16,16 L16,18 L16,18 Z M16,6 L18,6 L18,4 L16,4 L16,6 L16,6 Z M16,14 L18,14 L18,12 L16,12 L16,14 L16,14 Z M12,18 L14,18 L14,16 L12,16 L12,18 L12,18 Z M12,2 L14,2 L14,0 L12,0 L12,2 L12,2 Z M4,14 L14,14 L14,4 L4,4 L4,14 L4,14 Z M6,6 L12,6 L12,12 L6,12 L6,6 L6,6 Z\\\"/> </g> </g> </g> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { CLIPBOARD_ID, INSERT_AS_HTML, TEXT_HTML, TEXT_PLAIN } from \"../../core/constants.js\";\nimport { cached } from \"../../core/decorators/cache/cache.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { getDataTransfer, stripTags } from \"../../core/helpers/index.js\";\nimport \"./config.js\";\n/**\n * Clipboard plugin - cut and copy functionality\n */\nexport class clipboard {\n    constructor() {\n        /** @override */\n        this.buttons = [\n            {\n                name: 'cut',\n                group: 'clipboard'\n            },\n            {\n                name: 'copy',\n                group: 'clipboard'\n            },\n            {\n                name: 'paste',\n                group: 'clipboard'\n            },\n            {\n                name: 'selectall',\n                group: 'clipboard'\n            }\n        ];\n    }\n    init(editor) {\n        var _a;\n        (_a = this.buttons) === null || _a === void 0 ? void 0 : _a.forEach(btn => editor.registerButton(btn));\n        editor.e\n            .off(`copy.${CLIPBOARD_ID} cut.${CLIPBOARD_ID}`)\n            .on(`copy.${CLIPBOARD_ID} cut.${CLIPBOARD_ID}`, (event) => {\n            var _a;\n            const selectedText = editor.s.html;\n            const clipboardData = getDataTransfer(event) ||\n                getDataTransfer(editor.ew) ||\n                getDataTransfer(event.originalEvent);\n            if (clipboardData) {\n                clipboardData.setData(TEXT_PLAIN, stripTags(selectedText));\n                clipboardData.setData(TEXT_HTML, selectedText);\n            }\n            editor.buffer.set(CLIPBOARD_ID, selectedText);\n            editor.e.fire('pasteStack', {\n                html: selectedText,\n                action: editor.o.defaultActionOnPaste ||\n                    INSERT_AS_HTML\n            });\n            if (event.type === 'cut') {\n                editor.s.remove();\n                editor.s.focus();\n            }\n            event.preventDefault();\n            (_a = editor === null || editor === void 0 ? void 0 : editor.events) === null || _a === void 0 ? void 0 : _a.fire('afterCopy', selectedText);\n        });\n    }\n    /** @override */\n    destruct(editor) {\n        var _a, _b;\n        (_a = cached(editor, 'buffer')) === null || _a === void 0 ? void 0 : _a.set(CLIPBOARD_ID, '');\n        (_b = editor === null || editor === void 0 ? void 0 : editor.events) === null || _b === void 0 ? void 0 : _b.off('.' + CLIPBOARD_ID);\n    }\n}\npluginSystem.add('clipboard', clipboard);\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 16 16\\\"> <path stroke-width=\\\"0\\\" d=\\\"M16 9v-6h-3v-1c0-0.55-0.45-1-1-1h-11c-0.55 0-1 0.45-1 1v3c0 0.55 0.45 1 1 1h11c0.55 0 1-0.45 1-1v-1h2v4h-9v2h-0.5c-0.276 0-0.5 0.224-0.5 0.5v5c0 0.276 0.224 0.5 0.5 0.5h2c0.276 0 0.5-0.224 0.5-0.5v-5c0-0.276-0.224-0.5-0.5-0.5h-0.5v-1h9zM12 3h-11v-1h11v1z\\\"/> </svg> \";\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Koprovat formt'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Format kopieren'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Copiar formato'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': '  '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Kopioi muotoilu'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Format de copie'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Formtum msols'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'salin format'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Copia il formato'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'copyformat'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'opmaak kopiren'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'format kopii'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Copiar formato'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': 'Kopyalama Biimi'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'copy-format': ''\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { extendLang, pluginSystem } from \"../../core/global.js\";\nimport { css } from \"../../core/helpers/utils/css.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport copyFormatIcon from \"./copy-format.svg.js\";\nimport * as langs from \"./langs/index.js\";\nconst pluginKey = 'copy-format';\n/**\n * Plug-in copy and paste formatting from one element to another\n */\nconst copyStyles = [\n    'lineHeight',\n    'fontWeight',\n    'fontStyle',\n    'fontSize',\n    'fontFamily',\n    'color',\n    'margin',\n    'padding',\n    'borderWidth',\n    'borderStyle',\n    'borderColor',\n    'borderRadius',\n    'backgroundColor',\n    'textDecorationLine'\n];\nconst getStyle = (editor, key, box, defaultStyles) => {\n    let result = css(box, key);\n    if (result === defaultStyles[key]) {\n        if (box.parentNode &&\n            box !== editor.editor &&\n            box.parentNode !== editor.editor) {\n            result = getStyle(editor, key, box.parentNode, defaultStyles);\n        }\n        else {\n            result = undefined;\n        }\n    }\n    return result;\n};\nconst getStyles = (editor, box, defaultStyles) => {\n    const result = {};\n    if (box) {\n        copyStyles.forEach((key) => {\n            result[key] = getStyle(editor, key, box, defaultStyles);\n            if (key.match(/border(Style|Color)/) && !result.borderWidth) {\n                result[key] = undefined;\n            }\n        });\n    }\n    return result;\n};\nConfig.prototype.controls.copyformat = {\n    exec: (editor, current, { button }) => {\n        if (!current) {\n            return;\n        }\n        if (editor.buffer.exists(pluginKey)) {\n            editor.buffer.delete(pluginKey);\n            editor.e.off(editor.editor, 'mouseup.' + pluginKey);\n        }\n        else {\n            const defaultStyles = {}, box = Dom.up(current, (elm) => elm && !Dom.isText(elm), editor.editor) || editor.editor;\n            const ideal = editor.createInside.span();\n            editor.editor.appendChild(ideal);\n            copyStyles.forEach((key) => {\n                defaultStyles[key] = css(ideal, key);\n            });\n            if (ideal !== editor.editor) {\n                Dom.safeRemove(ideal);\n            }\n            const format = getStyles(editor, box, defaultStyles);\n            const onMouseUp = () => {\n                editor.buffer.delete(pluginKey);\n                const currentNode = editor.s.current();\n                if (currentNode) {\n                    if (Dom.isTag(currentNode, 'img')) {\n                        css(currentNode, format);\n                    }\n                    else {\n                        editor.s.commitStyle({\n                            attributes: {\n                                style: format\n                            }\n                        });\n                    }\n                }\n                editor.e.off(editor.editor, 'mouseup.' + pluginKey);\n            };\n            editor.e.on(editor.editor, 'mouseup.' + pluginKey, onMouseUp);\n            editor.buffer.set(pluginKey, true);\n        }\n        button.update();\n    },\n    isActive: (editor) => editor.buffer.exists(pluginKey),\n    tooltip: 'Paint format'\n};\nexport function copyFormat(editor) {\n    editor.registerButton({\n        name: 'copyformat',\n        group: 'clipboard'\n    });\n    extendLang(langs);\n}\npluginSystem.add('copyformat', copyFormat);\nIcon.set('copyformat', copyFormatIcon);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport * as consts from \"../../core/constants.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport fullsizeIcon from \"./icons/fullsize.svg.js\";\nimport shrinkIcon from \"./icons/shrink.svg.js\";\nConfig.prototype.fullsize = false;\nConfig.prototype.globalFullSize = true;\nIcon.set('fullsize', fullsizeIcon).set('shrink', shrinkIcon);\nConfig.prototype.controls.fullsize = {\n    exec: (editor) => {\n        editor.toggleFullSize();\n    },\n    update(editor, button) {\n        const mode = editor.isFullSize ? 'shrink' : 'fullsize';\n        button.state.activated = editor.isFullSize;\n        if (editor.o.textIcons) {\n            button.state.text = mode;\n        }\n        else {\n            button.state.icon.name = mode;\n        }\n    },\n    tooltip: 'Open in fullsize',\n    mode: consts.MODE_SOURCE + consts.MODE_WYSIWYG\n};\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 24 24\\\"> <path stroke-width=\\\"0\\\" d=\\\"M22,20.6L3.4,2H8V0H0v8h2V3.4L20.6,22H16v2h8v-8h-2V20.6z M16,0v2h4.7l-6.3,6.3l1.4,1.4L22,3.5V8h2V0H16z M8.3,14.3L2,20.6V16H0v8h8v-2H3.5l6.3-6.3L8.3,14.3z\\\"/> </svg> \";\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M896 960v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45zm755-672q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { pluginSystem } from \"../../core/global.js\";\nimport { isJoditObject } from \"../../core/helpers/checker/is-jodit-object.js\";\nimport { css } from \"../../core/helpers/utils/css.js\";\nimport \"./config.js\";\nconst fullsizeStack = new Set();\n/**\n * Process `toggleFullSize` event, and behavior - set/unset fullsize mode\n */\nexport function fullsize(editor) {\n    editor.registerButton({\n        name: 'fullsize'\n    });\n    let isEnabled = false, oldHeight = 0, oldWidth = 0, wasToggled = false;\n    const resize = () => {\n        const { container, events } = editor;\n        if (!events) {\n            return;\n        }\n        if (isEnabled) {\n            oldHeight = css(container, 'height', true);\n            oldWidth = css(container, 'width', true);\n            css(container, {\n                height: editor.ow.innerHeight,\n                width: editor.ow.innerWidth\n            });\n            wasToggled = true;\n        }\n        else if (wasToggled) {\n            css(container, {\n                height: oldHeight || 'auto',\n                width: oldWidth || 'auto'\n            });\n        }\n    }, \n    /**\n     * Change editor's state between FullSize and normal\n     */\n    toggle = (enable) => {\n        var _a;\n        const { container, events } = editor;\n        if (!container) {\n            return;\n        }\n        if (enable === undefined) {\n            enable = !container.classList.contains('jodit_fullsize');\n        }\n        editor.setMod('fullsize', enable);\n        editor.o.fullsize = enable;\n        isEnabled = enable;\n        container.classList.toggle('jodit_fullsize', enable);\n        if (editor.toolbar) {\n            isJoditObject(editor) &&\n                ((_a = editor.toolbarContainer) === null || _a === void 0 ? void 0 : _a.appendChild(editor.toolbar.container));\n            css(editor.toolbar.container, 'width', 'auto');\n        }\n        enable\n            ? fullsizeStack.add(container)\n            : fullsizeStack.delete(container);\n        const shouldToggleGlobalFullsize = editor.o.globalFullSize &&\n            ((fullsizeStack.size === 1 && enable) ||\n                (fullsizeStack.size === 0 && !enable));\n        if (shouldToggleGlobalFullsize) {\n            let node = container.parentNode;\n            while (node &&\n                node.nodeType !== Node.DOCUMENT_NODE &&\n                node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n                node.classList.toggle('jodit_fullsize-box_true', enable);\n                node = node.parentNode;\n            }\n            resize();\n        }\n        events.fire('afterResize');\n    };\n    if (editor.o.globalFullSize) {\n        editor.e.on(editor.ow, 'resize', resize);\n    }\n    editor.e\n        .on('afterInit afterOpen', () => {\n        var _a;\n        editor.toggleFullSize((_a = editor === null || editor === void 0 ? void 0 : editor.options) === null || _a === void 0 ? void 0 : _a.fullsize);\n    })\n        .on('toggleFullSize', toggle)\n        .on('beforeDestruct', () => {\n        isEnabled && toggle(false);\n    })\n        .on('beforeDestruct', () => {\n        editor.events && editor.e.off(editor.ow, 'resize', resize);\n    });\n}\npluginSystem.add('fullsize', fullsize);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../core/dom/index.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport hrIcon from \"./hr.svg.js\";\nIcon.set('hr', hrIcon);\nConfig.prototype.controls.hr = {\n    command: 'insertHorizontalRule',\n    tags: ['hr'],\n    tooltip: 'Insert Horizontal Line'\n};\nexport function hr(editor) {\n    editor.registerButton({\n        name: 'hr',\n        group: 'insert'\n    });\n    editor.registerCommand('insertHorizontalRule', () => {\n        const elm = editor.createInside.element('hr');\n        editor.s.insertNode(elm, false, false);\n        const block = Dom.closest(elm.parentElement, Dom.isBlock, editor.editor);\n        if (block && Dom.isEmpty(block) && block !== editor.editor) {\n            Dom.after(block, elm);\n            Dom.safeRemove(block);\n        }\n        let p = Dom.next(elm, Dom.isBlock, editor.editor, false);\n        if (!p) {\n            p = editor.createInside.element(editor.o.enter);\n            Dom.after(elm, p);\n        }\n        editor.s.setCursorIn(p);\n        return false;\n    });\n}\npluginSystem.add('hr', hr);\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M1600 736v192q0 40-28 68t-68 28h-1216q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h1216q40 0 68 28t28 68z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/image-processor\n */\nimport { Config } from \"../../config.js\";\nConfig.prototype.imageProcessor = {\n    replaceDataURIToBlobIdInView: true\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SOURCE_CONSUMER } from \"../../core/constants.js\";\nimport { cached, debounce, watch } from \"../../core/decorators/index.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { $$, dataBind } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport \"./config.js\";\nconst JODIT_IMAGE_PROCESSOR_BINDED = '__jodit_imageprocessor_binded';\nconst JODIT_IMAGE_BLOB_ID = JODIT_IMAGE_PROCESSOR_BINDED + 'blob-id';\n/**\n * Change editor's size after load all images\n */\nexport class imageProcessor extends Plugin {\n    afterInit(jodit) { }\n    beforeDestruct(jodit) {\n        const buffer = cached(jodit, 'buffer');\n        const list = buffer === null || buffer === void 0 ? void 0 : buffer.get(JODIT_IMAGE_BLOB_ID);\n        if (buffer && list) {\n            const keys = Object.keys(list);\n            for (const uri of keys) {\n                URL.revokeObjectURL(uri);\n            }\n            buffer.delete(JODIT_IMAGE_BLOB_ID);\n        }\n    }\n    onAfterGetValueFromEditor(data, consumer) {\n        if (consumer !== SOURCE_CONSUMER) {\n            return this.onBeforeSetElementValue(data);\n        }\n    }\n    onBeforeSetElementValue(data) {\n        const { jodit: editor } = this;\n        if (!editor.o.imageProcessor.replaceDataURIToBlobIdInView) {\n            return;\n        }\n        const list = editor.buffer.get(JODIT_IMAGE_BLOB_ID);\n        if (list) {\n            const keys = Object.keys(list);\n            for (const uri of keys) {\n                while (data.value.includes(uri)) {\n                    data.value = data.value.replace(uri, list[uri]);\n                }\n            }\n        }\n    }\n    async afterChange(data) {\n        const { jodit: editor } = this;\n        if (!editor.editor) {\n            return;\n        }\n        $$('img', editor.editor).forEach(elm => {\n            if (!dataBind(elm, JODIT_IMAGE_PROCESSOR_BINDED)) {\n                dataBind(elm, JODIT_IMAGE_PROCESSOR_BINDED, true);\n                if (!elm.complete) {\n                    editor.e.on(elm, 'load', function ElementOnLoad() {\n                        var _a;\n                        !editor.isInDestruct && ((_a = editor.e) === null || _a === void 0 ? void 0 : _a.fire('resize'));\n                        editor.e.off(elm, 'load', ElementOnLoad);\n                    });\n                }\n                if (elm.src && /^data:/.test(elm.src)) {\n                    replaceDataURIToBlobUUID(editor, elm);\n                }\n                editor.e.on(elm, 'mousedown touchstart', () => {\n                    editor.s.select(elm);\n                });\n            }\n        });\n    }\n}\n__decorate([\n    watch(':afterGetValueFromEditor')\n], imageProcessor.prototype, \"onAfterGetValueFromEditor\", null);\n__decorate([\n    watch(':beforeSetElementValue')\n], imageProcessor.prototype, \"onBeforeSetElementValue\", null);\n__decorate([\n    watch([':change', ':afterInit', ':changePlace']),\n    debounce()\n], imageProcessor.prototype, \"afterChange\", null);\nfunction replaceDataURIToBlobUUID(editor, elm) {\n    if (!editor.o.imageProcessor.replaceDataURIToBlobIdInView) {\n        return;\n    }\n    if (typeof ArrayBuffer === 'undefined' || typeof URL === 'undefined') {\n        return;\n    }\n    const dataUri = elm.src, blob = dataURItoBlob(dataUri);\n    elm.src = URL.createObjectURL(blob);\n    editor.e.fire('internalUpdate');\n    const { buffer } = editor;\n    const list = buffer.get(JODIT_IMAGE_BLOB_ID) || {};\n    list[elm.src] = dataUri;\n    editor.buffer.set(JODIT_IMAGE_BLOB_ID, list);\n}\n// https://stackoverflow.com/a/12300351\nfunction dataURItoBlob(dataURI) {\n    // convert base64 to raw binary data held in a string\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n    const byteString = atob(dataURI.split(',')[1]);\n    // separate out the mime component\n    const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n    // write the bytes of the string to an ArrayBuffer\n    const ab = new ArrayBuffer(byteString.length);\n    // create a view into the buffer\n    const ia = new Uint8Array(ab);\n    // set the bytes of the buffer to the correct values\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    // write the ArrayBuffer to a blob, and you're done\n    return new Blob([ab], { type: mimeString });\n}\npluginSystem.add('imageProcessor', imageProcessor);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Config } from \"../../config.js\";\nConfig.prototype.image = {\n    dialogWidth: 600,\n    openOnDblClick: true,\n    editSrc: true,\n    useImageEditor: true,\n    editTitle: true,\n    editAlt: true,\n    editLink: true,\n    editSize: true,\n    editBorderRadius: true,\n    editMargins: true,\n    editClass: true,\n    availableClasses: [],\n    editStyle: true,\n    editId: true,\n    editAlign: true,\n    showPreview: true,\n    selectImageAfterClose: true\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { component } from \"../../../core/decorators/component/component.js\";\nimport { hook } from \"../../../core/decorators/hook/hook.js\";\nimport { watch } from \"../../../core/decorators/watch/watch.js\";\nimport { css } from \"../../../core/helpers/index.js\";\nimport { UIGroup } from \"../../../core/ui/group/group.js\";\n/** @private */\nlet UIImageMainTab = class UIImageMainTab extends UIGroup {\n    className() {\n        return 'UIImageMainTab';\n    }\n    appendChildToContainer() {\n        // Do nothing\n    }\n    constructor(view, state, handlers) {\n        super(view);\n        this.state = state;\n        this.handlers = handlers;\n    }\n    render() {\n        return `<div class=\"jodit-form__group &__editSrc\">\n\t\t\t<label>~Src~</label>\n\t\t\t<div class=\"jodit-input_group\">\n\t\t\t\t<input class=\"jodit-input &__imageSrc\" type=\"text\"/>\n\t\t\t\t<div class=\"jodit-input_group-buttons &__fixImage\">\n\t\t\t\t\t\t<a class=\"jodit-button &__changeImage\">*image*</a>\n\t\t\t\t\t\t<a class=\"jodit-button &__editImage\">*crop*</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editTitle\">\n\t\t\t<label>~Title~</label>\n\t\t\t<input type=\"text\" class=\"jodit-input &__imageTitle\"/>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editAlt\">\n\t\t\t<label>~Alternative~</label>\n\t\t\t<input type=\"text\" class=\"jodit-input &__imageAlt\"/>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editLink\">\n\t\t\t<label>~Link~</label>\n\t\t\t<input type=\"text\" class=\"jodit-input &__imageLink\"/>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editLinkTarget\">\n\t\t\t<label class=\"jodit_vertical_middle\">\n\t\t\t\t<input type=\"checkbox\" class=\"jodit-checkbox &__imageLinkOpenInNewTab\"/>\n\t\t\t\t<span>~Open link in new tab~</span>\n\t\t\t</label>\n\t\t</div>`;\n    }\n    async onStateImageSrcChange() {\n        const imageSrc = this.getElm('imageSrc');\n        imageSrc.value = this.state.values.imageSrc;\n    }\n    onImageSrcChange() {\n        this.state.values.imageSrc = this.getElm('imageSrc').value;\n    }\n    /**\n     * Open image editor\n     */\n    onEditImageClick(e) {\n        this.handlers.openImageEditor();\n        e.stopPropagation();\n    }\n    /**\n     * Open popup with filebrowser/uploader buttons for image\n     */\n    onChangeImageClick(e) {\n        this.handlers.openImagePopup(this.getElm('changeImage'));\n        e.stopPropagation();\n    }\n    onStateTitleChange() {\n        const title = this.getElm('imageTitle');\n        title.value = this.state.values.imageTitle;\n    }\n    onTitleChange() {\n        this.state.values.imageTitle = this.getElm('imageTitle').value;\n    }\n    onStateAltChange() {\n        const alt = this.getElm('imageAlt');\n        alt.value = this.state.values.imageAlt;\n    }\n    onAltChange() {\n        this.state.values.imageAlt = this.getElm('imageAlt').value;\n    }\n    onStateImageLinkChange() {\n        const imageLink = this.getElm('imageLink');\n        imageLink.value = this.state.values.imageLink;\n    }\n    onImageLinkChange() {\n        this.state.values.imageLink = this.getElm('imageLink').value;\n    }\n    onStateImageLinkOpenInNewTabChange() {\n        const imageLinkOpenInNewTab = this.getElm('imageLinkOpenInNewTab');\n        imageLinkOpenInNewTab.checked = this.state.values.imageLinkOpenInNewTab;\n    }\n    onImageLinkOpenInNewTabChange() {\n        this.state.values.imageLinkOpenInNewTab = this.getElm('imageLinkOpenInNewTab').checked;\n    }\n    hideFieldByOptions() {\n        const o = this.j.o;\n        const opt = o.image;\n        [\n            ['editSrc', 'editSrc'],\n            ['editTitle', 'editTitle'],\n            ['editAlt', 'editAlt'],\n            ['editLink', 'editLink'],\n            ['editLink', 'editLinkTarget'],\n            ['useImageEditor', 'editImage']\n        ].forEach(([optKey, elmKey]) => {\n            const elm = this.getElm(elmKey);\n            css(elm, 'display', opt[optKey] ? null : 'none');\n        });\n        const changeImage = this.getElm('changeImage');\n        const needShowChangeImage = Boolean(o.filebrowser.ajax.url || o.uploader.url);\n        css(changeImage, 'display', needShowChangeImage ? null : 'none');\n        const editImage = this.getElm('editImage');\n        const needShowEditImage = Boolean(o.filebrowser.ajax.url) && opt.useImageEditor;\n        css(editImage, 'display', needShowEditImage ? null : 'none');\n        const fixImage = this.getElm('fixImage');\n        css(fixImage, 'display', needShowChangeImage || needShowEditImage ? null : 'none');\n    }\n};\n__decorate([\n    watch('state.values.imageSrc')\n], UIImageMainTab.prototype, \"onStateImageSrcChange\", null);\n__decorate([\n    watch('imageSrc:change')\n], UIImageMainTab.prototype, \"onImageSrcChange\", null);\n__decorate([\n    watch('editImage:click')\n], UIImageMainTab.prototype, \"onEditImageClick\", null);\n__decorate([\n    watch('changeImage:click')\n], UIImageMainTab.prototype, \"onChangeImageClick\", null);\n__decorate([\n    watch('state.values.imageTitle')\n], UIImageMainTab.prototype, \"onStateTitleChange\", null);\n__decorate([\n    watch('imageTitle:change')\n], UIImageMainTab.prototype, \"onTitleChange\", null);\n__decorate([\n    watch('state.values.imageAlt')\n], UIImageMainTab.prototype, \"onStateAltChange\", null);\n__decorate([\n    watch('imageAlt:change')\n], UIImageMainTab.prototype, \"onAltChange\", null);\n__decorate([\n    watch('state.values.imageLink')\n], UIImageMainTab.prototype, \"onStateImageLinkChange\", null);\n__decorate([\n    watch('imageLink:change')\n], UIImageMainTab.prototype, \"onImageLinkChange\", null);\n__decorate([\n    watch('state.values.imageLinkOpenInNewTab')\n], UIImageMainTab.prototype, \"onStateImageLinkOpenInNewTabChange\", null);\n__decorate([\n    watch('imageLinkOpenInNewTab:change')\n], UIImageMainTab.prototype, \"onImageLinkOpenInNewTabChange\", null);\n__decorate([\n    hook('ready')\n], UIImageMainTab.prototype, \"hideFieldByOptions\", null);\nUIImageMainTab = __decorate([\n    component\n], UIImageMainTab);\nexport { UIImageMainTab };\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/image-properties\n */\nimport { isNumber } from \"../../../core/helpers/checker/is-number.js\";\nimport { trim } from \"../../../core/helpers/string/trim.js\";\n/** @private */\nexport const normalSizeFromString = (value) => {\n    return /^[-+]?[0-9.]+(px)?$/.test(value.toString())\n        ? parseFloat(value.toString())\n        : value;\n};\n/** @private */\nexport const normalSizeToString = (value) => {\n    if (isNumber(value)) {\n        return value ? value + 'px' : value.toString();\n    }\n    value = trim(value);\n    return /^[0-9]+$/.test(value) ? value + 'px' : value;\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { component } from \"../../../core/decorators/component/component.js\";\nimport { hook } from \"../../../core/decorators/hook/hook.js\";\nimport { watch } from \"../../../core/decorators/watch/watch.js\";\nimport { css } from \"../../../core/helpers/index.js\";\nimport { isString } from \"../../../core/helpers/checker/is-string.js\";\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\nimport { UIElement } from \"../../../core/ui/element.js\";\nimport { Icon } from \"../../../core/ui/icon.js\";\nimport { normalSizeFromString } from \"../utils/utils.js\";\n/** @private */\nlet UIImagePositionTab = class UIImagePositionTab extends UIElement {\n    className() {\n        return 'UIImagePositionTab';\n    }\n    constructor(jodit, state, handlers) {\n        super(jodit, {\n            availableClasses: jodit.o.image.availableClasses\n        });\n        this.state = state;\n        this.handlers = handlers;\n    }\n    render({ availableClasses }) {\n        return `<div class=\"jodit-form__group &__editMargins\">\n\t\t\t<label>~Margins~</label>\n\t\t\t<div class=\"jodit-grid jodit_vertical_middle\">\n\t\t\t\t<input class=\"jodit_col-lg-1-5 jodit-input &__marginTop\" type=\"text\" placeholder=\"~top~\"/>\n\t\t\t\t<a style=\"text-align: center;\" class=\"jodit-properties__lock jodit_col-lg-1-5 &__lockMargin\">*lock*</a>\n\t\t\t\t<input disabled=\"disabled\" class=\"jodit_col-lg-1-5 jodit-input &__marginRight\" type=\"text\" placeholder=\"~right~\"/>\n\t\t\t\t<input disabled=\"disabled\" class=\"jodit_col-lg-1-5 jodit-input &__marginBottom\" type=\"text\" placeholder=\"~bottom~\"/>\n\t\t\t\t<input disabled=\"disabled\" class=\"jodit_col-lg-1-5 jodit-input &__marginLeft\" type=\"text\" placeholder=\"~left~\"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editAlign\">\n\t\t\t<label>~Align~</label>\n\t\t\t<select class=\"jodit-select &__align\">\n\t\t\t\t<option value=\"\">~--Not Set--~</option>\n\t\t\t\t<option value=\"left\">~Left~</option>\n\t\t\t\t<option value=\"center\">~Center~</option>\n\t\t\t\t<option value=\"right\">~Right~</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editStyle\">\n\t\t\t<label>~Styles~</label>\n\t\t\t<input type=\"text\" class=\"jodit-input &__style\"/>\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editClass\">\n\t\t\t<label>~Classes~</label>\n\t\t\t${(() => {\n            const classInput = [];\n            if (availableClasses && availableClasses.length > 0) {\n                classInput.push('<select class=\"jodit-input jodit-select &__classes\">');\n                availableClasses.forEach(item => {\n                    if (isString(item)) {\n                        classInput.push(`<option value=\"${item}\">${item}</option>`);\n                    }\n                    else {\n                        classInput.push(`<option value=\"${item[0]}\">${item[1]}</option>`);\n                    }\n                });\n                classInput.push('</select>');\n            }\n            else {\n                classInput.push('<input type=\"text\" class=\"jodit-input &__classes\"/>');\n            }\n            return classInput.join('');\n        })()}\n\t\t</div>\n\t\t<div class=\"jodit-form__group &__editId\">\n\t\t\t<label>Id</label>\n\t\t\t<input type=\"text\" class=\"jodit-input &__id\"/>\n\t\t</div>\n\t\t<div\n\t\t\tclass=\"jodit-form__group &__editBorderRadius\"\n\t\t>\n\t\t\t<label>~Border radius~</label>\n\t\t\t<input type=\"number\" class=\"jodit-input &__borderRadius\"/>\n\t\t</div>`;\n    }\n    onStateAlignChange() {\n        const align = this.getElm('align');\n        align.value = this.state.values.align;\n    }\n    onChangeAlign() {\n        const align = this.getElm('align');\n        this.state.values.align = align.value;\n    }\n    onStateValuesBorderRadiusChange() {\n        const borderRadius = this.getElm('borderRadius');\n        borderRadius.value = this.state.values.borderRadius.toString();\n    }\n    onChangeBorderRadius() {\n        const borderRadius = this.getElm('borderRadius');\n        this.state.values.borderRadius = parseFloat(borderRadius.value);\n    }\n    onStateValuesIdChange() {\n        const id = this.getElm('id');\n        id.value = this.state.values.id;\n    }\n    onChangeId() {\n        const id = this.getElm('id');\n        this.state.values.id = id.value;\n    }\n    onStateValuesStyleChange() {\n        const style = this.getElm('style');\n        style.value = this.state.values.style;\n    }\n    onChangeStyle() {\n        const style = this.getElm('style');\n        this.state.values.style = style.value;\n    }\n    onStateValuesClassesChange() {\n        const classes = this.getElm('classes');\n        classes.value = this.state.values.classes;\n    }\n    onChangClasses() {\n        const classes = this.getElm('classes');\n        this.state.values.classes = classes.value;\n    }\n    onLockMarginClick(e) {\n        this.state.marginIsLocked = !this.state.marginIsLocked;\n        e.preventDefault();\n    }\n    onChangeMarginIsLocked() {\n        const marginBottom = this.getElm('marginBottom');\n        const marginRight = this.getElm('marginRight');\n        const marginLeft = this.getElm('marginLeft');\n        const lockMargin = this.getElm('lockMargin');\n        [marginRight, marginBottom, marginLeft].forEach(elm => {\n            attr(elm, 'disabled', this.state.marginIsLocked || null);\n        });\n        lockMargin.innerHTML = Icon.get(this.state.marginIsLocked ? 'lock' : 'unlock');\n        if (this.state.marginIsLocked) {\n            const marginTop = this.state.values.marginTop;\n            this.state.values.marginRight = marginTop;\n            this.state.values.marginBottom = marginTop;\n            this.state.values.marginLeft = marginTop;\n        }\n    }\n    onStateValuesMarginChange() {\n        const marginTop = this.getElm('marginTop');\n        const marginRight = this.getElm('marginRight');\n        const marginBottom = this.getElm('marginBottom');\n        const marginLeft = this.getElm('marginLeft');\n        marginTop.value = this.state.values.marginTop.toString();\n        marginRight.value = this.state.values.marginRight.toString();\n        marginBottom.value = this.state.values.marginBottom.toString();\n        marginLeft.value = this.state.values.marginLeft.toString();\n    }\n    onChangeMargin() {\n        const marginTop = this.getElm('marginTop');\n        const marginRight = this.getElm('marginRight');\n        const marginBottom = this.getElm('marginBottom');\n        const marginLeft = this.getElm('marginLeft');\n        this.state.values.marginTop = normalSizeFromString(marginTop.value);\n        if (this.state.marginIsLocked) {\n            this.state.values.marginRight = this.state.values.marginTop;\n            this.state.values.marginBottom = this.state.values.marginTop;\n            this.state.values.marginLeft = this.state.values.marginTop;\n        }\n        else {\n            this.state.values.marginRight = normalSizeFromString(marginRight.value);\n            this.state.values.marginBottom = normalSizeFromString(marginBottom.value);\n            this.state.values.marginLeft = normalSizeFromString(marginLeft.value);\n        }\n    }\n    hideFieldByOptions() {\n        const opt = this.j.o.image;\n        [\n            ['editMargins', 'editMargins'],\n            ['editAlign', 'editAlign'],\n            ['editStyle', 'editStyle'],\n            ['editClass', 'editClass'],\n            ['editId', 'editId'],\n            ['editBorderRadius', 'editBorderRadius']\n        ].forEach(([optKey, elmKey]) => {\n            const elm = this.getElm(elmKey);\n            css(elm, 'display', opt[optKey] ? null : 'none');\n        });\n    }\n};\n__decorate([\n    hook('ready'),\n    watch('state.values.align')\n], UIImagePositionTab.prototype, \"onStateAlignChange\", null);\n__decorate([\n    watch('align:change')\n], UIImagePositionTab.prototype, \"onChangeAlign\", null);\n__decorate([\n    hook('ready'),\n    watch('state.values.borderRadius')\n], UIImagePositionTab.prototype, \"onStateValuesBorderRadiusChange\", null);\n__decorate([\n    watch('borderRadius:change')\n], UIImagePositionTab.prototype, \"onChangeBorderRadius\", null);\n__decorate([\n    hook('ready'),\n    watch('state.values.id')\n], UIImagePositionTab.prototype, \"onStateValuesIdChange\", null);\n__decorate([\n    watch('id:change')\n], UIImagePositionTab.prototype, \"onChangeId\", null);\n__decorate([\n    hook('ready'),\n    watch('state.values.style')\n], UIImagePositionTab.prototype, \"onStateValuesStyleChange\", null);\n__decorate([\n    watch('style:change')\n], UIImagePositionTab.prototype, \"onChangeStyle\", null);\n__decorate([\n    hook('ready'),\n    watch('state.values.classes')\n], UIImagePositionTab.prototype, \"onStateValuesClassesChange\", null);\n__decorate([\n    watch('classes:change')\n], UIImagePositionTab.prototype, \"onChangClasses\", null);\n__decorate([\n    watch('lockMargin:click')\n], UIImagePositionTab.prototype, \"onLockMarginClick\", null);\n__decorate([\n    hook('ready'),\n    watch('state.marginIsLocked')\n], UIImagePositionTab.prototype, \"onChangeMarginIsLocked\", null);\n__decorate([\n    hook('ready'),\n    watch([\n        'state.values.marginTop',\n        'state.values.marginRight',\n        'state.values.marginBottom',\n        'state.values.marginLeft'\n    ])\n], UIImagePositionTab.prototype, \"onStateValuesMarginChange\", null);\n__decorate([\n    watch([\n        'marginTop:change',\n        'marginRight:change',\n        'marginBottom:change',\n        'marginLeft:change'\n    ])\n], UIImagePositionTab.prototype, \"onChangeMargin\", null);\n__decorate([\n    hook('ready')\n], UIImagePositionTab.prototype, \"hideFieldByOptions\", null);\nUIImagePositionTab = __decorate([\n    component\n], UIImagePositionTab);\nexport { UIImagePositionTab };\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { debounce, hook, watch } from \"../../../core/decorators/index.js\";\nimport { component } from \"../../../core/decorators/component/component.js\";\nimport { attr, css, isNumeric } from \"../../../core/helpers/index.js\";\nimport { UIGroup } from \"../../../core/ui/group/group.js\";\nimport { Icon } from \"../../../core/ui/icon.js\";\nimport { TabsWidget } from \"../../../modules/widget/index.js\";\nimport { UIImageMainTab } from \"./ui-image-main-tab.js\";\nimport { UIImagePositionTab } from \"./ui-image-position-tab.js\";\n/** @private */\nlet UIImagePropertiesForm = class UIImagePropertiesForm extends UIGroup {\n    className() {\n        return 'UIImagePropertiesForm';\n    }\n    appendChildToContainer() { }\n    getElm(elementName) {\n        const selfElm = super.getElm(elementName);\n        if (selfElm) {\n            return selfElm;\n        }\n        for (const child of this.elements) {\n            const elm = child.getElm(elementName);\n            if (elm) {\n                return elm;\n            }\n        }\n        return null;\n    }\n    constructor(jodit, state, activeTabState, handlers) {\n        super(jodit);\n        this.state = state;\n        this.handlers = handlers;\n        this.__mainTab = new UIImageMainTab(this.jodit, this.state, this.handlers);\n        this.__positionTab = new UIImagePositionTab(this.jodit, this.state, this.handlers);\n        this.getElm('tabsBox').appendChild(TabsWidget(jodit, [\n            { name: 'Image', content: this.__mainTab },\n            { name: 'Advanced', content: this.__positionTab }\n        ], activeTabState));\n        this.setMod('lock-size', this.state.sizeIsLocked);\n        this.append(this.__mainTab).append(this.__positionTab);\n    }\n    render() {\n        return `<form>\n\t\t<div class=\"jodit-grid jodit-grid_xs-column\">\n\t\t\t<div class=\"jodit_col-lg-2-5 jodit_col-xs-5-5\">\n\t\t\t\t<div class=\"&__view-box\">\n\t\t\t\t\t<div class=\"&__imageView\">\n\t\t\t\t\t\t<img class=\"&__imageViewSrc\" src=\"\" alt=\"\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"jodit-form__group &__imageSizes\">\n\t\t\t\t\t\t<input type=\"text\" class=\"jodit-input &__imageWidth\"/>\n\t\t\t\t\t\t<a class=\"&__lockSize\">${Icon.get('lock')}</a>\n\t\t\t\t\t\t<input type=\"text\" class=\"&__imageHeight jodit-input\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"jodit_col-lg-3-5 jodit_col-xs-5-5 &__tabsBox\"></div>\n\t\t</div>\n\t</form>`;\n    }\n    onChangeSizeIsLocked() {\n        const lockSize = this.getElm('lockSize');\n        const imageWidth = this.getElm('imageWidth');\n        lockSize.innerHTML = Icon.get(this.state.sizeIsLocked ? 'lock' : 'unlock');\n        this.setMod('lock-size', this.state.sizeIsLocked);\n        this.j.e.fire(imageWidth, 'change');\n    }\n    onLockSizeClick() {\n        this.state.sizeIsLocked = !this.state.sizeIsLocked;\n    }\n    onStateValuesSizeChange() {\n        const imageWidth = this.getElm('imageWidth');\n        const imageHeight = this.getElm('imageHeight');\n        if (imageWidth !== this.j.od.activeElement) {\n            imageWidth.value = this.state.values.imageWidth.toString();\n        }\n        if (imageHeight !== this.j.od.activeElement) {\n            imageHeight.value = this.state.values.imageHeight.toString();\n        }\n    }\n    onImageWidthChange(e) {\n        const imageWidth = this.getElm('imageWidth');\n        const imageHeight = this.getElm('imageHeight');\n        if (!this.state.sizeIsLocked ||\n            !isNumeric(imageWidth.value) ||\n            !isNumeric(imageHeight.value)) {\n            this.state.values.imageWidth = imageWidth.value;\n            this.state.values.imageHeight = imageHeight.value;\n            return;\n        }\n        const w = parseFloat(imageWidth.value), h = parseFloat(imageHeight.value);\n        if (e.target === imageWidth) {\n            this.state.values.imageWidth = w;\n            this.state.values.imageHeight = Math.round(w / this.state.ratio);\n        }\n        else {\n            this.state.values.imageWidth = Math.round(h * this.state.ratio);\n            this.state.values.imageHeight = h;\n        }\n    }\n    onStateValuesImageSrcChange() {\n        const { imageSrc } = this.state.values;\n        if (!imageSrc) {\n            return;\n        }\n        const imageViewSrc = this.getElm('imageViewSrc');\n        attr(imageViewSrc, 'src', imageSrc);\n        const image = new Image();\n        image.src = imageSrc;\n        this.state.image = image;\n    }\n    hideFieldByOptions() {\n        const opt = this.j.o.image;\n        [\n            ['editSize', 'imageSizes'],\n            ['showPreview', 'imageView']\n        ].forEach(([optKey, elmKey]) => {\n            const elm = this.getElm(elmKey);\n            css(elm, 'display', opt[optKey] ? null : 'none');\n        });\n    }\n};\n__decorate([\n    hook('ready'),\n    watch('state.sizeIsLocked')\n], UIImagePropertiesForm.prototype, \"onChangeSizeIsLocked\", null);\n__decorate([\n    watch('lockSize:click')\n], UIImagePropertiesForm.prototype, \"onLockSizeClick\", null);\n__decorate([\n    hook('ready'),\n    watch(['state.values.imageWidth', 'state.values.imageHeight'])\n], UIImagePropertiesForm.prototype, \"onStateValuesSizeChange\", null);\n__decorate([\n    watch([\n        'imageWidth:change',\n        'imageHeight:change',\n        'imageWidth:keydown',\n        'imageHeight:keydown',\n        'imageWidth:mousedown',\n        'imageHeight:mousedown',\n        'imageWidth:paste',\n        'imageHeight:paste'\n    ]),\n    debounce()\n], UIImagePropertiesForm.prototype, \"onImageWidthChange\", null);\n__decorate([\n    hook('ready'),\n    watch('state.values.imageSrc')\n], UIImagePropertiesForm.prototype, \"onStateValuesImageSrcChange\", null);\n__decorate([\n    hook('ready')\n], UIImagePropertiesForm.prototype, \"hideFieldByOptions\", null);\nUIImagePropertiesForm = __decorate([\n    component\n], UIImagePropertiesForm);\nexport { UIImagePropertiesForm };\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\nimport { readAlign } from \"./align.js\";\nimport { readLink } from \"./link.js\";\nimport { readMargins } from \"./margin.js\";\nimport { readSizes } from \"./size.js\";\n/**\n * Read values from image and set it to state\n * @private\n */\nexport async function readValuesFromImage(j, state) {\n    const { sourceImage: image, values } = state;\n    readAlign(image, values);\n    // Border radius\n    values.borderRadius = parseInt(image.style.borderRadius || '0', 10) || 0;\n    // Id\n    values.id = attr(image, 'id') || '';\n    // Title\n    values.imageTitle = attr(image, 'title') || '';\n    // Alt\n    values.imageAlt = attr(image, 'alt') || '';\n    // Style\n    values.style = attr(image, 'style') || '';\n    // Classes\n    values.classes = (attr(image, 'class') || '').replace(/jodit_focused_image[\\s]*/, '');\n    // Margins\n    readMargins(image, values, state);\n    // Link\n    readLink(state, j, values);\n    // Src\n    values.imageSrc = attr(image, 'src') || '';\n    // Image size\n    return readSizes(image, values, state);\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { css } from \"../../../core/helpers/utils/css.js\";\n/**\n * @private\n */\nexport function readAlign(image, values) {\n    // Align\n    if (image.style.cssFloat &&\n        ['left', 'right'].indexOf(image.style.cssFloat.toLowerCase()) !== -1) {\n        values.align = css(image, 'float');\n    }\n    else {\n        if (css(image, 'display') === 'block' &&\n            image.style.marginLeft === 'auto' &&\n            image.style.marginRight === 'auto') {\n            values.align = 'center';\n        }\n        else {\n            values.align = '';\n        }\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/image-properties\n */\nimport { kebabCase } from \"../../../core/helpers/string/kebab-case.js\";\n/** @private */\nexport function readMargins(image, values, state) {\n    // Margins\n    let equal = true, wasEmptyField = false;\n    ['marginTop', 'marginRight', 'marginBottom', 'marginLeft'].forEach(id => {\n        let value = image.style.getPropertyValue(kebabCase(id));\n        if (!value) {\n            wasEmptyField = true;\n            values[id] = 0;\n            return;\n        }\n        if (/^[0-9]+(px)?$/.test(value)) {\n            value = parseInt(value, 10);\n        }\n        values[id] = value;\n        if ((wasEmptyField && values[id]) ||\n            (equal && id !== 'marginTop' && values[id] !== values.marginTop)) {\n            equal = false;\n        }\n    });\n    state.marginIsLocked = equal;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../core/dom/dom.js\";\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\n/** @private */\nexport function readLink(state, j, values) {\n    const a = Dom.closest(state.sourceImage, 'a', j.editor);\n    if (a) {\n        values.imageLink = attr(a, 'href') || '';\n        values.imageLinkOpenInNewTab = attr(a, 'target') === '_blank';\n    }\n    else {\n        values.imageLink = '';\n        values.imageLinkOpenInNewTab = false;\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/image-properties\n */\nimport { isNumeric } from \"../../../core/helpers/checker/is-numeric.js\";\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\nimport { css } from \"../../../core/helpers/utils/css.js\";\nimport { normalSizeFromString } from \"../utils/utils.js\";\n/** @private */\nexport async function readSizes(image, values, state) {\n    await image.decode();\n    const width = css(image, 'width', true) || attr(image, 'width') || false;\n    const height = css(image, 'height', true) || attr(image, 'height') || false;\n    values.imageWidth =\n        width !== false\n            ? normalSizeFromString(width)\n            : image.offsetWidth || image.naturalWidth;\n    if (isNumeric(values.imageWidth)) {\n        values.imageHeight =\n            height !== false\n                ? normalSizeFromString(height)\n                : image.offsetHeight || image.naturalHeight;\n    }\n    else {\n        values.imageHeight = height || '';\n    }\n    const { imageWidth, imageHeight } = values;\n    const w = parseFloat(imageWidth.toString());\n    if (!isNumeric(imageWidth) || !isNumeric(imageHeight)) {\n        state.sizeIsLocked = false;\n        return;\n    }\n    if (height === false) {\n        values.imageHeight = Math.round(w / state.ratio);\n        state.sizeIsLocked = true;\n        return;\n    }\n    const h = parseFloat(imageHeight.toString());\n    state.sizeIsLocked = Math.abs(w - h * state.ratio) < 1;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../core/dom/dom.js\";\nimport { attr, hAlignElement } from \"../../../core/helpers/utils/index.js\";\nimport { applyLink } from \"./link.js\";\nimport { applyMargin } from \"./margin.js\";\nimport { applySize } from \"./size.js\";\n/**\n * Apply form's values to image\n * @private\n */\nexport function applyValuesToImage(j, state, image) {\n    const { style, imageSrc, borderRadius, imageTitle, imageAlt, imageLink, imageWidth, imageHeight, marginTop, marginRight, marginBottom, marginLeft, imageLinkOpenInNewTab, align, classes, id } = state.values;\n    const opt = j.o;\n    // styles\n    if (opt.image.editStyle) {\n        attr(image, 'style', style || null);\n    }\n    // Src\n    if (imageSrc) {\n        attr(image, 'src', imageSrc);\n    }\n    else {\n        Dom.safeRemove(image);\n        return;\n    }\n    // Border radius\n    image.style.borderRadius = borderRadius ? borderRadius + 'px' : '';\n    // Title\n    attr(image, 'title', imageTitle || null);\n    // Alt\n    attr(image, 'alt', imageAlt || null);\n    // Link\n    applyLink(j, image, imageLink, imageLinkOpenInNewTab);\n    // Size\n    applySize(image, imageWidth, imageHeight, state.sizeIsLocked);\n    // Margin\n    if (j.o.image.editMargins) {\n        applyMargin(j, marginTop, marginRight, marginBottom, marginLeft, image, state.marginIsLocked);\n    }\n    if (opt.image.editClass) {\n        attr(image, 'class', classes || null);\n    }\n    if (opt.image.editId) {\n        attr(image, 'id', id || null);\n    }\n    if (opt.image.editAlign) {\n        hAlignElement(image, align);\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../core/dom/dom.js\";\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\n/** @private */\nexport function applyLink(j, image, imageLink, imageLinkOpenInNewTab) {\n    // Link\n    let link = Dom.closest(image, 'a', j.editor);\n    if (imageLink) {\n        if (!link) {\n            link = Dom.wrap(image, 'a', j.createInside);\n        }\n        attr(link, 'href', imageLink);\n        attr(link, 'target', imageLinkOpenInNewTab ? '_blank' : null);\n    }\n    else {\n        if (link && link.parentNode) {\n            link.parentNode.replaceChild(image, link);\n        }\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/image-properties\n */\nimport { isNumeric } from \"../../../core/helpers/checker/is-numeric.js\";\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\nimport { css } from \"../../../core/helpers/utils/css.js\";\nimport { normalSizeToString } from \"../utils/utils.js\";\n/** @private */\nexport function applySize(image, imageWidth, imageHeight, sizeIsLocked) {\n    // Size\n    if (imageWidth !== image.offsetWidth ||\n        imageHeight !== image.offsetHeight) {\n        const updatedWidth = imageWidth ? normalSizeToString(imageWidth) : null;\n        let updatedHeight = imageHeight\n            ? normalSizeToString(imageHeight)\n            : null;\n        css(image, {\n            width: updatedWidth,\n            height: updatedWidth && sizeIsLocked ? null : updatedHeight\n        });\n        attr(image, 'width', updatedWidth && isNumeric(imageWidth) && attr(image, 'width')\n            ? updatedWidth\n            : null);\n        if (!attr(image, 'width') || sizeIsLocked) {\n            updatedHeight = null;\n        }\n        attr(image, 'height', updatedHeight);\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { css } from \"../../../core/helpers/utils/css.js\";\nimport { normalSizeToString } from \"../utils/utils.js\";\n/** @private */\nexport function applyMargin(j, marginTop, marginRight, marginBottom, marginLeft, image, marginIsLocked) {\n    const margins = [marginTop, marginRight, marginBottom, marginLeft];\n    const applyMargin = (key, value) => {\n        const oldValue = css(image, key);\n        const v = normalSizeToString(value);\n        if (oldValue.toString() !== v.toString()) {\n            css(image, key, v);\n        }\n    };\n    if (!marginIsLocked) {\n        const sides = [\n            'margin-top',\n            'margin-right',\n            'margin-bottom',\n            'margin-left'\n        ];\n        margins.forEach((margin, index) => {\n            const side = sides[index];\n            applyMargin(side, margin);\n        });\n    }\n    else {\n        applyMargin('margin', marginTop);\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { cache, cached, watch } from \"../../core/decorators/index.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { isAbortError, isNumeric, markOwner } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/plugin.js\";\nimport { Button } from \"../../core/ui/button/index.js\";\nimport \"./config.js\";\nimport { UIImagePropertiesForm } from \"./ui/ui-image-form.js\";\nimport { openImageEditorDialog } from \"./utils/open-image-editor.js\";\nimport { openImagePopup } from \"./utils/open-image-popup.js\";\nimport { readValuesFromImage } from \"./readers/index.js\";\nimport { applyValuesToImage } from \"./writers/index.js\";\n/**\n * Plug-in for image editing window\n *\n * @example\n * ```javascript\n * const editor = Jodit.make('#editor', {\n *     image: {\n *         editSrc: false,\n *         editLink: false\n *     }\n * });\n * ```\n */\n/**\n * Show dialog with image's options\n */\nexport class imageProperties extends Plugin {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            image: new Image(),\n            sourceImage: new Image(),\n            get ratio() {\n                const { naturalWidth, naturalHeight } = this.image;\n                return naturalWidth / naturalHeight || 1;\n            },\n            sizeIsLocked: true,\n            marginIsLocked: true,\n            values: {\n                style: '',\n                imageSrc: '',\n                borderRadius: 0,\n                imageTitle: '',\n                imageAlt: '',\n                imageLink: '',\n                imageLinkOpenInNewTab: false,\n                imageWidth: 0,\n                imageHeight: 0,\n                marginTop: 0,\n                marginRight: 0,\n                marginBottom: 0,\n                marginLeft: 0,\n                classes: '',\n                id: '',\n                align: ''\n            }\n        };\n        this.activeTabState = {\n            activeTab: 'Image'\n        };\n    }\n    get form() {\n        return new UIImagePropertiesForm(this.j, this.state, this.activeTabState, {\n            openImageEditor: () => openImageEditorDialog(this.j, this.state),\n            openImagePopup: target => openImagePopup(this.j, this.dialog, this.state, target)\n        });\n    }\n    /**\n     * Dialog for form\n     */\n    get dialog() {\n        const { j } = this;\n        const dialog = j.dlg({\n            minWidth: Math.min(400, screen.width),\n            minHeight: 590,\n            buttons: ['fullsize', 'dialog.close']\n        });\n        const buttons = this.__buttons;\n        buttons.check.onAction(() => {\n            applyValuesToImage(j, this.state, this.state.sourceImage);\n            j.synchronizeValues();\n            dialog.close();\n        });\n        buttons.remove.onAction(() => {\n            j.s.removeNode(this.state.sourceImage);\n            dialog.close();\n        });\n        buttons.cancel.onAction(() => {\n            dialog.close();\n        });\n        dialog.setHeader(j.i18n('Image properties'));\n        dialog.setContent(this.form);\n        dialog.setFooter([[buttons.cancel, buttons.remove], buttons.check]);\n        j.e.on(dialog, 'afterClose', () => {\n            if (this.state.image.parentNode &&\n                j.o.image.selectImageAfterClose) {\n                j.s.select(this.state.sourceImage);\n            }\n        });\n        dialog.setSize(j.o.image.dialogWidth);\n        markOwner(j, dialog.container);\n        return dialog;\n    }\n    get __buttons() {\n        const { j } = this;\n        return {\n            check: Button(j, 'ok', 'Apply', 'primary'),\n            remove: Button(j, 'bin', 'Delete'),\n            cancel: Button(j, 'cancel', 'Cancel')\n        };\n    }\n    /**\n     * Open dialog editing image properties\n     *\n     * @example\n     * ```javascript\n     * const editor = Jodit.makeJodit('#editor');\n     *     img = editor.createInside.element('img');\n     *\n     * img.setAttribute('src', 'images/some-image.png');\n     * editor.s.insertImage(img);\n     * // open the properties of the editing window\n     * editor.events.fire('openImageProperties', img);\n     * ```\n     */\n    open() {\n        this.activeTabState.activeTab = 'Image';\n        this.__lock();\n        this.dialog.open().setModal(true).setPosition();\n        this.async\n            .promise((resolve, reject) => readValuesFromImage(this.j, this.state).then(resolve, reject))\n            .catch((e) => {\n            if (!isAbortError(e)) {\n                this.dialog.message.error(e.message);\n            }\n        })\n            .finally(() => this.__unlock());\n        return false;\n    }\n    __lock() {\n        this.dialog.lock();\n        this.form.setMod('lock', true);\n        Object.values(this.__buttons).forEach(b => (b.state.disabled = true));\n    }\n    __unlock() {\n        this.dialog.unlock();\n        this.form.setMod('lock', false);\n        Object.values(this.__buttons).forEach(b => (b.state.disabled = false));\n    }\n    /** @override **/\n    afterInit(editor) {\n        const self = this;\n        editor.e\n            .on('afterConstructor changePlace', () => {\n            editor.e\n                .off(editor.editor, '.imageproperties')\n                .on(editor.editor, 'dblclick.imageproperties', (e) => {\n                const image = e.target;\n                if (!Dom.isTag(image, 'img')) {\n                    return;\n                }\n                if (editor.o.image.openOnDblClick) {\n                    if (this.j.e.fire('openOnDblClick', image) ===\n                        false) {\n                        return;\n                    }\n                    self.state.sourceImage = image;\n                    self.state.image = image.cloneNode(true);\n                    if (!editor.o.readonly) {\n                        e.stopImmediatePropagation();\n                        e.preventDefault();\n                        self.open();\n                    }\n                }\n                else {\n                    e.stopImmediatePropagation();\n                    editor.s.select(image);\n                }\n            });\n        })\n            .on('openImageProperties.imageproperties', (image) => {\n            self.state.sourceImage = image;\n            this.state.image = image.cloneNode(true);\n            this.open();\n        });\n    }\n    async onStateValuesImageSrcChange() {\n        const { image, values } = this.state;\n        if (!image.src) {\n            return;\n        }\n        try {\n            this.__lock();\n            await image.decode();\n            if (this.state.sizeIsLocked && isNumeric(values.imageWidth)) {\n                const w = parseFloat(values.imageWidth.toString());\n                values.imageHeight = Math.round(w / this.state.ratio);\n            }\n            this.j.e.fire('updateImageProperties.imageproperties', image);\n        }\n        catch (e) {\n            this.j.alert(e.message);\n        }\n        finally {\n            this.__unlock();\n        }\n    }\n    /** @override */\n    beforeDestruct(editor) {\n        var _a, _b, _c;\n        Object.values((_a = cached(this, '__buttons')) !== null && _a !== void 0 ? _a : {}).forEach(b => b.destruct());\n        (_b = cached(this, 'dialog')) === null || _b === void 0 ? void 0 : _b.destruct();\n        (_c = cached(this, 'form')) === null || _c === void 0 ? void 0 : _c.destruct();\n        editor.e.off(editor.editor, '.imageproperties').off('.imageproperties');\n    }\n}\n__decorate([\n    cache\n], imageProperties.prototype, \"form\", null);\n__decorate([\n    cache\n], imageProperties.prototype, \"dialog\", null);\n__decorate([\n    cache\n], imageProperties.prototype, \"__buttons\", null);\n__decorate([\n    watch('state.image')\n], imageProperties.prototype, \"onStateValuesImageSrcChange\", null);\npluginSystem.add('imageProperties', imageProperties);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { isString } from \"../../../core/helpers/checker/is-string.js\";\nimport { attr } from \"../../../core/helpers/utils/attr.js\";\nimport { openImageEditor } from \"../../../modules/image-editor/image-editor.js\";\n/**\n * Open image editor dialog\n * @private\n */\nexport function openImageEditorDialog(j, state) {\n    const url = attr(state.image, 'src') || '', a = j.c.element('a'), loadExternal = () => {\n        if (a.host !== location.host) {\n            j.confirm('You can only edit your own images. Download this image on the host?', yes => {\n                if (yes && j.uploader) {\n                    j.uploader.uploadRemoteImage(a.href.toString(), resp => {\n                        j.alert('The image has been successfully uploaded to the host!', () => {\n                            if (isString(resp.newfilename)) {\n                                state.values.imageSrc =\n                                    resp.baseurl +\n                                        resp.newfilename;\n                            }\n                        });\n                    }, error => {\n                        j.alert('There was an error loading %s', error.message);\n                    });\n                }\n            });\n            return;\n        }\n    };\n    a.href = url;\n    j.filebrowser.dataProvider\n        .getPathByUrl(a.href.toString())\n        .then(resp => {\n        openImageEditor.call(j.filebrowser, a.href, resp.name, resp.path, resp.source, () => {\n            const timestamp = new Date().getTime();\n            state.values.imageSrc =\n                url +\n                    (url.indexOf('?') !== -1 ? '' : '?') +\n                    '&_tmp=' +\n                    timestamp.toString();\n        }, error => {\n            j.alert(error.message);\n        });\n    })\n        .catch(error => {\n        j.alert(error.message, loadExternal);\n    });\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { isArray } from \"../../../core/helpers/checker/is-array.js\";\nimport { position } from \"../../../core/helpers/size/position.js\";\nimport { Popup } from \"../../../core/ui/popup/popup.js\";\nimport { FileSelectorWidget } from \"../../../modules/widget/file-selector/file-selector.js\";\n/** @private */\nexport function openImagePopup(j, dialog, state, button) {\n    const popup = new Popup(dialog);\n    const closePopup = () => {\n        popup.close();\n        popup.destruct();\n    };\n    popup\n        .setContent(FileSelectorWidget(j, {\n        upload: (data) => {\n            if (data.files && data.files.length) {\n                state.values.imageSrc =\n                    data.baseurl + data.files[0];\n            }\n            closePopup();\n        },\n        filebrowser: async (data) => {\n            if (data && isArray(data.files) && data.files.length) {\n                state.values.imageSrc = data.files[0];\n                closePopup();\n            }\n        }\n    }, state.image, closePopup))\n        .open(() => position(button));\n}\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M352 832q0 14-9 23l-288 288q-9 9-23 9-13 0-22.5-9.5t-9.5-22.5v-576q0-13 9.5-22.5t22.5-9.5q14 0 23 9l288 288q9 9 9 23zm1440 480v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/indent\n */\nimport { Dom } from \"../../core/dom/dom.js\";\n/**\n * Get style rule key for current direction\n * @internal\n */\nexport const getKey = (direction, box) => `${Dom.isCell(box) ? 'padding' : 'margin'}${direction === 'rtl' ? 'Right' : 'Left'}`;\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../core/dom/index.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport indentIcon from \"./icons/indent.svg.js\";\nimport outdentIcon from \"./icons/outdent.svg.js\";\nimport { getKey } from \"./helpers.js\";\nIcon.set('indent', indentIcon).set('outdent', outdentIcon);\nConfig.prototype.controls.indent = {\n    tooltip: 'Increase Indent'\n};\nConfig.prototype.controls.outdent = {\n    isDisabled: (editor) => {\n        const current = editor.s.current();\n        if (current) {\n            const currentBox = Dom.closest(current, Dom.isBlock, editor.editor);\n            if (currentBox) {\n                const arrow = getKey(editor.o.direction, currentBox);\n                return (!currentBox.style[arrow] ||\n                    parseInt(currentBox.style[arrow], 10) <= 0);\n            }\n        }\n        return true;\n    },\n    tooltip: 'Decrease Indent'\n};\nConfig.prototype.indentMargin = 10;\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M384 544v576q0 13-9.5 22.5t-22.5 9.5q-14 0-23-9l-288-288q-9-9-9-23t9-23l288-288q9-9 23-9 13 0 22.5 9.5t9.5 22.5zm1408 768v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { BR } from \"../../core/constants.js\";\nimport { Dom } from \"../../core/dom/index.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { attr, call } from \"../../core/helpers/utils/index.js\";\nimport \"./config.js\";\nimport { getKey } from \"./helpers.js\";\nconst applyIndentToBox = (processedElements, currentBox, editor, command) => {\n    if (!currentBox) {\n        return;\n    }\n    if (processedElements.has(currentBox)) {\n        return;\n    }\n    const key = getKey(editor.o.direction, currentBox);\n    processedElements.add(currentBox);\n    let value = currentBox.style[key] ? parseInt(currentBox.style[key], 10) : 0;\n    value += editor.o.indentMargin * (command === 'outdent' ? -1 : 1);\n    currentBox.style[key] = value > 0 ? value + 'px' : '';\n    if (!attr(currentBox, 'style')) {\n        attr(currentBox, 'style', null);\n    }\n};\n/**\n * Indents the line containing the selection or insertion point.\n */\nexport function indent(editor) {\n    editor\n        .registerButton({\n        name: 'indent',\n        group: 'indent'\n    })\n        .registerButton({\n        name: 'outdent',\n        group: 'indent'\n    });\n    const indentCommand = (command) => {\n        const processedElements = new Set();\n        const { enter, enterBlock } = editor.o;\n        const isBrMode = enter.toLowerCase() === BR;\n        const current = editor.s.current();\n        if (isBrMode && editor.s.isCollapsed()) {\n            if (current) {\n                const box = Dom.wrapNextInline(current, enterBlock, editor);\n                applyIndentToBox(processedElements, box, editor, command);\n                return false;\n            }\n        }\n        editor.s.eachSelection((current) => {\n            editor.s.save();\n            let currentBox = current\n                ? Dom.up(current, Dom.isBlock, editor.editor)\n                : false;\n            if (!currentBox && current) {\n                currentBox = call(!isBrMode ? Dom.wrapInline : Dom.wrapNextInline, current, !isBrMode ? enter.toLowerCase() : enterBlock, editor);\n            }\n            if (!currentBox) {\n                editor.s.restore();\n                return false;\n            }\n            applyIndentToBox(processedElements, currentBox, editor, command);\n            editor.s.restore();\n        });\n        editor.synchronizeValues();\n        return false;\n    };\n    editor.registerCommand('indent', {\n        exec: indentCommand,\n        hotkeys: ['ctrl+]', 'cmd+]']\n    });\n    editor.registerCommand('outdent', {\n        exec: indentCommand,\n        hotkeys: ['ctrl+[', 'cmd+[']\n    });\n}\npluginSystem.add('indent', indent);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { isPlainObject } from \"../../core/helpers/index.js\";\nimport { alignElement } from \"../../core/helpers/utils/align.js\";\nimport { css } from \"../../core/helpers/utils/css.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport justifyIcon from \"./justify.svg.js\";\nIcon.set('justify', justifyIcon);\nConfig.prototype.controls.align = {\n    name: 'left',\n    tooltip: 'Align',\n    update(editor, button) {\n        const control = button.control, current = editor.s.current();\n        if (current) {\n            const currentBox = Dom.closest(current, Dom.isBlock, editor.editor) ||\n                editor.editor;\n            let currentValue = css(currentBox, 'text-align').toString();\n            if (control.defaultValue &&\n                control.defaultValue.indexOf(currentValue) !== -1) {\n                currentValue = 'left';\n            }\n            const { list, data } = control;\n            if (data &&\n                data.currentValue !== currentValue &&\n                list &&\n                (isPlainObject(list)\n                    ? list[currentValue]\n                    : list.includes(currentValue))) {\n                if (editor.o.textIcons || control.component === 'select') {\n                    button.state.text = currentValue;\n                }\n                else {\n                    button.state.icon.name = currentValue;\n                }\n                data.currentValue = currentValue;\n            }\n        }\n    },\n    isActive: (editor, btn) => {\n        const current = editor.s.current();\n        if (!current || !btn.control.defaultValue) {\n            return false;\n        }\n        const currentBox = Dom.closest(current, Dom.isBlock, editor.editor) ||\n            editor.editor;\n        return (btn.control.defaultValue.indexOf(css(currentBox, 'text-align').toString()) === -1);\n    },\n    defaultValue: ['left', 'start', 'inherit'],\n    data: {\n        currentValue: 'left'\n    },\n    list: ['center', 'left', 'right', 'justify']\n};\nConfig.prototype.controls.center = {\n    command: 'justifyCenter',\n    css: {\n        'text-align': 'center'\n    },\n    tooltip: 'Align Center'\n};\nConfig.prototype.controls.justify = {\n    command: 'justifyFull',\n    css: {\n        'text-align': 'justify'\n    },\n    tooltip: 'Align Justify'\n};\nConfig.prototype.controls.left = {\n    command: 'justifyLeft',\n    css: {\n        'text-align': 'left'\n    },\n    tooltip: 'Align Left'\n};\nConfig.prototype.controls.right = {\n    command: 'justifyRight',\n    css: {\n        'text-align': 'right'\n    },\n    tooltip: 'Align Right'\n};\n/**\n * Process commands: `justifyfull`, `justifyleft`, `justifyright`, `justifycenter`\n */\nexport function justify(editor) {\n    editor.registerButton({\n        name: 'align',\n        group: 'indent'\n    });\n    const callback = (command) => {\n        editor.s.focus();\n        editor.s.eachSelection((current) => {\n            if (!current) {\n                return;\n            }\n            let currentBox = Dom.up(current, Dom.isBlock, editor.editor);\n            if (!currentBox) {\n                currentBox = Dom.wrapInline(current, editor.o.enterBlock, editor);\n            }\n            alignElement(command, currentBox);\n        });\n        return false;\n    };\n    editor.registerCommand('justifyfull', callback);\n    editor.registerCommand('justifyright', callback);\n    editor.registerCommand('justifyleft', callback);\n    editor.registerCommand('justifycenter', callback);\n}\npluginSystem.add('justify', justify);\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { memorizeExec } from \"../../core/helpers/index.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport lineHeightIcon from \"./line-height.svg.js\";\nConfig.prototype.defaultLineHeight = null;\nIcon.set('line-height', lineHeightIcon);\nConfig.prototype.controls.lineHeight = {\n    command: 'applyLineHeight',\n    tags: ['ol'],\n    tooltip: 'Line height',\n    list: [1, 1.1, 1.2, 1.3, 1.4, 1.5, 2],\n    exec: (editor, event, { control }) => memorizeExec(editor, event, { control }, (value) => value)\n};\n","export default \"<svg viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path d=\\\"M5.09668 6.99707H7.17358L4.17358 3.99707L1.17358 6.99707H3.09668V17.0031H1.15881L4.15881 20.0031L7.15881 17.0031H5.09668V6.99707Z\\\"/> <path d=\\\"M22.8412 7H8.84119V5H22.8412V7Z\\\"/> <path d=\\\"M22.8412 11H8.84119V9H22.8412V11Z\\\"/> <path d=\\\"M8.84119 15H22.8412V13H8.84119V15Z\\\"/> <path d=\\\"M22.8412 19H8.84119V17H22.8412V19Z\\\"/> </svg> \";\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Vka ry'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Zeilenhhe'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Altura de la lnea'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Rivin korkeus'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Hauteur de ligne'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Vonal magassga'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Tinggi baris'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Altezza linea'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Lijnhoogte'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Wysoko linii'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'Altura da linha'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': 'izgi ykseklii'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    'Line height': ''\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { autobind } from \"../../core/decorators/index.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { extendLang, pluginSystem } from \"../../core/global.js\";\nimport { css } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport \"./config.js\";\nimport * as langs from \"./langs/index.js\";\nexport class lineHeight extends Plugin {\n    constructor(jodit) {\n        super(jodit);\n        this.buttons = [\n            {\n                name: 'lineHeight',\n                group: 'font'\n            }\n        ];\n        extendLang(langs);\n    }\n    afterInit(jodit) {\n        css(jodit.editor, {\n            lineHeight: jodit.o.defaultLineHeight\n        });\n        jodit.registerCommand('applyLineHeight', this.applyLineHeight);\n    }\n    applyLineHeight(ignore, ignoreA, value) {\n        const { s, createInside: c, editor: root, o } = this.j;\n        if (!s.isFocused()) {\n            s.focus();\n        }\n        s.save();\n        let addStyle;\n        const apply = (node) => {\n            let parentBlock = Dom.closest(node, Dom.isBlock, root);\n            if (!parentBlock) {\n                parentBlock = Dom.wrap(node, o.enter, c);\n            }\n            const previousValue = css(parentBlock, 'lineHeight');\n            if (addStyle === undefined) {\n                addStyle = previousValue.toString() !== value.toString();\n            }\n            css(parentBlock, 'lineHeight', addStyle ? value : null);\n        };\n        try {\n            if (s.isCollapsed()) {\n                const fake = c.fake();\n                s.insertNode(fake, false, false);\n                apply(fake);\n                Dom.safeRemove(fake);\n            }\n            else {\n                s.eachSelection(apply);\n            }\n        }\n        finally {\n            s.restore();\n        }\n    }\n    beforeDestruct(jodit) {\n        css(jodit.editor, {\n            lineHeight: null\n        });\n    }\n}\n__decorate([\n    autobind\n], lineHeight.prototype, \"applyLineHeight\", null);\npluginSystem.add('lineHeight', lineHeight);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/media\n */\nimport { Config } from \"../../config.js\";\nConfig.prototype.mediaFakeTag = 'jodit-media';\nConfig.prototype.mediaInFakeBlock = true;\nConfig.prototype.mediaBlocks = ['video', 'audio'];\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport * as consts from \"../../core/constants.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { $$, attr, dataBind } from \"../../core/helpers/utils/index.js\";\nimport \"./config.js\";\n/**\n * Process `video` and `audio`\n */\nexport function media(editor) {\n    const keyFake = 'jodit_fake_wrapper';\n    const { mediaFakeTag, mediaBlocks, mediaInFakeBlock } = editor.options;\n    const wrap = (element) => {\n        if (element.parentNode &&\n            attr(element.parentNode, 'data-jodit_iframe_wrapper')) {\n            element = element.parentNode;\n        }\n        else {\n            const wrapper = editor.createInside.element(mediaFakeTag, {\n                'data-jodit-temp': 1,\n                contenteditable: false,\n                draggable: true,\n                [`data-${keyFake}`]: 1\n            });\n            attr(wrapper, 'style', attr(element, 'style'));\n            wrapper.style.display =\n                element.style.display === 'inline-block'\n                    ? 'inline-block'\n                    : 'block';\n            wrapper.style.width = element.offsetWidth + 'px';\n            wrapper.style.height = element.offsetHeight + 'px';\n            if (element.parentNode) {\n                element.parentNode.insertBefore(wrapper, element);\n            }\n            wrapper.appendChild(element);\n            element = wrapper;\n        }\n        editor.e\n            .off(element, 'mousedown.select touchstart.select')\n            .on(element, 'mousedown.select touchstart.select', () => {\n            editor.s.setCursorAfter(element);\n        });\n    };\n    if (mediaInFakeBlock) {\n        editor.e\n            .on('afterGetValueFromEditor', (data) => {\n            const rxp = new RegExp(`<${mediaFakeTag}[^>]+data-${keyFake}[^>]+>([^]+?)</${mediaFakeTag}>`, 'ig');\n            if (rxp.test(data.value)) {\n                data.value = data.value.replace(rxp, '$1');\n            }\n        })\n            .on('change afterInit afterSetMode changePlace', editor.async.debounce(() => {\n            if (!editor.isDestructed &&\n                editor.getMode() !== consts.MODE_SOURCE) {\n                $$(mediaBlocks.join(','), editor.editor).forEach((elm) => {\n                    if (!dataBind(elm, keyFake)) {\n                        dataBind(elm, keyFake, true);\n                        wrap(elm);\n                    }\n                });\n            }\n        }, editor.defaultTimeout));\n    }\n}\npluginSystem.add('media', media);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { TEXT_PLAIN } from \"../../core/constants.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { isArray, isNumber, isString, isVoid } from \"../../core/helpers/checker/index.js\";\nimport { Button } from \"../../core/ui/button/button/button.js\";\n/**\n * Remove special HTML comments\n * @private\n */\nfunction removeExtraFragments(html) {\n    html = html.replace(/<meta[^>]+?>/g, '');\n    const start = html.search(/<!--StartFragment-->/i);\n    if (start !== -1) {\n        html = html.substring(start + 20);\n    }\n    const end = html.search(/<!--EndFragment-->/i);\n    if (end !== -1) {\n        html = html.substring(0, end);\n    }\n    return html;\n}\n/**\n * @private\n */\nfunction isDragEvent(e) {\n    return Boolean(e && e.type === 'drop');\n}\n/**\n * One insert point for clipboard plugins\n * @private\n */\nexport function pasteInsertHtml(e, editor, html) {\n    if (editor.isInDestruct) {\n        return;\n    }\n    if (isDragEvent(e)) {\n        editor.s.insertCursorAtPoint(e.clientX, e.clientY);\n    }\n    const result = editor.e.fire('beforePasteInsert', html);\n    if (!isVoid(result) &&\n        (isString(result) || isNumber(result) || Dom.isNode(result))) {\n        html = result;\n    }\n    if (isString(html)) {\n        html = removeExtraFragments(html);\n    }\n    editor.s.insertHTML(html);\n}\n/**\n * Return all available data types in event\n * @private\n */\nexport function getAllTypes(dt) {\n    const types = dt.types;\n    let types_str = '';\n    if (isArray(types) ||\n        {}.toString.call(types) === '[object DOMStringList]') {\n        for (let i = 0; i < types.length; i += 1) {\n            types_str += types[i] + ';';\n        }\n    }\n    else {\n        types_str = (types || TEXT_PLAIN).toString() + ';';\n    }\n    return types_str;\n}\n/**\n * Make command dialog\n * @private\n */\nexport function askInsertTypeDialog(jodit, msg, title, callback, buttonList) {\n    if (jodit.e.fire('beforeOpenPasteDialog', msg, title, callback, buttonList) === false) {\n        return;\n    }\n    const dialog = jodit.confirm(`<div style=\"word-break: normal; white-space: normal\">${jodit.i18n(msg)}</div>`, jodit.i18n(title));\n    const buttons = buttonList.map(({ text, value }) => Button(jodit, {\n        text,\n        name: text.toLowerCase(),\n        tabIndex: 0\n    }).onAction(() => {\n        dialog.close();\n        callback(value);\n    }));\n    dialog.e.one(dialog, 'afterClose', () => {\n        if (!jodit.s.isFocused()) {\n            jodit.s.focus();\n        }\n    });\n    const cancel = Button(jodit, {\n        text: 'Cancel',\n        tabIndex: 0\n    }).onAction(() => {\n        dialog.close();\n    });\n    dialog.setFooter([...buttons, cancel]);\n    buttons[0].focus();\n    buttons[0].state.variant = 'primary';\n    jodit.e.fire('afterOpenPasteDialog', dialog, msg, title, callback, buttonList);\n    return dialog;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { KEY_DOWN, KEY_ENTER, KEY_UP, SPACE_REG_EXP } from \"../../core/constants.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { attr, toArray } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/plugin.js\";\nimport { Button } from \"../../core/ui/button/button/button.js\";\n/**\n * Show dialog choose content to paste\n */\nexport class pasteStorage extends Plugin {\n    constructor() {\n        super(...arguments);\n        this.currentIndex = 0;\n        this.list = [];\n        this.container = null;\n        this.listBox = null;\n        this.previewBox = null;\n        this.dialog = null;\n        this.paste = () => {\n            this.j.s.focus();\n            this.j.s.insertHTML(this.list[this.currentIndex]);\n            if (this.currentIndex !== 0) {\n                const buffer = this.list[0];\n                this.list[0] = this.list[this.currentIndex];\n                this.list[this.currentIndex] = buffer;\n            }\n            this.dialog && this.dialog.close();\n            this.j.synchronizeValues();\n            this.j.e.fire('afterPaste');\n        };\n        this.onKeyDown = (e) => {\n            let index = this.currentIndex;\n            if ([KEY_UP, KEY_DOWN, KEY_ENTER].indexOf(e.key) === -1) {\n                return;\n            }\n            if (e.key === KEY_UP) {\n                if (index === 0) {\n                    index = this.list.length - 1;\n                }\n                else {\n                    index -= 1;\n                }\n            }\n            if (e.key === KEY_DOWN) {\n                if (index === this.list.length - 1) {\n                    index = 0;\n                }\n                else {\n                    index += 1;\n                }\n            }\n            if (e.key === KEY_ENTER) {\n                this.paste();\n                return;\n            }\n            if (index !== this.currentIndex) {\n                this.selectIndex(index);\n            }\n            e.stopImmediatePropagation();\n            e.preventDefault();\n        };\n        this.selectIndex = (index) => {\n            if (this.listBox) {\n                toArray(this.listBox.childNodes).forEach((a, i) => {\n                    a.classList.remove('jodit_active');\n                    if (index === i && this.previewBox) {\n                        a.classList.add('jodit_active');\n                        this.previewBox.innerHTML = this.list[index];\n                        a.focus();\n                    }\n                });\n            }\n            this.currentIndex = index;\n        };\n        this.showDialog = () => {\n            if (this.list.length < 2) {\n                return;\n            }\n            this.dialog || this.createDialog();\n            if (this.listBox) {\n                this.listBox.innerHTML = '';\n            }\n            if (this.previewBox) {\n                this.previewBox.innerHTML = '';\n            }\n            this.list.forEach((html, index) => {\n                const a = this.j.c.element('a');\n                a.textContent =\n                    index + 1 + '. ' + html.replace(SPACE_REG_EXP(), '');\n                this.j.e.on(a, 'keydown', this.onKeyDown);\n                attr(a, 'href', '#');\n                attr(a, 'data-index', index.toString());\n                attr(a, 'tab-index', '-1');\n                this.listBox && this.listBox.appendChild(a);\n            });\n            this.dialog && this.dialog.open();\n            this.j.async.setTimeout(() => {\n                this.selectIndex(0);\n            }, 100);\n        };\n    }\n    createDialog() {\n        this.dialog = this.j.dlg();\n        const pasteButton = Button(this.j, 'paste', 'Paste', 'primary');\n        pasteButton.onAction(this.paste);\n        const cancelButton = Button(this.j, '', 'Cancel');\n        cancelButton.onAction(this.dialog.close);\n        this.container = this.j.c.div();\n        this.container.classList.add('jodit-paste-storage');\n        this.listBox = this.j.c.div();\n        this.previewBox = this.j.c.div();\n        this.container.appendChild(this.listBox);\n        this.container.appendChild(this.previewBox);\n        this.dialog.setHeader(this.j.i18n('Choose Content to Paste'));\n        this.dialog.setContent(this.container);\n        this.dialog.setFooter([pasteButton, cancelButton]);\n        this.j.e.on(this.listBox, 'click dblclick', (e) => {\n            const a = e.target;\n            if (Dom.isTag(a, 'a') && a.hasAttribute('data-index')) {\n                this.selectIndex(parseInt(attr(a, '-index') || '0', 10));\n            }\n            if (e.type === 'dblclick') {\n                this.paste();\n            }\n            return false;\n        });\n    }\n    afterInit() {\n        this.j.e\n            .off('afterCopy.paste-storage')\n            .on('pasteStorageList.paste-storage', () => this.list.length)\n            .on('afterCopy.paste-storage', (html) => {\n            if (this.list.indexOf(html) !== -1) {\n                this.list.splice(this.list.indexOf(html), 1);\n            }\n            this.list.unshift(html);\n            if (this.list.length > 5) {\n                this.list.length = 5;\n            }\n        });\n        this.j.registerCommand('showPasteStorage', {\n            exec: this.showDialog,\n            hotkeys: ['ctrl+shift+v', 'cmd+shift+v']\n        });\n    }\n    beforeDestruct() {\n        this.dialog && this.dialog.destruct();\n        this.j.e.off('.paste-storage');\n        Dom.safeRemove(this.previewBox);\n        Dom.safeRemove(this.listBox);\n        Dom.safeRemove(this.container);\n        this.container = null;\n        this.listBox = null;\n        this.previewBox = null;\n        this.dialog = null;\n        this.list = [];\n    }\n}\npluginSystem.add('pasteStorage', pasteStorage);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { INSERT_AS_HTML, INSERT_AS_TEXT, INSERT_ONLY_TEXT } from \"../../core/constants.js\";\nimport { Config } from \"../../config.js\";\nConfig.prototype.askBeforePasteFromWord = true;\nConfig.prototype.processPasteFromWord = true;\nConfig.prototype.defaultActionOnPasteFromWord = null;\nConfig.prototype.pasteFromWordActionList = [\n    { value: INSERT_AS_HTML, text: 'Keep' },\n    { value: INSERT_AS_TEXT, text: 'Clean' },\n    { value: INSERT_ONLY_TEXT, text: 'Insert only Text' }\n];\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { INSERT_AS_HTML, INSERT_AS_TEXT, INSERT_ONLY_TEXT } from \"../../core/constants.js\";\nimport { watch } from \"../../core/decorators/index.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { applyStyles, cleanFromWord, isHtmlFromWord, isString, stripTags } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport \"./config.js\";\nimport { askInsertTypeDialog, pasteInsertHtml } from \"../paste/helpers.js\";\nexport class pasteFromWord extends Plugin {\n    afterInit(jodit) { }\n    beforeDestruct(jodit) { }\n    /**\n     * Try if text is Word's document fragment and try process this\n     */\n    processWordHTML(e, text, texts) {\n        const { j } = this, { processPasteFromWord, askBeforePasteFromWord, defaultActionOnPasteFromWord, defaultActionOnPaste, pasteFromWordActionList } = j.o;\n        if (processPasteFromWord && isHtmlFromWord(text)) {\n            if (askBeforePasteFromWord) {\n                askInsertTypeDialog(j, 'The pasted content is coming from a Microsoft Word/Excel document. ' +\n                    'Do you want to keep the format or clean it up?', 'Word Paste Detected', insertType => {\n                    this.insertFromWordByType(e, text, insertType, texts);\n                }, pasteFromWordActionList);\n            }\n            else {\n                this.insertFromWordByType(e, text, defaultActionOnPasteFromWord || defaultActionOnPaste, texts);\n            }\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Clear extra styles and tags from Word's pasted text\n     */\n    insertFromWordByType(e, html, insertType, texts) {\n        var _a;\n        switch (insertType) {\n            case INSERT_AS_HTML: {\n                html = applyStyles(html);\n                const value = (_a = this.j.events) === null || _a === void 0 ? void 0 : _a.fire('beautifyHTML', html);\n                if (isString(value)) {\n                    html = value;\n                }\n                break;\n            }\n            case INSERT_AS_TEXT: {\n                html = cleanFromWord(html);\n                break;\n            }\n            case INSERT_ONLY_TEXT: {\n                html = stripTags(cleanFromWord(html));\n                break;\n            }\n        }\n        pasteInsertHtml(e, this.j, html);\n    }\n}\npasteFromWord.requires = ['paste'];\n__decorate([\n    watch(':processHTML')\n], pasteFromWord.prototype, \"processWordHTML\", null);\npluginSystem.add('pasteFromWord', pasteFromWord);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { MODE_SOURCE, MODE_WYSIWYG } from \"../../core/constants.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { previewBox } from \"../../core/helpers/utils/print.js\";\nimport { Config } from \"../../config.js\";\nConfig.prototype.controls.preview = {\n    icon: 'eye',\n    command: 'preview',\n    mode: MODE_SOURCE + MODE_WYSIWYG,\n    tooltip: 'Preview'\n};\nexport function preview(editor) {\n    editor.registerButton({\n        name: 'preview'\n    });\n    editor.registerCommand('preview', (_, _1, defaultValue) => {\n        const dialog = editor.dlg();\n        dialog\n            .setSize(1024, 600)\n            .open('', editor.i18n('Preview'))\n            .setModal(true);\n        const [, onDestrcut] = previewBox(editor, defaultValue, 'px', dialog.getElm('content'));\n        dialog.e.on(dialog, 'afterClose', onDestrcut);\n    });\n}\npluginSystem.add('preview', preview);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport * as consts from \"../../core/constants.js\";\nimport { Dom } from \"../../core/dom/index.js\";\nimport { getContainer, pluginSystem } from \"../../core/global.js\";\nimport { defaultLanguage } from \"../../core/helpers/utils/default-language.js\";\nimport { previewBox } from \"../../core/helpers/utils/print.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport { generateCriticalCSS } from \"./lib/generate-critical-css.js\";\nimport printIcon from \"./print.svg.js\";\nIcon.set('print', printIcon);\nConfig.prototype.controls.print = {\n    exec: (editor) => {\n        const iframe = editor.create.element('iframe');\n        Object.assign(iframe.style, {\n            position: 'fixed',\n            right: 0,\n            bottom: 0,\n            width: 0,\n            height: 0,\n            border: 0\n        });\n        getContainer(editor, Config).appendChild(iframe);\n        const afterFinishPrint = () => {\n            editor.e.off(editor.ow, 'mousemove', afterFinishPrint);\n            Dom.safeRemove(iframe);\n        };\n        const myWindow = iframe.contentWindow;\n        if (myWindow) {\n            editor.e\n                .on(myWindow, 'onbeforeunload onafterprint', afterFinishPrint)\n                .on(editor.ow, 'mousemove', afterFinishPrint);\n            if (editor.o.iframe) {\n                editor.e.fire('generateDocumentStructure.iframe', myWindow.document, editor);\n                myWindow.document.body.innerHTML = editor.value;\n            }\n            else {\n                myWindow.document.write('<!doctype html><html lang=\"' +\n                    defaultLanguage(editor.o.language) +\n                    '\"><head><title></title></head><style>' +\n                    generateCriticalCSS(editor) +\n                    '</style><body></body></html>');\n                myWindow.document.close();\n                previewBox(editor, undefined, 'px', myWindow.document.body);\n            }\n            const style = myWindow.document.createElement('style');\n            style.innerHTML = `@media print {\n\t\t\t\t\tbody {\n\t\t\t\t\t\t\t-webkit-print-color-adjust: exact;\n\t\t\t\t\t}\n\t\t\t}`;\n            myWindow.document.head.appendChild(style);\n            myWindow.focus();\n            myWindow.print();\n        }\n    },\n    mode: consts.MODE_SOURCE + consts.MODE_WYSIWYG,\n    tooltip: 'Print'\n};\nexport function print(editor) {\n    editor.registerButton({\n        name: 'print'\n    });\n}\npluginSystem.add('print', print);\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M448 1536h896v-256h-896v256zm0-640h896v-384h-160q-40 0-68-28t-28-68v-160h-640v640zm1152 64q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128 0v416q0 13-9.5 22.5t-22.5 9.5h-224v160q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-160h-224q-13 0-22.5-9.5t-9.5-22.5v-416q0-79 56.5-135.5t135.5-56.5h64v-544q0-40 28-68t68-28h672q40 0 88 20t76 48l152 152q28 28 48 76t20 88v256h64q79 0 135.5 56.5t56.5 135.5z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { toArray } from \"../../../core/helpers/array/to-array.js\";\n/**\n * @private\n */\nexport function generateCriticalCSS(jodit) {\n    const getMatchedCSSRules = (el, css = el.ownerDocument.styleSheets) => {\n        const rules = toArray(css)\n            .map(s => {\n            try {\n                return toArray(s.cssRules);\n            }\n            catch (_a) { }\n            return [];\n        })\n            .flat();\n        return rules.filter((r) => {\n            try {\n                return Boolean(r && el.matches(r.selectorText));\n            }\n            catch (_a) { }\n            return false;\n        });\n    };\n    class CSSCriticalPath {\n        constructor(w, d, opts) {\n            this.css = {};\n            const opt = opts || {};\n            const pushCSS = (r) => {\n                const selectorText = r.selectorText\n                    .split(',')\n                    .map(a => a.trim())\n                    .sort()\n                    .join(',');\n                if (Boolean(this.css[selectorText]) === false) {\n                    this.css[selectorText] = {};\n                }\n                const styles = r.style.cssText.split(/;(?![A-Za-z0-9])/);\n                for (let i = 0; i < styles.length; i++) {\n                    if (!styles[i]) {\n                        continue;\n                    }\n                    const pair = styles[i].split(':');\n                    pair[0] = pair[0].trim();\n                    pair[1] = pair[1].trim();\n                    this.css[selectorText][pair[0]] = pair[1].replace(/var\\(([^)]+)\\)/g, (varValue, key) => {\n                        const [name, def] = key.split(',');\n                        return (jodit.ew\n                            .getComputedStyle(jodit.editor)\n                            .getPropertyValue(name.trim()) ||\n                            def ||\n                            varValue).trim();\n                    });\n                }\n            };\n            const parseTree = () => {\n                // Get a list of all the elements in the view.\n                const height = w.innerHeight;\n                const walker = d.createTreeWalker(jodit.editor, NodeFilter.SHOW_ELEMENT, () => NodeFilter.FILTER_ACCEPT);\n                while (walker.nextNode()) {\n                    const node = walker.currentNode;\n                    const rect = node.getBoundingClientRect();\n                    if (rect.top < height || opt.scanFullPage) {\n                        const rules = getMatchedCSSRules(node);\n                        if (rules) {\n                            for (let r = 0; r < rules.length; r++) {\n                                pushCSS(rules[r]);\n                            }\n                        }\n                    }\n                }\n            };\n            parseTree();\n        }\n        generateCSS() {\n            let finalCSS = '';\n            for (const k in this.css) {\n                if (/:not\\(/.test(k)) {\n                    continue;\n                }\n                finalCSS += k + ' { ';\n                for (const j in this.css[k]) {\n                    finalCSS += j + ': ' + this.css[k][j] + '; ';\n                }\n                finalCSS += '}\\n';\n            }\n            return finalCSS;\n        }\n    }\n    try {\n        const cp = new CSSCriticalPath(jodit.ew, jodit.ed, {\n            scanFullPage: true\n        });\n        return cp.generateCSS();\n    }\n    catch (_a) { }\n    return '';\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Config } from \"../../config.js\";\nConfig.prototype.allowResizeTags = new Set(['img', 'iframe', 'table', 'jodit']);\nConfig.prototype.resizer = {\n    showSize: true,\n    hideSizeTimeout: 1000,\n    forImageChangeAttributes: true,\n    min_width: 10,\n    min_height: 10,\n    useAspectRatio: new Set(['img'])\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as consts from \"../../core/constants.js\";\nimport { IS_ES_NEXT, IS_IE, KEY_ALT } from \"../../core/constants.js\";\nimport { autobind, watch } from \"../../core/decorators/index.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { eventEmitter, pluginSystem } from \"../../core/global.js\";\nimport { $$, attr, css, dataBind, innerWidth, markOwner, offset } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/plugin.js\";\nimport \"./config.js\";\nconst keyBInd = '__jodit-resizer_binded';\n/**\n * The module creates a supporting frame for resizing of the elements img and table\n */\nexport class resizer extends Plugin {\n    constructor() {\n        super(...arguments);\n        this.LOCK_KEY = 'resizer';\n        this.element = null;\n        this.isResizeMode = false;\n        this.isShown = false;\n        this.startX = 0;\n        this.startY = 0;\n        this.width = 0;\n        this.height = 0;\n        this.ratio = 0;\n        this.rect = this.j.c.fromHTML(`<div title=\"${this.j.i18n('Press Alt for custom resizing')}\" class=\"jodit-resizer\">\n\t\t\t\t<div class=\"jodit-resizer__top-left\"></div>\n\t\t\t\t<div class=\"jodit-resizer__top-right\"></div>\n\t\t\t\t<div class=\"jodit-resizer__bottom-right\"></div>\n\t\t\t\t<div class=\"jodit-resizer__bottom-left\"></div>\n\t\t\t\t<span>100x100</span>\n\t\t\t</div>`);\n        this.sizeViewer = this.rect.getElementsByTagName('span')[0];\n        this.pointerX = 0;\n        this.pointerY = 0;\n        this.isAltMode = false;\n        this.onClickElement = (element) => {\n            if (this.isResizeMode) {\n                return;\n            }\n            if (this.element !== element || !this.isShown) {\n                this.element = element;\n                this.show();\n                if (Dom.isTag(this.element, 'img') && !this.element.complete) {\n                    this.j.e.one(this.element, 'load', this.updateSize);\n                }\n            }\n        };\n        this.updateSize = () => {\n            if (this.isInDestruct || !this.isShown) {\n                return;\n            }\n            if (this.element && this.rect) {\n                const workplacePosition = this.getWorkplacePosition();\n                const pos = offset(this.element, this.j, this.j.ed), left = parseInt(this.rect.style.left || '0', 10), top = parseInt(this.rect.style.top || '0', 10), w = this.rect.offsetWidth, h = this.rect.offsetHeight;\n                const newTop = pos.top - workplacePosition.top, newLeft = pos.left - workplacePosition.left;\n                if (top !== newTop ||\n                    left !== newLeft ||\n                    w !== this.element.offsetWidth ||\n                    h !== this.element.offsetHeight) {\n                    css(this.rect, {\n                        top: newTop,\n                        left: newLeft,\n                        width: this.element.offsetWidth,\n                        height: this.element.offsetHeight\n                    });\n                    if (this.j.events) {\n                        this.j.e.fire(this.element, 'changesize');\n                        // check for first init. Ex. inlinePopup hides when it was fired\n                        if (!isNaN(left)) {\n                            this.j.e.fire('resize');\n                        }\n                    }\n                }\n            }\n        };\n        this.hideSizeViewer = () => {\n            this.sizeViewer.style.opacity = '0';\n        };\n    }\n    /** @override */\n    afterInit(editor) {\n        $$('div', this.rect).forEach((resizeHandle) => {\n            editor.e.on(resizeHandle, 'mousedown.resizer touchstart.resizer', this.onStartResizing.bind(this, resizeHandle));\n        });\n        eventEmitter.on('hideHelpers', this.hide);\n        editor.e\n            .on('readonly', (isReadOnly) => {\n            if (isReadOnly) {\n                this.hide();\n            }\n        })\n            .on('afterInit changePlace', this.addEventListeners.bind(this))\n            .on('afterGetValueFromEditor.resizer', (data) => {\n            const rgx = /<jodit[^>]+data-jodit_iframe_wrapper[^>]+>(.*?<iframe[^>]*>.*?<\\/iframe>.*?)<\\/jodit>/gi;\n            if (rgx.test(data.value)) {\n                data.value = data.value.replace(rgx, '$1');\n            }\n        });\n        this.addEventListeners();\n        this.__onChangeEditor();\n    }\n    /**\n     * Click in the editor area\n     */\n    onEditorClick(e) {\n        let node = e.target;\n        const { editor, options: { allowResizeTags } } = this.j;\n        while (node && node !== editor) {\n            if (Dom.isTag(node, allowResizeTags)) {\n                this.__bind(node);\n                this.onClickElement(node);\n                return;\n            }\n            node = node.parentNode;\n        }\n    }\n    __afterInsertImage(image) {\n        if (this.j.o.resizer.forImageChangeAttributes) {\n            return;\n        }\n        const width = attr(image, 'width');\n        if (width && !css(image, 'width', true)) {\n            css(image, 'width', width);\n            attr(image, 'width', null);\n        }\n    }\n    addEventListeners() {\n        const editor = this.j;\n        editor.e\n            .off(editor.editor, '.resizer')\n            .off(editor.ow, '.resizer')\n            .on(editor.editor, 'keydown.resizer', (e) => {\n            if (this.isShown &&\n                e.key === consts.KEY_DELETE &&\n                this.element &&\n                !Dom.isTag(this.element, 'table')) {\n                this.onDelete(e);\n            }\n        })\n            .on(editor.ow, 'resize.resizer', this.updateSize)\n            .on('resize.resizer', this.updateSize)\n            .on([editor.ow, editor.editor], 'scroll.resizer', () => {\n            if (this.isShown && !this.isResizeMode) {\n                this.hide();\n            }\n        })\n            .on(editor.ow, 'keydown.resizer', this.onKeyDown)\n            .on(editor.ow, 'keyup.resizer', this.onKeyUp)\n            .on(editor.ow, 'mouseup.resizer touchend.resizer', this.onClickOutside);\n    }\n    onStartResizing(resizeHandle, e) {\n        if (!this.element || !this.element.parentNode) {\n            this.hide();\n            return false;\n        }\n        this.handle = resizeHandle;\n        if (e.cancelable) {\n            e.preventDefault();\n        }\n        e.stopImmediatePropagation();\n        this.width = this.element.offsetWidth;\n        this.height = this.element.offsetHeight;\n        this.ratio = this.width / this.height;\n        this.isResizeMode = true;\n        this.startX = e.clientX;\n        this.startY = e.clientY;\n        this.pointerX = e.clientX;\n        this.pointerY = e.clientY;\n        const { j } = this;\n        j.e.fire('hidePopup');\n        j.lock(this.LOCK_KEY);\n        j.e.on(j.ow, 'mousemove.resizer touchmove.resizer', this.onResize);\n    }\n    onEndResizing() {\n        const { j } = this;\n        j.unlock();\n        this.isResizeMode = false;\n        this.isAltMode = false;\n        j.synchronizeValues();\n        j.e.off(j.ow, 'mousemove.resizer touchmove.resizer', this.onResize);\n    }\n    onResize(e) {\n        if (this.isResizeMode) {\n            if (!this.element) {\n                return;\n            }\n            this.pointerX = e.clientX;\n            this.pointerY = e.clientY;\n            let diff_x, diff_y;\n            if (this.j.options.iframe) {\n                const workplacePosition = this.getWorkplacePosition();\n                diff_x = e.clientX + workplacePosition.left - this.startX;\n                diff_y = e.clientY + workplacePosition.top - this.startY;\n            }\n            else {\n                diff_x = this.pointerX - this.startX;\n                diff_y = this.pointerY - this.startY;\n            }\n            const className = this.handle.className;\n            let new_w = 0, new_h = 0;\n            const uar = this.j.o.resizer.useAspectRatio;\n            if (!this.isAltMode &&\n                (uar === true || (uar && Dom.isTag(this.element, uar)))) {\n                if (diff_x) {\n                    new_w =\n                        this.width +\n                            (className.match(/left/) ? -1 : 1) * diff_x;\n                    new_h = Math.round(new_w / this.ratio);\n                }\n                else {\n                    new_h =\n                        this.height +\n                            (className.match(/top/) ? -1 : 1) * diff_y;\n                    new_w = Math.round(new_h * this.ratio);\n                }\n                if (new_w > innerWidth(this.j.editor, this.j.ow)) {\n                    new_w = innerWidth(this.j.editor, this.j.ow);\n                    new_h = Math.round(new_w / this.ratio);\n                }\n            }\n            else {\n                new_w =\n                    this.width + (className.match(/left/) ? -1 : 1) * diff_x;\n                new_h =\n                    this.height + (className.match(/top/) ? -1 : 1) * diff_y;\n            }\n            if (new_w > this.j.o.resizer.min_width) {\n                if (new_w < this.rect.parentNode.offsetWidth) {\n                    this.applySize(this.element, 'width', new_w);\n                }\n                else {\n                    this.applySize(this.element, 'width', '100%');\n                }\n            }\n            if (new_h > this.j.o.resizer.min_height) {\n                this.applySize(this.element, 'height', new_h);\n            }\n            this.updateSize();\n            this.showSizeViewer(this.element.offsetWidth, this.element.offsetHeight);\n            e.stopImmediatePropagation();\n        }\n    }\n    onKeyDown(e) {\n        this.isAltMode = e.key === KEY_ALT;\n        if (!this.isAltMode && this.isResizeMode) {\n            this.onEndResizing();\n        }\n    }\n    onKeyUp() {\n        if (this.isAltMode && this.isResizeMode && this.element) {\n            this.width = this.element.offsetWidth;\n            this.height = this.element.offsetHeight;\n            this.ratio = this.width / this.height;\n            this.startX = this.pointerX;\n            this.startY = this.pointerY;\n        }\n        this.isAltMode = false;\n    }\n    onClickOutside(e) {\n        if (!this.isShown) {\n            return;\n        }\n        if (!this.isResizeMode) {\n            return this.hide();\n        }\n        e.stopImmediatePropagation();\n        this.onEndResizing();\n    }\n    getWorkplacePosition() {\n        return offset((this.rect.parentNode || this.j.od.documentElement), this.j, this.j.od, true);\n    }\n    applySize(element, key, value) {\n        const changeAttrs = Dom.isImage(element) && this.j.o.resizer.forImageChangeAttributes;\n        if (changeAttrs) {\n            attr(element, key, value);\n        }\n        if (!changeAttrs || element.style[key]) {\n            css(element, key, value);\n        }\n    }\n    onDelete(e) {\n        if (!this.element) {\n            return;\n        }\n        if (this.element.tagName !== 'JODIT') {\n            this.j.s.select(this.element);\n        }\n        else {\n            Dom.safeRemove(this.element);\n            this.hide();\n            e.preventDefault();\n        }\n    }\n    __onChangeEditor() {\n        if (this.isShown) {\n            if (!this.element || !this.element.parentNode) {\n                this.hide();\n            }\n            else {\n                this.updateSize();\n            }\n        }\n        $$('iframe', this.j.editor).forEach(this.__bind);\n    }\n    /**\n     * Bind an edit element to element\n     * @param element - The element that you want to add a function to resize\n     */\n    __bind(element) {\n        if (!Dom.isHTMLElement(element) ||\n            !this.j.o.allowResizeTags.has(element.tagName.toLowerCase()) ||\n            dataBind(element, keyBInd)) {\n            return;\n        }\n        dataBind(element, keyBInd, true);\n        let wrapper;\n        if (Dom.isTag(element, 'iframe')) {\n            const iframe = element;\n            if (Dom.isHTMLElement(element.parentNode) &&\n                attr(element.parentNode, '-jodit_iframe_wrapper')) {\n                element = element.parentNode;\n            }\n            else {\n                wrapper = this.j.createInside.element('jodit', {\n                    'data-jodit-temp': 1,\n                    contenteditable: false,\n                    draggable: true,\n                    'data-jodit_iframe_wrapper': 1\n                });\n                attr(wrapper, 'style', attr(element, 'style'));\n                css(wrapper, {\n                    display: element.style.display === 'inline-block'\n                        ? 'inline-block'\n                        : 'block',\n                    width: element.offsetWidth,\n                    height: element.offsetHeight\n                });\n                if (element.parentNode) {\n                    element.parentNode.insertBefore(wrapper, element);\n                }\n                wrapper.appendChild(element);\n                this.j.e.on(wrapper, 'click', () => {\n                    attr(wrapper, 'data-jodit-wrapper_active', true);\n                });\n                element = wrapper;\n            }\n            this.j.e\n                .off(element, 'mousedown.select touchstart.select')\n                .on(element, 'mousedown.select touchstart.select', () => {\n                this.j.s.select(element);\n            })\n                .off(element, 'changesize')\n                .on(element, 'changesize', () => {\n                iframe.setAttribute('width', element.offsetWidth + 'px');\n                iframe.setAttribute('height', element.offsetHeight + 'px');\n            });\n        }\n        this.j.e.on(element, 'dragstart', this.hide);\n        if (!IS_ES_NEXT && IS_IE) {\n            // for IE don't show native resizer\n            this.j.e.on(element, 'mousedown', (event) => {\n                if (Dom.isTag(element, 'img')) {\n                    event.preventDefault();\n                }\n            });\n        }\n    }\n    showSizeViewer(w, h) {\n        if (!this.j.o.resizer.showSize) {\n            return;\n        }\n        if (w < this.sizeViewer.offsetWidth ||\n            h < this.sizeViewer.offsetHeight) {\n            this.hideSizeViewer();\n            return;\n        }\n        this.sizeViewer.style.opacity = '1';\n        this.sizeViewer.textContent = `${w} x ${h}`;\n        this.j.async.setTimeout(this.hideSizeViewer, {\n            timeout: this.j.o.resizer.hideSizeTimeout,\n            label: 'hideSizeViewer'\n        });\n    }\n    /**\n     * Show resizer\n     */\n    show() {\n        if (this.j.o.readonly || this.isShown) {\n            return;\n        }\n        this.isShown = true;\n        if (!this.rect.parentNode) {\n            markOwner(this.j, this.rect);\n            this.j.workplace.appendChild(this.rect);\n        }\n        if (this.j.isFullSize) {\n            this.rect.style.zIndex = css(this.j.container, 'zIndex').toString();\n        }\n        this.updateSize();\n    }\n    /**\n     * Hide resizer\n     */\n    hide() {\n        if (!this.isResizeMode) {\n            this.isResizeMode = false;\n            this.isShown = false;\n            this.element = null;\n            Dom.safeRemove(this.rect);\n            $$(\"[data-jodit-wrapper_active='true']\", this.j.editor).forEach(elm => attr(elm, 'data-jodit-wrapper_active', false));\n        }\n    }\n    beforeDestruct(jodit) {\n        this.hide();\n        eventEmitter.off('hideHelpers', this.hide);\n        jodit.e.off(this.j.ow, '.resizer').off('.resizer');\n    }\n}\n__decorate([\n    watch(':click')\n], resizer.prototype, \"onEditorClick\", null);\n__decorate([\n    watch(':afterInsertImage')\n], resizer.prototype, \"__afterInsertImage\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"onStartResizing\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"onEndResizing\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"onResize\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"onKeyDown\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"onKeyUp\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"onClickOutside\", null);\n__decorate([\n    watch(':change')\n], resizer.prototype, \"__onChangeEditor\", null);\n__decorate([\n    autobind\n], resizer.prototype, \"__bind\", null);\n__decorate([\n    autobind,\n    watch(':hideResizer')\n], resizer.prototype, \"hide\", null);\npluginSystem.add('resizer', resizer);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { globalWindow } from \"../../core/constants.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport \"./interface.js\";\nimport searchIcon from \"./search.svg.js\";\nConfig.prototype.useSearch = true;\nConfig.prototype.search = {\n    lazyIdleTimeout: 0,\n    useCustomHighlightAPI: globalWindow && typeof globalWindow.Highlight !== 'undefined'\n};\nIcon.set('search', searchIcon);\nConfig.prototype.controls.find = {\n    tooltip: 'Find',\n    icon: 'search',\n    exec(jodit, _, { control }) {\n        const value = control.args && control.args[0];\n        switch (value) {\n            case 'findPrevious':\n                jodit.e.fire('searchPrevious');\n                break;\n            case 'findNext':\n                jodit.e.fire('searchNext');\n                break;\n            case 'replace':\n                jodit.execCommand('openReplaceDialog');\n                break;\n            default:\n                jodit.execCommand('openSearchDialog');\n        }\n    },\n    list: {\n        search: 'Find',\n        findNext: 'Find Next',\n        findPrevious: 'Find Previous',\n        replace: 'Replace'\n    },\n    childTemplate: (_, k, v) => v\n};\n","export default \"<svg viewBox=\\\"0 0 500 500\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path clip-rule=\\\"evenodd\\\" d=\\\"M306.39,154.09c19.628,4.543,35.244,21.259,39.787,39.523 c1.551,8.54,8.998,14.989,17.904,14.989c9.991,0,18.168-8.175,18.168-18.17c0-13.083-10.991-32.98-25.985-47.881 c-14.719-14.537-32.252-24.802-46.695-24.802c-9.991,0-18.172,8.45-18.172,18.446C291.396,145.094,297.847,152.546,306.39,154.09z M56.629,392.312c-14.09,14.08-14.09,36.979,0,51.059c14.08,14.092,36.981,14.092,50.965,0l104.392-104.303 c24.347,15.181,53.062,23.991,83.953,23.991c87.857,0,158.995-71.142,158.995-158.999c0-87.854-71.138-158.995-158.995-158.995 c-87.856,0-158.995,71.141-158.995,158.995c0,30.802,8.819,59.606,23.992,83.953L56.629,392.312z M182.371,204.06 c0-62.687,50.875-113.568,113.568-113.568s113.569,50.881,113.569,113.568c0,62.694-50.876,113.569-113.569,113.569 S182.371,266.754,182.371,204.06z\\\" fill-rule=\\\"evenodd\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { globalWindow } from \"../../../core/constants.js\";\nimport { Dom } from \"../../../core/dom/dom.js\";\nimport { $$ } from \"../../../core/helpers/utils/selector.js\";\n/**\n * @private\n */\nconst TMP_ATTR = 'jd-tmp-selection';\n/**\n * @private\n */\nexport function highlightTextRanges(jodit, rng, restRanges, ci, root) {\n    if (rng.startContainer.nodeValue == null ||\n        rng.endContainer.nodeValue == null) {\n        return;\n    }\n    if (checkNativeSelectionMethod(jodit, rng, restRanges)) {\n        return;\n    }\n    const span = ci.element('span', {\n        [TMP_ATTR]: true\n    });\n    Dom.markTemporary(span);\n    normalizeRanges(rng, restRanges, ci);\n    let next = rng.startContainer;\n    do {\n        if (!next) {\n            break;\n        }\n        if (Dom.isText(next) && !isSelectionWrapper(next.parentNode)) {\n            Dom.wrap(next, span.cloneNode(), ci);\n        }\n        if (next === rng.endContainer) {\n            break;\n        }\n        let step = next.firstChild || next.nextSibling;\n        if (!step) {\n            while (next && !next.nextSibling && next !== root) {\n                next = next.parentNode;\n            }\n            step = next === null || next === void 0 ? void 0 : next.nextSibling;\n        }\n        next = step;\n    } while (next && next !== root);\n}\n/**\n * @private\n */\nexport function getSelectionWrappers(root) {\n    return $$(`[${TMP_ATTR}]`, root);\n}\n/**\n * @private\n */\nexport function clearSelectionWrappers(jodit) {\n    getSelectionWrappers(jodit.editor).forEach(span => Dom.unwrap(span));\n    clearNativeSelection(jodit);\n}\n/**\n * @private\n */\nexport function clearSelectionWrappersFromHTML(root) {\n    return root.replace(RegExp(`<span[^>]+${TMP_ATTR}[^>]+>(.*?)</span>`, 'g'), '$1');\n}\n/**\n * @private\n */\nfunction isSelectionWrapper(node) {\n    return Dom.isElement(node) && node.hasAttribute(TMP_ATTR);\n}\nfunction checkNativeSelectionMethod(jodit, rng, restRanges) {\n    if (jodit.o.search.useCustomHighlightAPI &&\n        // @ts-ignore Because Highlight is not defined in the types TS 5.3.3\n        globalWindow &&\n        typeof globalWindow.Highlight !== 'undefined') {\n        const ranges = [rng, ...restRanges].map(rng => {\n            const range = jodit.selection.createRange();\n            range.setStart(rng.startContainer, rng.startOffset);\n            range.setEnd(rng.endContainer, rng.endOffset);\n            return range;\n        });\n        const searchHighlight = new Highlight(...ranges);\n        // @ts-ignore\n        CSS.highlights.clear();\n        // @ts-ignore\n        CSS.highlights.set('jodit-search-result', searchHighlight);\n        restRanges.length = 0;\n        return true;\n    }\n    return false;\n}\nexport function clearNativeSelection(jodit) {\n    if (jodit.o.search.useCustomHighlightAPI &&\n        // @ts-ignore Because Highlight is not defined in the types TS 5.3.3\n        globalWindow &&\n        typeof globalWindow.Highlight !== 'undefined') {\n        // @ts-ignore\n        CSS.highlights.clear();\n    }\n}\nfunction normalizeRanges(rng, restRanges, ci) {\n    const startText = rng.startContainer.nodeValue;\n    let diff = 0;\n    if (rng.startOffset !== 0) {\n        const text = ci.text(startText.substring(0, rng.startOffset));\n        rng.startContainer.nodeValue = startText.substring(rng.startOffset);\n        Dom.before(rng.startContainer, text);\n        if (rng.startContainer === rng.endContainer) {\n            diff = rng.startOffset;\n            rng.endOffset -= diff;\n        }\n        rng.startOffset = 0;\n    }\n    const endText = rng.endContainer.nodeValue;\n    if (rng.endOffset !== endText.length) {\n        const text = ci.text(endText.substring(rng.endOffset));\n        rng.endContainer.nodeValue = endText.substring(0, rng.endOffset);\n        Dom.after(rng.endContainer, text);\n        for (const range of restRanges) {\n            if (range.startContainer === rng.endContainer) {\n                range.startContainer = text;\n                range.startOffset = range.startOffset - rng.endOffset - diff;\n                if (range.endContainer === rng.endContainer) {\n                    range.endContainer = text;\n                    range.endOffset = range.endOffset - rng.endOffset - diff;\n                }\n            }\n            else {\n                break;\n            }\n        }\n        rng.endOffset = rng.endContainer.nodeValue.length;\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { fuzzySearchIndex } from \"../../../core/helpers/string/fuzzy-search-index.js\";\nexport class SentenceFinder {\n    constructor(searchIndex = fuzzySearchIndex) {\n        this.searchIndex = searchIndex;\n        this.queue = [];\n        this.value = '';\n    }\n    add(node) {\n        var _a;\n        const value = ((_a = node.nodeValue) !== null && _a !== void 0 ? _a : '').toLowerCase();\n        if (!value.length) {\n            return;\n        }\n        const index = this.value.length;\n        this.queue.push({\n            startIndex: index,\n            endIndex: index + value.length,\n            node\n        });\n        this.value += value;\n    }\n    ranges(needle, position = 0) {\n        const results = [];\n        let index = position, len = 0, startQueueIndex = 0;\n        // Find all ranges in substring\n        do {\n            [index, len] = this.searchIndex(needle, this.value, index);\n            if (index !== -1) {\n                let startContainer, startOffset = 0, endContainer, endOffset = 0;\n                for (let i = startQueueIndex; i < this.queue.length; i += 1) {\n                    if (!startContainer && this.queue[i].endIndex > index) {\n                        startContainer = this.queue[i].node;\n                        startOffset = index - this.queue[i].startIndex;\n                    }\n                    if (startContainer &&\n                        this.queue[i].endIndex >= index + len) {\n                        endContainer = this.queue[i].node;\n                        endOffset = index + len - this.queue[i].startIndex;\n                        startQueueIndex = i;\n                        break;\n                    }\n                }\n                if (startContainer && endContainer) {\n                    results.push({\n                        startContainer,\n                        startOffset,\n                        endContainer,\n                        endOffset\n                    });\n                }\n                index += len;\n            }\n        } while (index !== -1);\n        return results.length === 0 ? null : results;\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { MODE_WYSIWYG } from \"../../../core/constants.js\";\nimport * as consts from \"../../../core/constants.js\";\nimport { autobind, component, watch } from \"../../../core/decorators/index.js\";\nimport { Dom } from \"../../../core/dom/index.js\";\nimport { css, position, refs, trim } from \"../../../core/helpers/index.js\";\nimport { Icon, UIElement } from \"../../../core/ui/index.js\";\nlet UISearch = class UISearch extends UIElement {\n    className() {\n        return 'UISearch';\n    }\n    render() {\n        return `<div>\n\t\t\t<div class=\"&__box\">\n\t\t\t\t<div class=\"&__inputs\">\n\t\t\t\t\t<input data-ref=\"query\" tabindex=\"0\" placeholder=\"~Search for~\" type=\"text\"/>\n\t\t\t\t\t<input data-ref=\"replace\" tabindex=\"0\" placeholder=\"~Replace with~\" type=\"text\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"&__counts\">\n\t\t\t\t\t<span data-ref=\"counter-box\">\n\t\t\t\t\t\t<span data-ref=\"current\">0</span><span>/</span><span data-ref=\"count\">0</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"&__buttons\">\n\t\t\t\t\t<button data-ref=\"next\" tabindex=\"0\" type=\"button\">${Icon.get('angle-down')}</button>\n\t\t\t\t\t<button data-ref=\"prev\" tabindex=\"0\" type=\"button\">${Icon.get('angle-up')}</button>\n\t\t\t\t\t<button data-ref=\"cancel\" tabindex=\"0\" type=\"button\">${Icon.get('cancel')}</button>\n\t\t\t\t\t<button data-ref=\"replace-btn\" tabindex=\"0\" type=\"button\" class=\"jodit-ui-button\">~Replace~</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n    }\n    get currentIndex() {\n        return this._currentIndex;\n    }\n    set currentIndex(value) {\n        this._currentIndex = value;\n        this.currentBox.innerText = value.toString();\n    }\n    set count(value) {\n        this.countBox.innerText = value.toString();\n    }\n    get query() {\n        return this.queryInput.value;\n    }\n    get replace() {\n        return this.replaceInput.value;\n    }\n    constructor(jodit) {\n        super(jodit);\n        this.selInfo = null;\n        this._currentIndex = 0;\n        this.isOpened = false;\n        const { query, replace, cancel, next, prev, replaceBtn, current, count } = refs(this.container);\n        this.queryInput = query;\n        this.replaceInput = replace;\n        this.closeButton = cancel;\n        this.replaceButton = replaceBtn;\n        this.currentBox = current;\n        this.countBox = count;\n        jodit.e\n            .on(this.closeButton, 'pointerdown', () => {\n            this.close();\n            return false;\n        })\n            .on(this.queryInput, 'input', () => {\n            this.currentIndex = 0;\n        })\n            .on(this.queryInput, 'pointerdown', () => {\n            if (jodit.s.isFocused()) {\n                jodit.s.removeMarkers();\n                this.selInfo = jodit.s.save();\n            }\n        })\n            .on(this.replaceButton, 'pointerdown', () => {\n            jodit.e.fire(this, 'pressReplaceButton');\n            return false;\n        })\n            .on(next, 'pointerdown', () => {\n            void jodit.e.fire('searchNext');\n            return false;\n        })\n            .on(prev, 'pointerdown', () => {\n            jodit.e.fire('searchPrevious');\n            return false;\n        })\n            .on(this.queryInput, 'input', () => {\n            this.setMod('empty-query', !trim(this.queryInput.value).length);\n        })\n            .on(this.queryInput, 'keydown', this.j.async.debounce(async (e) => {\n            switch (e.key) {\n                case consts.KEY_ENTER:\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    if (await jodit.e.fire('searchNext')) {\n                        this.close();\n                    }\n                    break;\n                default:\n                    jodit.e.fire(this, 'needUpdateCounters');\n                    break;\n            }\n        }, this.j.defaultTimeout));\n    }\n    onEditorKeyDown(e) {\n        if (!this.isOpened) {\n            return;\n        }\n        const { j } = this;\n        if (j.getRealMode() !== MODE_WYSIWYG) {\n            return;\n        }\n        switch (e.key) {\n            case consts.KEY_ESC:\n                this.close();\n                break;\n            case consts.KEY_F3:\n                if (this.queryInput.value) {\n                    j.e.fire(!e.shiftKey ? 'searchNext' : 'searchPrevious');\n                    e.preventDefault();\n                }\n                break;\n        }\n    }\n    open(query, replace, searchAndReplace = false) {\n        if (!this.isOpened) {\n            this.j.workplace.appendChild(this.container);\n            this.isOpened = true;\n        }\n        this.calcSticky(this.j.e.fire('getStickyState.sticky') || false);\n        this.j.e.fire('hidePopup');\n        this.setMod('replace', searchAndReplace);\n        // this.current = this.j.s.current();\n        const selStr = query !== null && query !== void 0 ? query : (this.j.s.sel || '').toString();\n        if (selStr) {\n            this.queryInput.value = selStr;\n        }\n        if (replace) {\n            this.replaceInput.value = replace;\n        }\n        this.setMod('empty-query', !selStr.length);\n        this.j.e.fire(this, 'needUpdateCounters');\n        if (selStr) {\n            this.queryInput.select();\n        }\n        else {\n            this.queryInput.focus();\n        }\n    }\n    close() {\n        if (!this.isOpened) {\n            return;\n        }\n        this.j.s.restore();\n        Dom.safeRemove(this.container);\n        this.isOpened = false;\n        this.j.e.fire(this, 'afterClose');\n    }\n    /**\n     * Calculate position if sticky is enabled\n     */\n    calcSticky(enabled) {\n        if (this.isOpened) {\n            this.setMod('sticky', enabled);\n            if (enabled) {\n                const pos = position(this.j.toolbarContainer);\n                css(this.container, {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width\n                });\n            }\n            else {\n                css(this.container, {\n                    top: null,\n                    left: null\n                });\n            }\n        }\n    }\n};\n__decorate([\n    watch([':keydown', 'queryInput:keydown'])\n], UISearch.prototype, \"onEditorKeyDown\", null);\n__decorate([\n    autobind\n], UISearch.prototype, \"open\", null);\n__decorate([\n    autobind\n], UISearch.prototype, \"close\", null);\n__decorate([\n    watch(':toggleSticky')\n], UISearch.prototype, \"calcSticky\", null);\nUISearch = __decorate([\n    component\n], UISearch);\nexport { UISearch };\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { IS_PROD } from \"../../core/constants.js\";\nimport { autobind, cache, cached, watch } from \"../../core/decorators/index.js\";\nimport { Dom, LazyWalker } from \"../../core/dom/index.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { scrollIntoViewIfNeeded } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport \"./config.js\";\nimport { clearSelectionWrappers, clearSelectionWrappersFromHTML, getSelectionWrappers, highlightTextRanges, SentenceFinder } from \"./helpers/index.js\";\nimport { UISearch } from \"./ui/search.js\";\n/**\n * Search plugin. it is used for custom search in text\n * ![search](https://user-images.githubusercontent.com/794318/34545433-cd0a9220-f10e-11e7-8d26-7e22f66e266d.gif)\n *\n * @example\n * ```typescript\n * const jodit = Jodit.make('#editor', {\n *  useSearch: false\n * });\n * // or\n * const jodit = Jodit.make('#editor', {\n *  disablePlugins: 'search'\n * });\n * ```\n */\nexport class search extends Plugin {\n    constructor() {\n        super(...arguments);\n        this.buttons = [\n            {\n                name: 'find',\n                group: 'search'\n            }\n        ];\n        this.previousQuery = '';\n        this.drawPromise = null;\n        this.walker = null;\n        this.walkerCount = null;\n        this.cache = {};\n        this.wrapFrameRequest = 0;\n    }\n    get ui() {\n        return new UISearch(this.j);\n    }\n    async updateCounters() {\n        if (!this.ui.isOpened) {\n            return;\n        }\n        this.ui.count = await this.calcCounts(this.ui.query);\n    }\n    onPressReplaceButton() {\n        this.findAndReplace(this.ui.query);\n        this.updateCounters();\n    }\n    tryScrollToElement(startContainer) {\n        // find scrollable element\n        let parentBox = Dom.closest(startContainer, Dom.isElement, this.j.editor);\n        if (!parentBox) {\n            parentBox = Dom.prev(startContainer, Dom.isElement, this.j.editor);\n        }\n        parentBox &&\n            parentBox !== this.j.editor &&\n            scrollIntoViewIfNeeded(parentBox, this.j.editor, this.j.ed);\n    }\n    async calcCounts(query) {\n        return (await this.findQueryBounds(query, 'walkerCount')).length;\n    }\n    async findQueryBounds(query, walkerKey) {\n        let walker = this[walkerKey];\n        if (walker) {\n            walker.break();\n        }\n        walker = new LazyWalker(this.j.async, {\n            timeout: this.j.o.search.lazyIdleTimeout\n        });\n        this[walkerKey] = walker;\n        return this.find(walker, query).catch(e => {\n            !IS_PROD && console.error(e);\n            return [];\n        });\n    }\n    async findAndReplace(query) {\n        const bounds = await this.findQueryBounds(query, 'walker');\n        if (!bounds.length) {\n            return false;\n        }\n        let currentIndex = this.findCurrentIndexInRanges(bounds, this.j.s.range);\n        if (currentIndex === -1) {\n            currentIndex = 0;\n        }\n        const bound = bounds[currentIndex];\n        if (bound) {\n            try {\n                const rng = this.j.ed.createRange();\n                rng.setStart(bound.startContainer, bound.startOffset);\n                rng.setEnd(bound.endContainer, bound.endOffset);\n                rng.deleteContents();\n                const textNode = this.j.createInside.text(this.ui.replace);\n                Dom.safeInsertNode(rng, textNode);\n                clearSelectionWrappers(this.j);\n                this.j.s.setCursorAfter(textNode);\n                this.tryScrollToElement(textNode);\n                this.cache = {};\n                this.ui.currentIndex = currentIndex;\n                await this.findAndSelect(query, true).catch(e => {\n                    !IS_PROD && console.error(e);\n                    return null;\n                });\n            }\n            finally {\n                this.j.synchronizeValues();\n            }\n            this.j.e.fire('afterFindAndReplace');\n            return true;\n        }\n        return false;\n    }\n    async findAndSelect(query, next) {\n        var _a;\n        const bounds = await this.findQueryBounds(query, 'walker');\n        if (!bounds.length) {\n            return false;\n        }\n        if (this.previousQuery !== query ||\n            !getSelectionWrappers(this.j.editor).length) {\n            (_a = this.drawPromise) === null || _a === void 0 ? void 0 : _a.rejectCallback();\n            this.j.async.cancelAnimationFrame(this.wrapFrameRequest);\n            clearSelectionWrappers(this.j);\n            this.drawPromise = this.__drawSelectionRanges(bounds);\n        }\n        this.previousQuery = query;\n        let currentIndex = this.ui.currentIndex - 1;\n        if (currentIndex === -1) {\n            currentIndex = 0;\n        }\n        else if (next) {\n            currentIndex =\n                currentIndex === bounds.length - 1 ? 0 : currentIndex + 1;\n        }\n        else {\n            currentIndex =\n                currentIndex === 0 ? bounds.length - 1 : currentIndex - 1;\n        }\n        this.ui.currentIndex = currentIndex + 1;\n        const bound = bounds[currentIndex];\n        if (bound) {\n            const rng = this.j.ed.createRange();\n            try {\n                rng.setStart(bound.startContainer, bound.startOffset);\n                rng.setEnd(bound.endContainer, bound.endOffset);\n                this.j.s.selectRange(rng);\n            }\n            catch (e) {\n                !IS_PROD && console.error(e);\n            }\n            this.tryScrollToElement(bound.startContainer);\n            await this.updateCounters();\n            await this.drawPromise;\n            this.j.e.fire('afterFindAndSelect');\n            return true;\n        }\n        return false;\n    }\n    findCurrentIndexInRanges(bounds, range) {\n        return bounds.findIndex(bound => bound.startContainer === range.startContainer &&\n            bound.startOffset === range.startOffset &&\n            bound.endContainer === range.startContainer &&\n            bound.endOffset === range.endOffset);\n    }\n    async isValidCache(promise) {\n        const res = await promise;\n        return res.every(r => {\n            var _a, _b, _c, _d;\n            return r.startContainer.isConnected &&\n                r.startOffset <= ((_b = (_a = r.startContainer.nodeValue) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) &&\n                r.endContainer.isConnected &&\n                r.endOffset <= ((_d = (_c = r.endContainer.nodeValue) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0);\n        });\n    }\n    async find(walker, query) {\n        if (!query.length) {\n            return [];\n        }\n        const cache = this.cache[query];\n        if (cache && (await this.isValidCache(cache))) {\n            return cache;\n        }\n        this.cache[query] = this.j.async.promise(resolve => {\n            const sentence = new SentenceFinder(this.j.o.search.fuzzySearch);\n            walker\n                .on('break', () => {\n                resolve([]);\n            })\n                .on('visit', (elm) => {\n                if (Dom.isText(elm)) {\n                    sentence.add(elm);\n                }\n                return false;\n            })\n                .on('end', () => {\n                var _a;\n                resolve((_a = sentence.ranges(query)) !== null && _a !== void 0 ? _a : []);\n            })\n                .setWork(this.j.editor);\n        });\n        return this.cache[query];\n    }\n    __drawSelectionRanges(ranges) {\n        const { async, createInside: ci, editor } = this.j;\n        async.cancelAnimationFrame(this.wrapFrameRequest);\n        const parts = [...ranges];\n        let sRange, total = 0;\n        return async.promise(resolve => {\n            const drawParts = () => {\n                do {\n                    sRange = parts.shift();\n                    if (sRange) {\n                        highlightTextRanges(this.j, sRange, parts, ci, editor);\n                    }\n                    total += 1;\n                } while (sRange && total <= 5);\n                if (parts.length) {\n                    this.wrapFrameRequest =\n                        async.requestAnimationFrame(drawParts);\n                }\n                else {\n                    resolve();\n                }\n            };\n            drawParts();\n        });\n    }\n    onAfterGetValueFromEditor(data) {\n        data.value = clearSelectionWrappersFromHTML(data.value);\n    }\n    /** @override */\n    afterInit(editor) {\n        if (editor.o.useSearch) {\n            const self = this;\n            editor.e\n                .on('beforeSetMode.search', () => {\n                this.ui.close();\n            })\n                .on(this.ui, 'afterClose', () => {\n                clearSelectionWrappers(editor);\n                this.ui.currentIndex = 0;\n                this.ui.count = 0;\n                this.cache = {};\n                editor.focus();\n            })\n                .on('click', () => {\n                this.ui.currentIndex = 0;\n                clearSelectionWrappers(editor);\n            })\n                .on('change.search', () => {\n                this.cache = {};\n            })\n                .on('keydown.search mousedown.search', editor.async.debounce(() => {\n                if (this.ui.selInfo) {\n                    editor.s.removeMarkers();\n                    this.ui.selInfo = null;\n                }\n                if (this.ui.isOpened) {\n                    void this.updateCounters();\n                }\n            }, editor.defaultTimeout))\n                .on('searchNext.search searchPrevious.search', () => {\n                if (!this.ui.isOpened) {\n                    this.ui.open();\n                }\n                return self\n                    .findAndSelect(self.ui.query, editor.e.current === 'searchNext')\n                    .catch(e => {\n                    !IS_PROD && console.error('Search error', e);\n                });\n            })\n                .on('search.search', (value, next = true) => {\n                this.ui.currentIndex = 0;\n                return self.findAndSelect(value || '', next).catch(e => {\n                    !IS_PROD && console.error('Search error', e);\n                });\n            });\n            editor\n                .registerCommand('search', {\n                exec: (command, value, next = true) => {\n                    value &&\n                        self.findAndSelect(value, next).catch(e => {\n                            !IS_PROD && console.error('Search error', e);\n                        });\n                    return false;\n                }\n            })\n                .registerCommand('openSearchDialog', {\n                exec: (command, value) => {\n                    self.ui.open(value);\n                    return false;\n                },\n                hotkeys: ['ctrl+f', 'cmd+f']\n            })\n                .registerCommand('openReplaceDialog', {\n                exec: (command, query, replace) => {\n                    if (!editor.o.readonly) {\n                        self.ui.open(query, replace, true);\n                    }\n                    return false;\n                },\n                hotkeys: ['ctrl+h', 'cmd+h']\n            });\n        }\n    }\n    /** @override */\n    beforeDestruct(jodit) {\n        var _a;\n        (_a = cached(this, 'ui')) === null || _a === void 0 ? void 0 : _a.destruct();\n        jodit.e.off('.search');\n    }\n}\n__decorate([\n    cache\n], search.prototype, \"ui\", null);\n__decorate([\n    watch('ui:needUpdateCounters')\n], search.prototype, \"updateCounters\", null);\n__decorate([\n    watch('ui:pressReplaceButton')\n], search.prototype, \"onPressReplaceButton\", null);\n__decorate([\n    autobind\n], search.prototype, \"findQueryBounds\", null);\n__decorate([\n    autobind\n], search.prototype, \"findAndReplace\", null);\n__decorate([\n    autobind\n], search.prototype, \"findAndSelect\", null);\n__decorate([\n    autobind\n], search.prototype, \"find\", null);\n__decorate([\n    watch(':afterGetValueFromEditor')\n], search.prototype, \"onAfterGetValueFromEditor\", null);\npluginSystem.add('search', search);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module plugins/select\n */\nimport { Config } from \"../../config.js\";\nConfig.prototype.select = {\n    normalizeSelectionBeforeCutAndCopy: false,\n    normalizeTripleClick: true\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { autobind, watch } from \"../../core/decorators/index.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { camelCase } from \"../../core/helpers/string/camel-case.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport { Popup, UIElement } from \"../../core/ui/index.js\";\nimport \"./config.js\";\n/**\n * A utility plugin that allows you to subscribe to a click/mousedown/touchstart/mouseup on an element in DOM order\n *\n * @example\n * ```js\n * const editor = Jodit.make('#editor');\n * editor.e.on('clickImg', (img) => {\n *   console.log(img.src);\n * })\n * ```\n */\nexport class select extends Plugin {\n    constructor() {\n        super(...arguments);\n        this.proxyEventsList = [\n            'click',\n            'mousedown',\n            'touchstart',\n            'mouseup',\n            'touchend'\n        ];\n    }\n    afterInit(jodit) {\n        this.proxyEventsList.forEach(eventName => {\n            jodit.e.on(eventName + '.select', this.onStartSelection);\n        });\n    }\n    beforeDestruct(jodit) {\n        this.proxyEventsList.forEach(eventName => {\n            jodit.e.on(eventName + '.select', this.onStartSelection);\n        });\n    }\n    onStartSelection(e) {\n        const { j } = this;\n        let result, target = e.target;\n        while (result === undefined && target && target !== j.editor) {\n            result = j.e.fire(camelCase(e.type + '_' + target.nodeName.toLowerCase()), target, e);\n            target = target.parentElement;\n        }\n        if (e.type === 'click' && result === undefined && target === j.editor) {\n            j.e.fire(e.type + 'Editor', target, e);\n        }\n    }\n    /**\n     * @event outsideClick(e) - when user clicked on the outside of editor\n     */\n    onOutsideClick(e) {\n        const node = e.target;\n        if (Dom.up(node, elm => elm === this.j.editor)) {\n            return;\n        }\n        const box = UIElement.closestElement(node, Popup);\n        if (!box) {\n            this.j.e.fire('outsideClick', e);\n        }\n    }\n    beforeCommandCut() {\n        const { s } = this.j;\n        if (!s.isCollapsed()) {\n            const current = s.current();\n            if (current && Dom.isOrContains(this.j.editor, current)) {\n                this.onCopyNormalizeSelectionBound();\n            }\n        }\n    }\n    beforeCommandSelectAll() {\n        const { s } = this.j;\n        s.focus();\n        s.select(this.j.editor, true);\n        s.expandSelection();\n        return false;\n    }\n    /**\n     * Normalize selection after triple click\n     */\n    onTripleClickNormalizeSelection(e) {\n        if (e.detail !== 3 || !this.j.o.select.normalizeTripleClick) {\n            return;\n        }\n        const { s } = this.j;\n        const { startContainer, startOffset } = s.range;\n        if (startOffset === 0 && Dom.isText(startContainer)) {\n            s.select(Dom.closest(startContainer, Dom.isBlock, this.j.editor) ||\n                startContainer, true);\n        }\n    }\n    onCopyNormalizeSelectionBound(e) {\n        const { s, editor, o } = this.j;\n        if (!o.select.normalizeSelectionBeforeCutAndCopy || s.isCollapsed()) {\n            return;\n        }\n        if (e &&\n            (!e.isTrusted ||\n                !Dom.isNode(e.target) ||\n                !Dom.isOrContains(editor, e.target))) {\n            return;\n        }\n        this.jodit.s.expandSelection();\n    }\n}\n__decorate([\n    autobind\n], select.prototype, \"onStartSelection\", null);\n__decorate([\n    watch('ow:click')\n], select.prototype, \"onOutsideClick\", null);\n__decorate([\n    watch([':beforeCommandCut'])\n], select.prototype, \"beforeCommandCut\", null);\n__decorate([\n    watch([':beforeCommandSelectall'])\n], select.prototype, \"beforeCommandSelectAll\", null);\n__decorate([\n    watch([':click'])\n], select.prototype, \"onTripleClickNormalizeSelection\", null);\n__decorate([\n    watch([':copy', ':cut'])\n], select.prototype, \"onCopyNormalizeSelectionBound\", null);\npluginSystem.add('select', select);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { IS_IE, MODE_SOURCE, MODE_SPLIT } from \"../../core/constants.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport sourceIcon from \"./source.svg.js\";\nConfig.prototype.beautifyHTML = !IS_IE;\nConfig.prototype.sourceEditor = 'ace';\nConfig.prototype.sourceEditorNativeOptions = {\n    /**\n     * Show gutter\n     */\n    showGutter: true,\n    /**\n     * Default theme\n     */\n    theme: 'ace/theme/idle_fingers',\n    /**\n     * Default mode\n     */\n    mode: 'ace/mode/html',\n    /**\n     * Wrap lines. Possible values - \"off\", 80-100..., true, \"free\"\n     */\n    wrap: true,\n    /**\n     * Highlight active line\n     */\n    highlightActiveLine: true\n};\nConfig.prototype.sourceEditorCDNUrlsJS = [\n    'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js'\n];\nConfig.prototype.beautifyHTMLCDNUrlsJS = [\n    'https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.4/beautify.min.js',\n    'https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.4/beautify-html.min.js'\n];\nIcon.set('source', sourceIcon);\nConfig.prototype.controls.source = {\n    mode: MODE_SPLIT,\n    exec: (editor) => {\n        editor.toggleMode();\n    },\n    isActive: (editor) => {\n        return editor.getRealMode() === MODE_SOURCE;\n    },\n    tooltip: 'Change mode'\n};\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M553 1399l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23t-10 23l-393 393 393 393q10 10 10 23t-10 23zm591-1067l-373 1291q-4 13-15.5 19.5t-23.5 2.5l-62-17q-13-4-19.5-15.5t-2.5-24.5l373-1291q4-13 15.5-19.5t23.5-2.5l62 17q13 4 19.5 15.5t2.5 24.5zm657 651l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23t-10 23z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport class SourceEditor {\n    constructor(jodit, container, toWYSIWYG, fromWYSIWYG) {\n        this.jodit = jodit;\n        this.container = container;\n        this.toWYSIWYG = toWYSIWYG;\n        this.fromWYSIWYG = fromWYSIWYG;\n        this.className = '';\n        this.isReady = false;\n    }\n    /**\n     * Short alias for this.jodit\n     */\n    get j() {\n        return this.jodit;\n    }\n    onReady() {\n        this.replaceUndoManager();\n        this.isReady = true;\n        this.j.e.fire(this, 'ready');\n    }\n    onReadyAlways(onReady) {\n        var _a;\n        if (!this.isReady) {\n            (_a = this.j.events) === null || _a === void 0 ? void 0 : _a.on(this, 'ready', onReady);\n        }\n        else {\n            onReady();\n        }\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport * as constants from \"../../../../core/constants.js\";\nimport { isString, loadNext } from \"../../../../core/helpers/index.js\";\nimport { SourceEditor } from \"../sourceEditor.js\";\nexport class AceEditor extends SourceEditor {\n    constructor() {\n        super(...arguments);\n        this.className = 'jodit_ace_editor';\n        /**\n         * Proxy Method\n         */\n        this.proxyOnBlur = (e) => {\n            this.j.e.fire('blur', e);\n        };\n        this.proxyOnFocus = (e) => {\n            this.j.e.fire('focus', e);\n        };\n        this.proxyOnMouseDown = (e) => {\n            this.j.e.fire('mousedown', e);\n        };\n    }\n    aceExists() {\n        return this.j.ow.ace !== undefined;\n    }\n    getLastColumnIndex(row) {\n        return this.instance.session.getLine(row).length;\n    }\n    getLastColumnIndices() {\n        const rows = this.instance.session.getLength();\n        const lastColumnIndices = [];\n        let lastColIndex = 0;\n        for (let i = 0; i < rows; i++) {\n            lastColIndex += this.getLastColumnIndex(i);\n            if (i > 0) {\n                lastColIndex += 1;\n            }\n            lastColumnIndices[i] = lastColIndex;\n        }\n        return lastColumnIndices;\n    }\n    getRowColumnIndices(characterIndex) {\n        const lastColumnIndices = this.getLastColumnIndices();\n        if (characterIndex <= lastColumnIndices[0]) {\n            return { row: 0, column: characterIndex };\n        }\n        let row = 1;\n        for (let i = 1; i < lastColumnIndices.length; i++) {\n            if (characterIndex > lastColumnIndices[i]) {\n                row = i + 1;\n            }\n        }\n        const column = characterIndex - lastColumnIndices[row - 1] - 1;\n        return { row, column };\n    }\n    setSelectionRangeIndices(start, end) {\n        const startRowColumn = this.getRowColumnIndices(start);\n        const endRowColumn = this.getRowColumnIndices(end);\n        this.instance.getSelection().setSelectionRange({\n            start: startRowColumn,\n            end: endRowColumn\n        });\n    }\n    getIndexByRowColumn(row, column) {\n        const lastColumnIndices = this.getLastColumnIndices();\n        return lastColumnIndices[row] - this.getLastColumnIndex(row) + column;\n    }\n    init(editor) {\n        const tryInitAceEditor = () => {\n            if (this.instance !== undefined || !this.aceExists()) {\n                return;\n            }\n            const fakeMirror = this.j.c.div('jodit-source__mirror-fake');\n            this.container.appendChild(fakeMirror);\n            const ace = editor.ow.ace;\n            this.instance = ace.edit(fakeMirror);\n            if (editor.o.direction === 'rtl') {\n                this.instance.setOption('rtlText', true);\n                this.instance.setOption('rtl', true);\n            }\n            this.instance.setTheme(editor.o.sourceEditorNativeOptions.theme);\n            this.instance.renderer.setShowGutter(editor.o.sourceEditorNativeOptions.showGutter);\n            this.instance\n                .getSession()\n                .setMode(editor.o.sourceEditorNativeOptions.mode);\n            this.instance.setHighlightActiveLine(editor.o.sourceEditorNativeOptions.highlightActiveLine);\n            this.instance.getSession().setUseWrapMode(true);\n            this.instance.setOption('indentedSoftWrap', false);\n            this.instance.setOption('wrap', editor.o.sourceEditorNativeOptions.wrap);\n            this.instance.getSession().setUseWorker(false);\n            this.instance.$blockScrolling = Infinity;\n            this.instance.on('change', this.toWYSIWYG);\n            this.instance.on('focus', this.proxyOnFocus);\n            this.instance.on('mousedown', this.proxyOnMouseDown);\n            this.instance.on('blur', this.proxyOnBlur);\n            if (editor.getRealMode() !== constants.MODE_WYSIWYG) {\n                this.setValue(this.getValue());\n            }\n            const onResize = this.j.async.throttle(() => {\n                if (editor.isInDestruct ||\n                    editor.getMode() === constants.MODE_WYSIWYG) {\n                    return;\n                }\n                const hasFocus = this.instance.isFocused();\n                if (editor.o.height !== 'auto') {\n                    this.instance.setOption('maxLines', editor.workplace.offsetHeight /\n                        this.instance.renderer.lineHeight);\n                }\n                else {\n                    this.instance.setOption('maxLines', Infinity);\n                }\n                this.instance.resize();\n                hasFocus && this.focus();\n            }, this.j.defaultTimeout * 2);\n            editor.e\n                .on(editor, 'resize', onResize)\n                .on('afterResize afterSetMode', onResize);\n            onResize();\n            this.onReady();\n        };\n        editor.e.on('afterSetMode', () => {\n            if (editor.getRealMode() !== constants.MODE_SOURCE &&\n                editor.getMode() !== constants.MODE_SPLIT) {\n                return;\n            }\n            this.fromWYSIWYG();\n            tryInitAceEditor();\n        });\n        tryInitAceEditor();\n        // global add ace editor in browser\n        if (!this.aceExists()) {\n            loadNext(editor, editor.o.sourceEditorCDNUrlsJS)\n                .then(() => {\n                if (!editor.isInDestruct) {\n                    tryInitAceEditor();\n                }\n            })\n                .catch(() => null);\n        }\n    }\n    destruct() {\n        var _a, _b;\n        this.instance.off('change', this.toWYSIWYG);\n        this.instance.off('focus', this.proxyOnFocus);\n        this.instance.off('mousedown', this.proxyOnMouseDown);\n        this.instance.destroy();\n        (_b = (_a = this.j) === null || _a === void 0 ? void 0 : _a.events) === null || _b === void 0 ? void 0 : _b.off('aceInited.source');\n    }\n    setValue(value) {\n        if (!this.j.o.editHTMLDocumentMode && this.j.o.beautifyHTML) {\n            const html = this.j.e.fire('beautifyHTML', value);\n            if (isString(html)) {\n                value = html;\n            }\n        }\n        this.instance.setValue(value);\n        this.instance.clearSelection();\n    }\n    getValue() {\n        return this.instance.getValue();\n    }\n    setReadOnly(isReadOnly) {\n        this.instance.setReadOnly(isReadOnly);\n    }\n    get isFocused() {\n        return this.instance.isFocused();\n    }\n    focus() {\n        this.instance.container.focus();\n        this.instance.focus();\n    }\n    blur() {\n        this.instance.blur();\n    }\n    getSelectionStart() {\n        const range = this.instance.selection.getRange();\n        return this.getIndexByRowColumn(range.start.row, range.start.column);\n    }\n    getSelectionEnd() {\n        const range = this.instance.selection.getRange();\n        return this.getIndexByRowColumn(range.end.row, range.end.column);\n    }\n    selectAll() {\n        this.instance.selection.selectAll();\n    }\n    insertRaw(html) {\n        const start = this.instance.selection.getCursor(), end = this.instance.session.insert(start, html);\n        this.instance.selection.setRange({\n            start,\n            end\n        }, false);\n    }\n    setSelectionRange(start, end) {\n        this.setSelectionRangeIndices(start, end);\n    }\n    setPlaceHolder(title) {\n        // ACE does not support placeholder\n        // title\n    }\n    replaceUndoManager() {\n        const { history } = this.jodit;\n        this.instance.commands.addCommand({\n            name: 'Undo',\n            bindKey: { win: 'Ctrl-Z', mac: 'Command-Z' },\n            exec: () => {\n                history.undo();\n            }\n        });\n        this.instance.commands.addCommand({\n            name: 'Redo',\n            bindKey: { win: 'Ctrl-Shift-Z', mac: 'Command-Shift-Z' },\n            exec: () => {\n                history.redo();\n            }\n        });\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Dom } from \"../../../../core/dom/dom.js\";\nimport { css } from \"../../../../core/helpers/utils/css.js\";\nimport { SourceEditor } from \"../sourceEditor.js\";\nexport class TextAreaEditor extends SourceEditor {\n    constructor() {\n        super(...arguments);\n        this.autosize = this.j.async.debounce(() => {\n            this.instance.style.height = 'auto';\n            this.instance.style.height = this.instance.scrollHeight + 'px';\n        }, this.j.defaultTimeout);\n    }\n    init(editor) {\n        this.instance = editor.c.element('textarea', {\n            class: 'jodit-source__mirror',\n            dir: editor.o.direction === 'rtl' ? 'rtl' : undefined\n        });\n        this.container.appendChild(this.instance);\n        editor.e\n            .on(this.instance, 'mousedown keydown touchstart input', editor.async.debounce(this.toWYSIWYG, editor.defaultTimeout))\n            .on('setMinHeight.source', (minHeightD) => {\n            css(this.instance, 'minHeight', minHeightD);\n        })\n            .on(this.instance, 'change keydown mousedown touchstart input', this.autosize)\n            .on('afterSetMode.source', this.autosize)\n            .on(this.instance, 'mousedown focus', (e) => {\n            editor.e.fire(e.type, e);\n        });\n        this.autosize();\n        this.onReady();\n    }\n    destruct() {\n        Dom.safeRemove(this.instance);\n    }\n    getValue() {\n        return this.instance.value;\n    }\n    setValue(raw) {\n        this.instance.value = raw;\n    }\n    insertRaw(raw) {\n        const value = this.getValue();\n        if (this.getSelectionStart() >= 0) {\n            const startPos = this.getSelectionStart(), endPos = this.getSelectionEnd();\n            this.setValue(value.substring(0, startPos) +\n                raw +\n                value.substring(endPos, value.length));\n        }\n        else {\n            this.setValue(value + raw);\n        }\n    }\n    getSelectionStart() {\n        return this.instance.selectionStart;\n    }\n    getSelectionEnd() {\n        return this.instance.selectionEnd;\n    }\n    setSelectionRange(start, end = start) {\n        this.instance.setSelectionRange(start, end);\n    }\n    get isFocused() {\n        return this.instance === this.j.od.activeElement;\n    }\n    focus() {\n        this.instance.focus();\n    }\n    blur() {\n        this.instance.blur();\n    }\n    setPlaceHolder(title) {\n        this.instance.setAttribute('placeholder', title);\n    }\n    setReadOnly(isReadOnly) {\n        if (isReadOnly) {\n            this.instance.setAttribute('readonly', 'true');\n        }\n        else {\n            this.instance.removeAttribute('readonly');\n        }\n    }\n    selectAll() {\n        this.instance.select();\n    }\n    replaceUndoManager() {\n        const { history } = this.jodit;\n        this.j.e.on(this.instance, 'keydown', (e) => {\n            if ((e.ctrlKey || e.metaKey) && e.key === 'z') {\n                if (e.shiftKey) {\n                    history.redo();\n                }\n                else {\n                    history.undo();\n                }\n                this.setSelectionRange(this.getValue().length);\n                return false;\n            }\n        });\n    }\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { isFunction } from \"../../../core/helpers/index.js\";\nimport { AceEditor, TextAreaEditor } from \"./engines/index.js\";\nexport function createSourceEditor(type, editor, container, toWYSIWYG, fromWYSIWYG) {\n    let sourceEditor;\n    if (isFunction(type)) {\n        sourceEditor = type(editor);\n    }\n    else {\n        switch (type) {\n            case 'ace':\n                if (!editor.o.shadowRoot) {\n                    sourceEditor = new AceEditor(editor, container, toWYSIWYG, fromWYSIWYG);\n                    break;\n                }\n            default:\n                sourceEditor = new TextAreaEditor(editor, container, toWYSIWYG, fromWYSIWYG);\n        }\n    }\n    sourceEditor.init(editor);\n    sourceEditor.onReadyAlways(() => {\n        sourceEditor.setReadOnly(editor.o.readonly);\n    });\n    return sourceEditor;\n}\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as consts from \"../../core/constants.js\";\nimport { INVISIBLE_SPACE, KEY_ESC, MODE_SOURCE, MODE_SPLIT, SOURCE_CONSUMER } from \"../../core/constants.js\";\nimport { autobind, watch } from \"../../core/decorators/index.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { pluginSystem } from \"../../core/global.js\";\nimport { isString, loadNext } from \"../../core/helpers/index.js\";\nimport { Plugin } from \"../../core/plugin/index.js\";\nimport \"./config.js\";\nimport { createSourceEditor } from \"./editor/factory.js\";\n/**\n * Plug-in change simple textarea on CodeMirror editor in Source code mode\n */\nexport class source extends Plugin {\n    constructor() {\n        super(...arguments);\n        /** @override */\n        this.buttons = [\n            {\n                name: 'source',\n                group: 'source'\n            }\n        ];\n        this.__lock = false;\n        this.__oldMirrorValue = '';\n        this.tempMarkerStart = '{start-jodit-selection}';\n        this.tempMarkerStartReg = /{start-jodit-selection}/g;\n        this.tempMarkerEnd = '{end-jodit-selection}';\n        this.tempMarkerEndReg = /{end-jodit-selection}/g;\n        // override it for ace editors\n        this.getSelectionStart = () => {\n            var _a, _b;\n            return (_b = (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.getSelectionStart()) !== null && _b !== void 0 ? _b : 0;\n        };\n        this.getSelectionEnd = () => {\n            var _a, _b;\n            return (_b = (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.getSelectionEnd()) !== null && _b !== void 0 ? _b : 0;\n        };\n    }\n    onInsertHTML(html) {\n        var _a;\n        if (!this.j.o.readonly && !this.j.isEditorMode()) {\n            (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.insertRaw(html);\n            this.toWYSIWYG();\n            return false;\n        }\n    }\n    /**\n     * Update source editor from WYSIWYG area\n     */\n    fromWYSIWYG(force = false) {\n        if (!this.__lock || force === true) {\n            this.__lock = true;\n            const new_value = this.j.getEditorValue(false, SOURCE_CONSUMER);\n            if (new_value !== this.getMirrorValue()) {\n                this.setMirrorValue(new_value);\n            }\n            this.__lock = false;\n        }\n    }\n    /**\n     * Update WYSIWYG area from source editor\n     */\n    toWYSIWYG() {\n        if (this.__lock) {\n            return;\n        }\n        const value = this.getMirrorValue();\n        if (value === this.__oldMirrorValue) {\n            return;\n        }\n        this.__lock = true;\n        this.j.value = value;\n        this.__lock = false;\n        this.__oldMirrorValue = value;\n    }\n    getNormalPosition(pos, str) {\n        str = str.replace(/<(script|style|iframe)[^>]*>[^]*?<\\/\\1>/im, m => {\n            let res = '';\n            for (let i = 0; i < m.length; i += 1) {\n                res += INVISIBLE_SPACE;\n            }\n            return res;\n        });\n        while (pos > 0 && str[pos] === INVISIBLE_SPACE) {\n            pos--;\n        }\n        let start = pos;\n        while (start > 0) {\n            start--;\n            if (str[start] === '<' &&\n                str[start + 1] !== undefined &&\n                str[start + 1].match(/[\\w/]+/i)) {\n                return start;\n            }\n            if (str[start] === '>') {\n                return pos;\n            }\n        }\n        return pos;\n    }\n    clnInv(str) {\n        return str.replace(consts.INVISIBLE_SPACE_REG_EXP(), '');\n    }\n    onSelectAll(command) {\n        var _a;\n        if (command.toLowerCase() === 'selectall' &&\n            this.j.getRealMode() === MODE_SOURCE) {\n            (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.selectAll();\n            return false;\n        }\n    }\n    getMirrorValue() {\n        var _a;\n        return ((_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.getValue()) || '';\n    }\n    setMirrorValue(value) {\n        var _a;\n        (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.setValue(value);\n    }\n    setFocusToMirror() {\n        var _a;\n        (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    saveSelection() {\n        if (this.j.getRealMode() === consts.MODE_WYSIWYG) {\n            this.j.s.save();\n            this.j.synchronizeValues();\n            this.fromWYSIWYG(true);\n        }\n        else {\n            if (this.j.o.editHTMLDocumentMode) {\n                return;\n            }\n            const value = this.getMirrorValue();\n            if (this.getSelectionStart() === this.getSelectionEnd()) {\n                const marker = this.j.s.marker(true);\n                const selectionStart = this.getNormalPosition(this.getSelectionStart(), this.getMirrorValue());\n                this.setMirrorValue(value.substring(0, selectionStart) +\n                    this.clnInv(marker.outerHTML) +\n                    value.substring(selectionStart));\n            }\n            else {\n                const markerStart = this.j.s.marker(true);\n                const markerEnd = this.j.s.marker(false);\n                const selectionStart = this.getNormalPosition(this.getSelectionStart(), value);\n                const selectionEnd = this.getNormalPosition(this.getSelectionEnd(), value);\n                this.setMirrorValue(value.slice(0, selectionStart) +\n                    this.clnInv(markerStart.outerHTML) +\n                    value.slice(selectionStart, selectionEnd) +\n                    this.clnInv(markerEnd.outerHTML) +\n                    value.slice(selectionEnd));\n            }\n            this.toWYSIWYG();\n        }\n    }\n    removeSelection() {\n        if (this.j.getRealMode() === consts.MODE_WYSIWYG) {\n            this.__lock = true;\n            this.j.s.restore();\n            this.__lock = false;\n            return;\n        }\n        let value = this.getMirrorValue();\n        let selectionStart = 0, selectionEnd = 0;\n        try {\n            value = value\n                .replace(/<span[^>]+data-jodit-selection_marker=([\"'])start\\1[^>]*>[<>]*?<\\/span>/gim, this.tempMarkerStart)\n                .replace(/<span[^>]+data-jodit-selection_marker=([\"'])end\\1[^>]*>[<>]*?<\\/span>/gim, this.tempMarkerEnd);\n            if (!this.j.o.editHTMLDocumentMode && this.j.o.beautifyHTML) {\n                const html = this.j.e.fire('beautifyHTML', value);\n                if (isString(html)) {\n                    value = html;\n                }\n            }\n            selectionStart = value.indexOf(this.tempMarkerStart);\n            selectionEnd = selectionStart;\n            value = value.replace(this.tempMarkerStartReg, '');\n            if (selectionStart !== -1) {\n                const selectionEndCursor = value.indexOf(this.tempMarkerEnd);\n                if (selectionEndCursor !== -1) {\n                    selectionEnd = selectionEndCursor;\n                }\n            }\n            value = value.replace(this.tempMarkerEndReg, '');\n        }\n        finally {\n            value = value\n                .replace(this.tempMarkerEndReg, '')\n                .replace(this.tempMarkerStartReg, '');\n        }\n        this.setMirrorValue(value);\n        this.setMirrorSelectionRange(selectionStart, selectionEnd);\n        this.toWYSIWYG();\n        this.setFocusToMirror(); // need for setting focus after change mode\n    }\n    setMirrorSelectionRange(start, end) {\n        var _a;\n        (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.setSelectionRange(start, end);\n    }\n    onReadonlyReact() {\n        var _a;\n        (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.setReadOnly(this.j.o.readonly);\n    }\n    /** @override */\n    afterInit(editor) {\n        this.mirrorContainer = editor.c.div('jodit-source');\n        editor.workplace.appendChild(this.mirrorContainer);\n        editor.e.on('afterAddPlace changePlace afterInit', () => {\n            editor.workplace.appendChild(this.mirrorContainer);\n        });\n        this.sourceEditor = createSourceEditor('area', editor, this.mirrorContainer, this.toWYSIWYG, this.fromWYSIWYG);\n        editor.e.on(editor.ow, 'keydown', (e) => {\n            var _a;\n            if (e.key === KEY_ESC && ((_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.isFocused)) {\n                this.sourceEditor.blur();\n            }\n        });\n        this.onReadonlyReact();\n        editor.e\n            .on('placeholder.source', (text) => {\n            var _a;\n            (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.setPlaceHolder(text);\n        })\n            .on('change.source', this.syncValueFromWYSIWYG)\n            .on('beautifyHTML', html => html);\n        if (editor.o.beautifyHTML) {\n            const addEventListener = () => {\n                var _a;\n                if (editor.isInDestruct) {\n                    return false;\n                }\n                const html_beautify = editor.ow.html_beautify;\n                if (html_beautify && !editor.isInDestruct) {\n                    (_a = editor.events) === null || _a === void 0 ? void 0 : _a.off('beautifyHTML').on('beautifyHTML', html => html_beautify(html));\n                    return true;\n                }\n                return false;\n            };\n            if (!addEventListener()) {\n                loadNext(editor, editor.o.beautifyHTMLCDNUrlsJS).then(addEventListener, () => null);\n            }\n        }\n        this.syncValueFromWYSIWYG(true);\n        this.initSourceEditor(editor);\n    }\n    syncValueFromWYSIWYG(force = false) {\n        const editor = this.j;\n        if (editor.getMode() === MODE_SPLIT ||\n            editor.getMode() === MODE_SOURCE) {\n            this.fromWYSIWYG(force);\n        }\n    }\n    initSourceEditor(editor) {\n        var _a;\n        if (editor.o.sourceEditor !== 'area') {\n            const sourceEditor = createSourceEditor(editor.o.sourceEditor, editor, this.mirrorContainer, this.toWYSIWYG, this.fromWYSIWYG);\n            sourceEditor.onReadyAlways(() => {\n                var _a, _b;\n                (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.destruct();\n                this.sourceEditor = sourceEditor;\n                this.syncValueFromWYSIWYG(true);\n                (_b = editor.events) === null || _b === void 0 ? void 0 : _b.fire('sourceEditorReady', editor);\n            });\n        }\n        else {\n            (_a = this.sourceEditor) === null || _a === void 0 ? void 0 : _a.onReadyAlways(() => {\n                var _a;\n                this.syncValueFromWYSIWYG(true);\n                (_a = editor.events) === null || _a === void 0 ? void 0 : _a.fire('sourceEditorReady', editor);\n            });\n        }\n    }\n    /** @override */\n    beforeDestruct() {\n        if (this.sourceEditor) {\n            this.sourceEditor.destruct();\n            delete this.sourceEditor;\n        }\n        Dom.safeRemove(this.mirrorContainer);\n    }\n}\n__decorate([\n    watch(':insertHTML.source')\n], source.prototype, \"onInsertHTML\", null);\n__decorate([\n    autobind\n], source.prototype, \"fromWYSIWYG\", null);\n__decorate([\n    autobind\n], source.prototype, \"toWYSIWYG\", null);\n__decorate([\n    autobind\n], source.prototype, \"getNormalPosition\", null);\n__decorate([\n    watch(':beforeCommand.source')\n], source.prototype, \"onSelectAll\", null);\n__decorate([\n    watch(':beforeSetMode.source')\n], source.prototype, \"saveSelection\", null);\n__decorate([\n    watch(':afterSetMode.source')\n], source.prototype, \"removeSelection\", null);\n__decorate([\n    autobind\n], source.prototype, \"setMirrorSelectionRange\", null);\n__decorate([\n    watch(':readonly.source')\n], source.prototype, \"onReadonlyReact\", null);\n__decorate([\n    autobind\n], source.prototype, \"syncValueFromWYSIWYG\", null);\npluginSystem.add('source', source);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport symbolsIcon from \"./symbols.svg.js\";\nConfig.prototype.usePopupForSpecialCharacters = false;\nConfig.prototype.specialCharacters = [\n    '!',\n    '&quot;',\n    '#',\n    '$',\n    '%',\n    '&amp;',\n    \"'\",\n    '(',\n    ')',\n    '*',\n    '+',\n    '-',\n    '.',\n    '/',\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n    ':',\n    ';',\n    '&lt;',\n    '=',\n    '&gt;',\n    '?',\n    '@',\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n    'I',\n    'J',\n    'K',\n    'L',\n    'M',\n    'N',\n    'O',\n    'P',\n    'Q',\n    'R',\n    'S',\n    'T',\n    'U',\n    'V',\n    'W',\n    'X',\n    'Y',\n    'Z',\n    '[',\n    ']',\n    '^',\n    '_',\n    '`',\n    'a',\n    'b',\n    'c',\n    'd',\n    'e',\n    'f',\n    'g',\n    'h',\n    'i',\n    'j',\n    'k',\n    'l',\n    'm',\n    'n',\n    'o',\n    'p',\n    'q',\n    'r',\n    's',\n    't',\n    'u',\n    'v',\n    'w',\n    'x',\n    'y',\n    'z',\n    '{',\n    '|',\n    '}',\n    '~',\n    '&euro;',\n    '&lsquo;',\n    '&rsquo;',\n    '&ldquo;',\n    '&rdquo;',\n    '&ndash;',\n    '&mdash;',\n    '&iexcl;',\n    '&cent;',\n    '&pound;',\n    '&curren;',\n    '&yen;',\n    '&brvbar;',\n    '&sect;',\n    '&uml;',\n    '&copy;',\n    '&ordf;',\n    '&laquo;',\n    '&raquo;',\n    '&not;',\n    '&reg;',\n    '&macr;',\n    '&deg;',\n    '&sup2;',\n    '&sup3;',\n    '&acute;',\n    '&micro;',\n    '&para;',\n    '&middot;',\n    '&cedil;',\n    '&sup1;',\n    '&ordm;',\n    '&frac14;',\n    '&frac12;',\n    '&frac34;',\n    '&iquest;',\n    '&Agrave;',\n    '&Aacute;',\n    '&Acirc;',\n    '&Atilde;',\n    '&Auml;',\n    '&Aring;',\n    '&AElig;',\n    '&Ccedil;',\n    '&Egrave;',\n    '&Eacute;',\n    '&Ecirc;',\n    '&Euml;',\n    '&Igrave;',\n    '&Iacute;',\n    '&Icirc;',\n    '&Iuml;',\n    '&ETH;',\n    '&Ntilde;',\n    '&Ograve;',\n    '&Oacute;',\n    '&Ocirc;',\n    '&Otilde;',\n    '&Ouml;',\n    '&times;',\n    '&Oslash;',\n    '&Ugrave;',\n    '&Uacute;',\n    '&Ucirc;',\n    '&Uuml;',\n    '&Yacute;',\n    '&THORN;',\n    '&szlig;',\n    '&agrave;',\n    '&aacute;',\n    '&acirc;',\n    '&atilde;',\n    '&auml;',\n    '&aring;',\n    '&aelig;',\n    '&ccedil;',\n    '&egrave;',\n    '&eacute;',\n    '&ecirc;',\n    '&euml;',\n    '&igrave;',\n    '&iacute;',\n    '&icirc;',\n    '&iuml;',\n    '&eth;',\n    '&ntilde;',\n    '&ograve;',\n    '&oacute;',\n    '&ocirc;',\n    '&otilde;',\n    '&ouml;',\n    '&divide;',\n    '&oslash;',\n    '&ugrave;',\n    '&uacute;',\n    '&ucirc;',\n    '&uuml;',\n    '&yacute;',\n    '&thorn;',\n    '&yuml;',\n    '&OElig;',\n    '&oelig;',\n    '&#372;',\n    '&#374',\n    '&#373',\n    '&#375;',\n    '&sbquo;',\n    '&#8219;',\n    '&bdquo;',\n    '&hellip;',\n    '&trade;',\n    '&#9658;',\n    '&bull;',\n    '&rarr;',\n    '&rArr;',\n    '&hArr;',\n    '&diams;',\n    '&asymp;'\n];\nIcon.set('symbols', symbolsIcon);\nConfig.prototype.controls.symbols = {\n    hotkeys: ['ctrl+shift+i', 'cmd+shift+i'],\n    tooltip: 'Insert Special Character',\n    popup: (editor, current, close) => {\n        const container = editor.e.fire('generateSpecialCharactersTable.symbols');\n        if (container) {\n            if (editor.o.usePopupForSpecialCharacters) {\n                const box = editor.c.div();\n                box.classList.add('jodit-symbols');\n                box.appendChild(container);\n                editor.e.on(container, 'close_dialog', close);\n                return box;\n            }\n            editor\n                .alert(container, 'Select Special Character', undefined, 'jodit-symbols')\n                .bindDestruct(editor);\n            const a = container.querySelector('a');\n            a && a.focus();\n        }\n        return;\n    }\n};\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 270 270\\\"> <path d=\\\"m240.443652,220.45085l-47.410809,0l0,-10.342138c13.89973,-8.43655 25.752896,-19.844464 34.686646,-33.469923c11.445525,-17.455846 17.496072,-37.709239 17.496072,-58.570077c0,-59.589197 -49.208516,-108.068714 -109.693558,-108.068714s-109.69263,48.479517 -109.69263,108.069628c0,20.860839 6.050547,41.113316 17.497001,58.570077c8.93375,13.625459 20.787845,25.032458 34.686646,33.469008l0,10.342138l-47.412666,0c-10.256959,0 -18.571354,8.191376 -18.571354,18.296574c0,10.105198 8.314395,18.296574 18.571354,18.296574l65.98402,0c10.256959,0 18.571354,-8.191376 18.571354,-18.296574l0,-39.496814c0,-7.073455 -4.137698,-13.51202 -10.626529,-16.537358c-25.24497,-11.772016 -41.557118,-37.145704 -41.557118,-64.643625c0,-39.411735 32.545369,-71.476481 72.549922,-71.476481c40.004553,0 72.550851,32.064746 72.550851,71.476481c0,27.497006 -16.312149,52.87161 -41.557118,64.643625c-6.487902,3.026253 -10.6256,9.464818 -10.6256,16.537358l0,39.496814c0,10.105198 8.314395,18.296574 18.571354,18.296574l65.982163,0c10.256959,0 18.571354,-8.191376 18.571354,-18.296574c0,-10.105198 -8.314395,-18.296574 -18.571354,-18.296574z\\\"/> </svg> \";\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'symbol'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Symbol'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Smbolo'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Symbolit'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'caractre'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ' '\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Szimblum'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'simbol'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Simbolo'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'symbol'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'symbool'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'symbol'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Smbolo'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: 'Sembol'\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","\"use strict\";\n/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nexport default {\n    symbols: ''\n};\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { KEY_DOWN, KEY_ENTER, KEY_LEFT, KEY_RIGHT, KEY_UP } from \"../../core/constants.js\";\nimport { Dom } from \"../../core/dom/dom.js\";\nimport { extendLang, pluginSystem } from \"../../core/global.js\";\nimport { attr } from \"../../core/helpers/utils/index.js\";\nimport { Plugin } from \"../../core/plugin/plugin.js\";\nimport \"./config.js\";\nimport * as langs from \"./langs/index.js\";\n/**\n * The plugin inserts characters that are not part of the standard keyboard.\n */\nexport class symbols extends Plugin {\n    constructor(jodit) {\n        super(jodit);\n        this.buttons = [\n            {\n                name: 'symbols',\n                group: 'insert'\n            }\n        ];\n        this.__countInRow = 17;\n        extendLang(langs);\n    }\n    afterInit(jodit) {\n        jodit.e.on('generateSpecialCharactersTable.symbols', () => {\n            const container = jodit.c.fromHTML(`<div class=\"jodit-symbols__container\">\n\t\t\t\t\t\t<div class=\"jodit-symbols__container_table\">\n\t\t\t\t\t\t\t<table class=\"jodit-symbols__table\"><tbody></tbody></table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"jodit-symbols__container_preview\">\n\t\t\t\t\t\t\t<div class=\"jodit-symbols__preview\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`);\n            const preview = container.querySelector('.jodit-symbols__preview');\n            const table = container.querySelector('table');\n            const body = table.tBodies[0];\n            const chars = [];\n            for (let i = 0; i < jodit.o.specialCharacters.length;) {\n                const tr = jodit.c.element('tr');\n                for (let j = 0; j < this.__countInRow &&\n                    i < jodit.o.specialCharacters.length; j += 1, i += 1) {\n                    const td = jodit.c.element('td'), a = jodit.c.fromHTML(`<a\n\t\t\t\t\t\t\t\t\tdata-index=\"${i}\"\n\t\t\t\t\t\t\t\t\tdata-index-j=\"${j}\"\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\ttabindex=\"-1\"\n\t\t\t\t\t\t\t>${jodit.o.specialCharacters[i]}</a>`);\n                    chars.push(a);\n                    td.appendChild(a);\n                    tr.appendChild(td);\n                }\n                body.appendChild(tr);\n            }\n            const self = this;\n            jodit.e\n                .on(chars, 'focus', function () {\n                preview.innerHTML = this.innerHTML;\n            })\n                .on(chars, 'mousedown', function (e) {\n                if (Dom.isTag(this, 'a')) {\n                    jodit.s.focus();\n                    jodit.s.insertHTML(this.innerHTML);\n                    if (!(e === null || e === void 0 ? void 0 : e.shiftKey)) {\n                        jodit.e.fire(this, 'close_dialog');\n                    }\n                    e && e.preventDefault();\n                    e && e.stopImmediatePropagation();\n                }\n            })\n                .on(chars, 'mouseenter', function () {\n                if (Dom.isTag(this, 'a')) {\n                    this.focus();\n                }\n            })\n                .on(chars, 'keydown', (e) => {\n                const target = e.target;\n                if (Dom.isTag(target, 'a')) {\n                    const index = parseInt(attr(target, '-index') || '0', 10), jIndex = parseInt(attr(target, 'data-index-j') || '0', 10);\n                    let newIndex;\n                    switch (e.key) {\n                        case KEY_UP:\n                        case KEY_DOWN:\n                            newIndex =\n                                e.key === KEY_UP\n                                    ? index - self.__countInRow\n                                    : index + self.__countInRow;\n                            if (chars[newIndex] === undefined) {\n                                newIndex =\n                                    e.key === KEY_UP\n                                        ? Math.floor(chars.length /\n                                            self.__countInRow) *\n                                            self.__countInRow +\n                                            jIndex\n                                        : jIndex;\n                                if (newIndex > chars.length - 1) {\n                                    newIndex -= self.__countInRow;\n                                }\n                            }\n                            chars[newIndex] && chars[newIndex].focus();\n                            break;\n                        case KEY_RIGHT:\n                        case KEY_LEFT:\n                            newIndex =\n                                e.key === KEY_LEFT ? index - 1 : index + 1;\n                            if (chars[newIndex] === undefined) {\n                                newIndex =\n                                    e.key === KEY_LEFT\n                                        ? chars.length - 1\n                                        : 0;\n                            }\n                            chars[newIndex] && chars[newIndex].focus();\n                            break;\n                        case KEY_ENTER:\n                            jodit.e.fire(target, 'mousedown');\n                            e.stopImmediatePropagation();\n                            e.preventDefault();\n                            break;\n                    }\n                }\n            });\n            return container;\n        });\n    }\n    /** @override */\n    beforeDestruct(jodit) {\n        jodit.e.off('generateSpecialCharactersTable.symbols');\n    }\n}\npluginSystem.add('symbols', symbols);\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { call, convertMediaUrlToVideoEmbed } from \"../../core/helpers/index.js\";\nimport { Button } from \"../../core/ui/button/index.js\";\nimport { UIBlock, UIForm, UIInput, UITextArea } from \"../../core/ui/form/index.js\";\nimport { Icon } from \"../../core/ui/icon.js\";\nimport { Config } from \"../../config.js\";\nimport { TabsWidget } from \"../../modules/widget/index.js\";\nimport videoIcon from \"./video.svg.js\";\nConfig.prototype.video = {\n    parseUrlToVideoEmbed: convertMediaUrlToVideoEmbed,\n    defaultWidth: 400,\n    defaultHeight: 345\n};\nIcon.set('video', videoIcon);\nConfig.prototype.controls.video = {\n    popup: (jodit, current, close) => {\n        const formLink = new UIForm(jodit, [\n            new UIBlock(jodit, [\n                new UIInput(jodit, {\n                    name: 'url',\n                    required: true,\n                    label: 'URL',\n                    placeholder: 'https://',\n                    validators: ['url']\n                })\n            ]),\n            new UIBlock(jodit, [\n                Button(jodit, '', 'Insert', 'primary').onAction(() => formLink.submit())\n            ])\n        ]), formCode = new UIForm(jodit, [\n            new UIBlock(jodit, [\n                new UITextArea(jodit, {\n                    name: 'code',\n                    required: true,\n                    label: 'Embed code'\n                })\n            ]),\n            new UIBlock(jodit, [\n                Button(jodit, '', 'Insert', 'primary').onAction(() => formCode.submit())\n            ])\n        ]), tabs = [], insertCode = (code) => {\n            jodit.s.restore();\n            jodit.s.insertHTML(code);\n            close();\n        };\n        jodit.s.save();\n        tabs.push({\n            icon: 'link',\n            name: 'Link',\n            content: formLink.container\n        }, {\n            icon: 'source',\n            name: 'Code',\n            content: formCode.container\n        });\n        formLink.onSubmit(data => {\n            var _a, _b, _c, _d;\n            insertCode(call((_b = (_a = jodit.o.video) === null || _a === void 0 ? void 0 : _a.parseUrlToVideoEmbed) !== null && _b !== void 0 ? _b : convertMediaUrlToVideoEmbed, data.url, {\n                width: (_c = jodit.o.video) === null || _c === void 0 ? void 0 : _c.defaultWidth,\n                height: (_d = jodit.o.video) === null || _d === void 0 ? void 0 : _d.defaultHeight\n            }));\n        });\n        formCode.onSubmit(data => {\n            insertCode(data.code);\n        });\n        return TabsWidget(jodit, tabs);\n    },\n    tags: ['iframe'],\n    tooltip: 'Insert youtube/vimeo video'\n};\n","export default \"<svg xmlns='http://www.w3.org/2000/svg' viewBox=\\\"0 0 1792 1792\\\"> <path d=\\\"M1792 352v1088q0 42-39 59-13 5-25 5-27 0-45-19l-403-403v166q0 119-84.5 203.5t-203.5 84.5h-704q-119 0-203.5-84.5t-84.5-203.5v-704q0-119 84.5-203.5t203.5-84.5h704q119 0 203.5 84.5t84.5 203.5v165l403-402q18-19 45-19 12 0 25 5 39 17 39 59z\\\"/> </svg> \";\n","/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\nimport { pluginSystem } from \"../../core/global.js\";\nimport \"./config.js\";\nfunction video(editor) {\n    editor.registerButton({\n        name: 'video',\n        group: 'media'\n    });\n}\npluginSystem.add('video', video);\n","/**\n * Jodit Editor plugin to fetch and insert internal links via REST\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-01-04\n */\n\nimport { Jodit } from 'jodit';\nimport { fetchFaqsByAutocomplete } from '../../api';\nimport { Response } from '../../interfaces';\nimport phpmyfaq from './phpmyfaq.svg.js';\n\nJodit.modules.Icon.set('phpmyfaq', phpmyfaq);\n\nJodit.plugins.add('phpMyFAQ', (editor: Jodit): void => {\n  // Register the button\n  editor.registerButton({\n    name: 'phpMyFAQ',\n    group: 'insert',\n  });\n\n  // Register the command\n  editor.registerCommand('phpMyFAQ', (): void => {\n    const dialog = editor.dlg({ closeOnClickOverlay: true });\n\n    const content = `<form class=\"row row-cols-lg-auto g-3 align-items-center m-4\">\n      <div class=\"col-12\">\n        <label class=\"visually-hidden\" for=\"pmf-search-internal-links\">Search</label>\n        <input type=\"text\" class=\"form-control\" id=\"pmf-search-internal-links\" placeholder=\"Search\">\n      </div>\n    </form>\n    <div class=\"m-4\" id=\"pmf-search-results\"></div>\n    <div class=\"m-4\">\n      <button type=\"button\" class=\"btn btn-primary\" id=\"select-faq-button\">Select FAQ</button>\n    </div>`;\n\n    dialog\n      .setMod('theme', editor.o.theme)\n      .setHeader('phpMyFAQ Plugin')\n      .setContent(content)\n      .setSize(Math.min(900, screen.width), Math.min(640, screen.width));\n\n    dialog.open();\n\n    const searchInput = document.getElementById('pmf-search-internal-links') as HTMLInputElement;\n    const resultsContainer = document.getElementById('pmf-search-results') as HTMLDivElement;\n    const csrfToken = (document.getElementById('pmf-csrf-token') as HTMLInputElement).value;\n    const selectLink = document.getElementById('select-faq-button') as HTMLButtonElement;\n\n    searchInput.addEventListener('keyup', async (): Promise<void> => {\n      const query = searchInput.value;\n      if (query.length > 0) {\n        try {\n          const response: Response = await fetchFaqsByAutocomplete(query, csrfToken);\n\n          resultsContainer.innerHTML = '';\n          response.success.forEach((result) => {\n            resultsContainer.innerHTML += `<label class=\"form-check-label\">\n            <input class=\"form-check-input\" type=\"radio\" name=\"faqURL\" value=\"${result.url}\">\n            ${result.question}\n          </label><br>`;\n          });\n        } catch (error) {\n          console.error('Error:', (error as Error).message);\n        }\n      } else {\n        resultsContainer.innerHTML = '';\n      }\n    });\n\n    selectLink.addEventListener('click', (): void => {\n      const selected = document.querySelector('input[name=faqURL]:checked') as HTMLInputElement;\n      if (selected) {\n        const url = selected.value;\n        const question = selected.parentNode?.textContent?.trim() || '';\n        const anchor = `<a href=\"${url}\">${question}</a>`;\n        editor.selection.insertHTML(anchor);\n        dialog.close();\n      } else {\n        alert('Please select an FAQ.');\n      }\n    });\n  });\n});\n","const phpmyfaq: string = `\n<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1500 1500\"\n preserveAspectRatio=\"xMidYMid meet\">\n\n<g transform=\"translate(0.000000,1500) scale(0.100000,-0.100000)\"\nfill=\"#000000\" stroke=\"none\">\n<path d=\"M7410 14534 c-19 -2 -98 -9 -175 -14 -1187 -91 -2412 -550 -3235\n-1214 -290 -234 -841 -728 -1156 -1038 l-141 -138 49 -193 c280 -1104 430\n-1570 632 -1972 102 -201 160 -289 261 -391 129 -130 230 -165 347 -121 101\n39 274 261 536 687 221 360 435 607 707 816 645 494 1413 764 2177 764 514 0\n978 -101 1383 -300 304 -150 501 -305 705 -555 272 -335 452 -802 520 -1355\n32 -259 41 -756 20 -1080 -71 -1102 -278 -1970 -617 -2593 -375 -690 -1018\n-1315 -1868 -1814 -66 -39 -128 -80 -139 -92 -18 -20 -18 -22 4 -83 121 -326\n425 -936 583 -1167 29 -42 31 -43 71 -37 92 14 533 258 871 481 757 500 1512\n1213 2092 1975 406 535 701 1009 1002 1610 454 910 671 1586 746 2330 48 475\n42 1030 -15 1430 -112 771 -449 1569 -924 2180 -124 160 -213 259 -395 444\n-733 744 -1648 1202 -2736 1372 -335 52 -506 65 -900 69 -203 2 -386 1 -405\n-1z\"/>\n<path d=\"M2415 10278 c-15 -46 -48 -169 -75 -275 -224 -880 -299 -1807 -215\n-2649 120 -1204 554 -2193 1323 -3018 711 -761 1665 -1225 2767 -1346 55 -6\n255 -14 444 -17 l344 -6 -6 68 c-9 90 -38 147 -112 220 -68 67 -116 101 -486\n344 -1010 663 -1625 1302 -2033 2111 -228 450 -344 837 -402 1330 -14 121 -15\n204 -10 500 6 369 11 449 47 662 l21 128 -50 62 c-50 65 -535 702 -1097 1443\n-353 465 -400 525 -420 525 -9 0 -24 -32 -40 -82z\"/>\n<path d=\"M10335 3160 c-317 -20 -646 -135 -932 -327 -381 -255 -653 -633 -750\n-1043 -30 -131 -42 -383 -24 -510 58 -392 310 -743 671 -934 112 -58 254 -110\n365 -133 75 -15 137 -18 370 -18 246 1 292 3 377 22 219 48 629 246 813 393\n77 62 231 218 290 295 153 199 273 458 327 709 16 77 22 136 22 251 1 167 -12\n254 -56 395 -156 493 -644 858 -1200 895 -46 3 -101 7 -123 9 -22 1 -89 -1\n-150 -4z\"/>\n</g>\n</svg>\n`;\n\nexport default phpmyfaq;\n","/**\n * Jodit Editor plugin to insert source code snippets with syntax highlighting\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-01-05\n */\n\nimport { Jodit } from 'jodit';\nimport codeSnippet from '../code-snippet/code-snippet.svg.js';\n\nJodit.modules.Icon.set('codeSnippet', codeSnippet);\n\nJodit.plugins.add('codeSnippet', (editor: Jodit): void => {\n  // Register the button\n  editor.registerButton({\n    name: 'codeSnippet',\n    group: 'insert',\n    options: {\n      tooltip: 'Insert Source Code Snippet',\n    },\n  });\n\n  // Register the command\n  editor.registerCommand('codeSnippet', (): void => {\n    const dialog = editor.dlg({ closeOnClickOverlay: true });\n\n    const content = `<form class=\"row m-4\">\n      <div class=\"col-12 mb-2\">\n        <label class=\"visually-hidden\" for=\"programming-language\">Programming language</label>\n        <select class=\"form-select\" id=\"programming-language\" name=\"programming-language\">\n          <option value=\"plaintext\">Plain Text</option>\n          <option value=\"bash\">Bash</option>\n          <option value=\"c\">C</option>\n          <option value=\"cpp\">C++</option>\n          <option value=\"css\">CSS</option>\n          <option value=\"html\">HTML</option>\n          <option value=\"java\">Java</option>\n          <option value=\"javascript\">JavaScript</option>\n          <option value=\"json\">JSON</option>\n          <option value=\"php\">PHP</option>\n          <option value=\"python\">Python</option>\n          <option value=\"ruby\">Ruby</option>\n          <option value=\"sql\">SQL</option>\n          <option value=\"typescript\">TypeScript</option>\n          <option value=\"xml\">XML</option>\n        </select>\n      </div>\n      <div class=\"col-12 mb-2\">\n        <label class=\"visually-hidden\" for=\"code\">Source code</label>\n        <textarea class=\"form-control\" id=\"code\" rows=\"15\" placeholder=\"Paste your source code snippet here\"></textarea>\n      </div>\n      <div class=\"col-12\">\n        <button type=\"button\" class=\"btn btn-primary text-end\" id=\"add-code-snippet-button\">\n          Add source code snippet\n        </button>\n      </div>\n    </form>`;\n\n    dialog\n      .setMod('theme', editor.o.theme)\n      .setHeader('Insert Source Code Snippet')\n      .setContent(content)\n      .setSize(Math.min(900, screen.width), Math.min(640, screen.width));\n\n    dialog.open();\n\n    const addCodeSnippetButton = document.getElementById('add-code-snippet-button') as HTMLButtonElement;\n    const language = document.getElementById('programming-language') as HTMLSelectElement;\n    const code = document.getElementById('code') as HTMLTextAreaElement;\n\n    const encodeHTML = (str: string): string => {\n      return str\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n    };\n\n    addCodeSnippetButton.addEventListener('click', (): void => {\n      const selectedLanguage = language.value;\n      const selectedCode = code.value;\n      const codeSnippet = `<pre><code class=\"language-${selectedLanguage}\">${encodeHTML(selectedCode)}</code></pre>`;\n      editor.selection.insertHTML(codeSnippet);\n      editor.events.fire('change');\n      dialog.close();\n    });\n  });\n});\n","const codeSnippet: string = `<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 128 128\"\n preserveAspectRatio=\"xMidYMid meet\">\n\n<rect width=\"100%\" height=\"100%\" fill=\"none\" />\n\n<g transform=\"translate(0,128) scale(0.100000,-0.100000)\"\nfill=\"#000000\" stroke=\"none\">\n<path d=\"M261 1173 c-24 -9 -63 -35 -86 -58 -60 -59 -75 -112 -75 -261 0 -67\n-3 -129 -6 -138 -3 -9 -23 -20 -44 -26 -41 -11 -56 -35 -45 -70 4 -12 21 -24\n45 -30 21 -6 41 -17 44 -26 3 -9 6 -71 6 -138 0 -149 15 -202 75 -261 53 -53\n115 -75 216 -75 82 0 109 12 109 50 0 37 -27 50 -106 50 -95 0 -145 23 -174\n80 -17 33 -20 59 -20 169 0 102 -4 138 -17 166 -16 33 -16 37 0 70 13 28 17\n64 17 166 0 110 3 136 20 169 29 57 79 80 174 80 79 0 106 13 106 50 0 10 -7\n26 -16 34 -21 21 -162 20 -223 -1z\"/>\n<path d=\"M806 1174 c-9 -8 -16 -24 -16 -34 0 -37 27 -50 101 -50 89 0 141 -24\n169 -80 17 -33 20 -59 20 -169 0 -102 4 -138 17 -166 16 -33 16 -37 0 -70 -13\n-28 -17 -64 -17 -166 0 -110 -3 -136 -20 -169 -28 -56 -80 -80 -169 -80 -74 0\n-101 -13 -101 -50 0 -37 27 -50 104 -50 95 0 159 23 211 75 60 59 75 112 75\n261 0 67 3 129 6 138 3 9 23 20 44 26 67 18 67 82 0 100 -21 6 -41 17 -44 26\n-3 9 -6 71 -6 138 0 88 -5 136 -17 171 -21 63 -85 127 -148 148 -64 22 -188\n23 -209 1z\"/>\n<path d=\"M316 974 c-9 -8 -16 -24 -16 -34 0 -36 27 -50 100 -50 73 0 100 14\n100 50 0 36 -27 50 -100 50 -49 0 -73 -4 -84 -16z\"/>\n<path d=\"M616 974 c-9 -8 -16 -24 -16 -34 0 -44 22 -50 190 -50 131 0 161 3\n174 16 20 20 20 48 0 68 -23 24 -325 24 -348 0z\"/>\n<path d=\"M316 774 c-9 -8 -16 -24 -16 -34 0 -44 22 -50 190 -50 131 0 161 3\n174 16 20 20 20 48 0 68 -23 24 -325 24 -348 0z\"/>\n<path d=\"M796 774 c-9 -8 -16 -24 -16 -34 0 -36 27 -50 100 -50 73 0 100 14\n100 50 0 36 -27 50 -100 50 -49 0 -73 -4 -84 -16z\"/>\n<path d=\"M316 574 c-9 -8 -16 -24 -16 -34 0 -36 27 -50 100 -50 73 0 100 14\n100 50 0 36 -27 50 -100 50 -49 0 -73 -4 -84 -16z\"/>\n<path d=\"M616 574 c-9 -8 -16 -24 -16 -34 0 -44 22 -50 190 -50 131 0 161 3\n174 16 20 20 20 48 0 68 -23 24 -325 24 -348 0z\"/>\n<path d=\"M316 374 c-20 -20 -20 -48 0 -68 23 -24 325 -24 348 0 20 20 20 48 0\n68 -23 24 -325 24 -348 0z\"/>\n<path d=\"M796 374 c-9 -8 -16 -24 -16 -34 0 -36 27 -50 100 -50 73 0 100 14\n100 50 0 36 -27 50 -100 50 -49 0 -73 -4 -84 -16z\"/>\n</g>\n</svg>`;\n\nexport default codeSnippet;\n","/**\n * Jodit Editor for phpMyFAQ\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-01-31\n */\n\nimport { Jodit } from 'jodit';\n\nimport 'jodit/esm/plugins/class-span/class-span.js';\nimport 'jodit/esm/plugins/clean-html/clean-html.js';\nimport 'jodit/esm/plugins/clipboard/clipboard.js';\nimport 'jodit/esm/plugins/copy-format/copy-format.js';\nimport 'jodit/esm/plugins/delete/delete.js';\nimport 'jodit/esm/plugins/fullsize/fullsize.js';\nimport 'jodit/esm/plugins/hr/hr.js';\nimport 'jodit/esm/plugins/image/image.js';\nimport 'jodit/esm/plugins/image-processor/image-processor.js';\nimport 'jodit/esm/plugins/image-properties/image-properties.js';\nimport 'jodit/esm/plugins/indent/indent.js';\nimport 'jodit/esm/plugins/justify/justify.js';\nimport 'jodit/esm/plugins/line-height/line-height.js';\nimport 'jodit/esm/plugins/media/media.js';\nimport 'jodit/esm/plugins/paste-storage/paste-storage.js';\nimport 'jodit/esm/plugins/paste-from-word/paste-from-word.js';\nimport 'jodit/esm/plugins/preview/preview.js';\nimport 'jodit/esm/plugins/print/print.js';\nimport 'jodit/esm/plugins/resizer/resizer.js';\nimport 'jodit/esm/plugins/search/search.js';\nimport 'jodit/esm/plugins/select/select.js';\nimport 'jodit/esm/plugins/source/source.js';\nimport 'jodit/esm/plugins/symbols/symbols.js';\nimport 'jodit/esm/modules/uploader/uploader.js';\nimport 'jodit/esm/plugins/video/video.js';\nimport '../plugins/phpmyfaq/phpmyfaq.js';\nimport '../plugins/code-snippet/code-snippet.js';\nimport hljs from 'highlight.js';\n\nexport const renderEditor = () => {\n  const editor = document.getElementById('editor') as HTMLElement | null;\n  if (!editor) {\n    return;\n  }\n\n  // Detect browser color scheme preference (dark/light)\n  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\n  const joditEditor = Jodit.make(editor, {\n    zIndex: 0,\n    readonly: false,\n    beautifyHTML: false,\n    sourceEditor: 'area',\n    activeButtonsInReadOnly: ['source', 'fullsize', 'print', 'about', 'dots'],\n    toolbarButtonSize: 'middle',\n    theme: prefersDark.matches ? 'dark' : 'default',\n    saveModeInStorage: false,\n    spellcheck: true,\n    editorClassName: false,\n    triggerChangeEvent: true,\n    width: 'auto',\n    height: 'auto',\n    minHeight: 400,\n    direction: '',\n    language: 'auto',\n    debugLanguage: false,\n    tabIndex: -1,\n    toolbar: true,\n    enter: 'p',\n    defaultMode: Jodit.MODE_WYSIWYG,\n    useSplitMode: false,\n    askBeforePasteFromWord: true,\n    processPasteFromWord: true,\n    defaultActionOnPasteFromWord: 'insert_clear_html',\n    colors: {\n      greyscale: [\n        '#000000',\n        '#434343',\n        '#666666',\n        '#999999',\n        '#B7B7B7',\n        '#CCCCCC',\n        '#D9D9D9',\n        '#EFEFEF',\n        '#F3F3F3',\n        '#FFFFFF',\n      ],\n      palette: [\n        '#980000',\n        '#FF0000',\n        '#FF9900',\n        '#FFFF00',\n        '#00F0F0',\n        '#00FFFF',\n        '#4A86E8',\n        '#0000FF',\n        '#9900FF',\n        '#FF00FF',\n      ],\n      full: [\n        '#E6B8AF',\n        '#F4CCCC',\n        '#FCE5CD',\n        '#FFF2CC',\n        '#D9EAD3',\n        '#D0E0E3',\n        '#C9DAF8',\n        '#CFE2F3',\n        '#D9D2E9',\n        '#EAD1DC',\n        '#DD7E6B',\n        '#EA9999',\n        '#F9CB9C',\n        '#FFE599',\n        '#B6D7A8',\n        '#A2C4C9',\n        '#A4C2F4',\n        '#9FC5E8',\n        '#B4A7D6',\n        '#D5A6BD',\n        '#CC4125',\n        '#E06666',\n        '#F6B26B',\n        '#FFD966',\n        '#93C47D',\n        '#76A5AF',\n        '#6D9EEB',\n        '#6FA8DC',\n        '#8E7CC3',\n        '#C27BA0',\n        '#A61C00',\n        '#CC0000',\n        '#E69138',\n        '#F1C232',\n        '#6AA84F',\n        '#45818E',\n        '#3C78D8',\n        '#3D85C6',\n        '#674EA7',\n        '#A64D79',\n        '#85200C',\n        '#990000',\n        '#B45F06',\n        '#BF9000',\n        '#38761D',\n        '#134F5C',\n        '#1155CC',\n        '#0B5394',\n        '#351C75',\n        '#733554',\n        '#5B0F00',\n        '#660000',\n        '#783F04',\n        '#7F6000',\n        '#274E13',\n        '#0C343D',\n        '#1C4587',\n        '#073763',\n        '#20124D',\n        '#4C1130',\n      ],\n    },\n    colorPickerDefaultTab: 'background',\n    imageDefaultWidth: 300,\n    imageProcessor: { replaceDataURIToBlobIdInView: false },\n    removeButtons: [],\n    disablePlugins: [],\n    extraPlugins: ['phpMyFAQ', 'codeSnippet'],\n    extraButtons: [],\n    buttons: [\n      'source',\n      '|',\n      'bold',\n      'strikethrough',\n      'underline',\n      'italic',\n      '|',\n      'ul',\n      'ol',\n      'superscript',\n      'subscript',\n      '|',\n      'outdent',\n      'indent',\n      '|',\n      'font',\n      'fontsize',\n      'lineHeight',\n      'brush',\n      'paragraph',\n      'left',\n      'center',\n      'right',\n      'justify',\n      '|',\n      'copy',\n      'cut',\n      'paste',\n      'selectall',\n      '|',\n      'image',\n      'video',\n      'table',\n      'link',\n      '|',\n      'undo',\n      'redo',\n      '|',\n      'classSpan',\n      'hr',\n      'eraser',\n      'copyformat',\n      '|',\n      'symbols',\n      'fullsize',\n      'preview',\n      'print',\n      '|',\n      'phpMyFAQ',\n      'codeSnippet',\n    ],\n    events: {},\n    textIcons: false,\n    uploader: {\n      url: '/admin/api/content/images?csrf=' + (document.getElementById('pmf-csrf-token') as HTMLInputElement).value,\n      format: 'json',\n      isSuccess: (response: any) => {\n        return !response.error;\n      },\n      getMessage: (response: any) => {\n        return response.msg;\n      },\n    },\n    filebrowser: {\n      ajax: {\n        url: '/admin/api/media-browser',\n        contentType: 'application/json; charset=UTF-8',\n      },\n      createNewFolder: false,\n      deleteFolder: false,\n      moveFolder: false,\n      showFoldersPanel: false,\n      showFileSize: true,\n      showFileName: true,\n    },\n  });\n\n  // Automatically update the editor theme when the system color scheme changes\n  const setJoditTheme = (theme: 'dark' | 'default'): void => {\n    // Update Jodit option (kept for consistency)\n    (joditEditor as any).options.theme = theme;\n\n    // Toggle container theme classes explicitly to reflect the change immediately\n    const container: HTMLDivElement = joditEditor.container;\n    container.classList.remove('jodit_theme_default', 'jodit_theme_dark');\n    container.classList.add(theme === 'dark' ? 'jodit_theme_dark' : 'jodit_theme_default');\n  };\n\n  const applyTheme = (): void => {\n    setJoditTheme(prefersDark.matches ? 'dark' : 'default');\n  };\n\n  if (typeof prefersDark.addEventListener === 'function') {\n    prefersDark.addEventListener('change', applyTheme);\n  } else if (typeof (prefersDark as any).addListener === 'function') {\n    // Fallback for older Safari versions\n    (prefersDark as any).addListener(applyTheme);\n  }\n\n  // Keep Jodit in sync with global Bootstrap theme toggles (manual light/dark)\n  const applyThemeFromAttr = (): void => {\n    const themeAttr: string | null = document.documentElement.getAttribute('data-bs-theme');\n    setJoditTheme(themeAttr === 'dark' ? 'dark' : 'default');\n  };\n\n  // Observe changes to the data-bs-theme attribute\n  const themeObserver = new MutationObserver((mutations): void => {\n    for (const m of mutations) {\n      if (m.type === 'attributes' && m.attributeName === 'data-bs-theme') {\n        applyThemeFromAttr();\n      }\n    }\n  });\n  themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-bs-theme'] });\n\n  // Sync across tabs/windows when the localStorage key changes\n  window.addEventListener('storage', (e: StorageEvent): void => {\n    if (e.key === 'pmf-theme') {\n      applyThemeFromAttr();\n    }\n  });\n\n  // Ensure initial theme sync with current data-bs-theme attribute (if present)\n  applyThemeFromAttr();\n\n  joditEditor.events.on('afterSetValue', (): void => {\n    joditEditor.container.querySelectorAll('pre code').forEach((block: Element): void => {\n      hljs.highlightElement(block as HTMLElement);\n    });\n  });\n\n  joditEditor.events.on('change', (): void => {\n    joditEditor.container.querySelectorAll('pre code').forEach((block: Element): void => {\n      hljs.highlightElement(block as HTMLElement);\n    });\n  });\n};\n","/**\n * FAQ administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-07-22\n */\n\nimport { deleteAttachments } from '../api';\nimport { pushNotification } from '../../../../assets/src/utils';\n\nconst showHelp = (option: string): void => {\n  const optionHelp = document.getElementById(`${option}Help`) as HTMLElement;\n  optionHelp.classList.remove('visually-hidden');\n  optionHelp.addEventListener('click', () => (optionHelp.style.opacity = '0'));\n  optionHelp.addEventListener('transitionend', () => optionHelp.remove());\n};\n\nexport const handleFaqForm = (): void => {\n  const deleteAttachmentButtons = document.querySelectorAll('.pmf-delete-attachment-button');\n  const inputTags = document.getElementById('tags') as HTMLInputElement | null;\n  const inputSearchKeywords = document.getElementById('keywords') as HTMLInputElement | null;\n\n  if (inputTags) {\n    inputTags.addEventListener('focus', () => showHelp('tags'));\n  }\n  if (inputSearchKeywords) {\n    inputSearchKeywords.addEventListener('focus', () => showHelp('keywords'));\n  }\n  if (deleteAttachmentButtons) {\n    deleteAttachmentButtons.forEach((button) => {\n      button.addEventListener('click', async (event: Event) => {\n        event.preventDefault();\n\n        const target = event.target as HTMLElement;\n        const attachmentId = target.getAttribute('data-pmf-attachment-id') as string;\n        const csrfToken = target.getAttribute('data-pmf-csrf-token') as string;\n\n        const response = await deleteAttachments(attachmentId, csrfToken);\n\n        if (response.success) {\n          const listItemToDelete = document.getElementById(`attachment-id-${attachmentId}`) as HTMLElement;\n          listItemToDelete.addEventListener('click', () => (listItemToDelete.style.opacity = '0'));\n          listItemToDelete.addEventListener('transitionend', () => listItemToDelete.remove());\n          pushNotification(response.success);\n        }\n        if (response.error) {\n          pushNotification(response.error);\n        }\n      });\n    });\n  }\n\n  const categoryOptions = document.querySelector('#phpmyfaq-categories') as HTMLSelectElement | null;\n\n  if (categoryOptions) {\n    Array.from(categoryOptions.selectedOptions).map(({ value }) => value);\n    // Override FAQ permissions with Category permission to avoid confused users\n    categoryOptions.addEventListener('click', (event) => {\n      event.preventDefault();\n      const categories = Array.from(categoryOptions.selectedOptions).map(({ value }) => value);\n      getCategoryPermissions(categories);\n    });\n  }\n\n  const questionInput = document.getElementById('question') as HTMLInputElement | null;\n  if (questionInput) {\n    questionInput.addEventListener('input', checkForHash);\n  }\n};\n\nconst getCategoryPermissions = (categories: string[]): void => {\n  fetch(`./api/category/permissions/${categories}`)\n    .then((response) => response.json())\n    .then((permissions) => {\n      setPermissions(permissions);\n    });\n};\n\nconst setPermissions = (permissions: { user: string[]; group: string[] }): void => {\n  const perms = permissions;\n\n  // Users\n  if (-1 === parseInt(perms.user[0])) {\n    (document.getElementById('restrictedusers') as HTMLInputElement).checked = false;\n    (document.getElementById('allusers') as HTMLInputElement).checked = true;\n  } else {\n    (document.getElementById('allusers') as HTMLInputElement).checked = false;\n    (document.getElementById('restrictedusers') as HTMLInputElement).checked = true;\n    perms.user.forEach((value) => {\n      (document.querySelector(`#selected-user option[value='${value}']`) as HTMLOptionElement).selected = true;\n    });\n  }\n\n  // Groups\n  const restrictedGroups = document.getElementById('restrictedgroups') as HTMLInputElement | null;\n  if (restrictedGroups) {\n    const options = document.querySelectorAll('#restrictedgroups option') as NodeListOf<HTMLOptionElement>;\n    const allGroups = document.getElementById('allgroups') as HTMLInputElement | null;\n    options.forEach((option) => {\n      option.removeAttribute('selected');\n    });\n    if (-1 === parseInt(perms.group[0])) {\n      restrictedGroups.checked = false;\n      restrictedGroups.disabled = false;\n      if (allGroups) {\n        allGroups.checked = true;\n        allGroups.disabled = false;\n      }\n    } else {\n      if (allGroups) {\n        allGroups.checked = false;\n        allGroups.disabled = true;\n      }\n      restrictedGroups.checked = true;\n      restrictedGroups.disabled = false;\n      perms.group.forEach((value) => {\n        const optionSelected = document.querySelector(\n          `#restrictedgroups option[value='${value}']`\n        ) as HTMLOptionElement;\n        optionSelected.setAttribute('selected', 'selected');\n      });\n    }\n  }\n};\n\nconst checkForHash = (): void => {\n  const questionInputValue = (document.getElementById('question') as HTMLInputElement).value;\n  const questionHelp = document.getElementById('questionHelp') as HTMLElement;\n  const submitButton = document.getElementById('faqEditorSubmit') as HTMLButtonElement;\n  if (questionInputValue.includes('#')) {\n    questionHelp.classList.remove('visually-hidden');\n    submitButton.setAttribute('disabled', 'true');\n  } else {\n    questionHelp.classList.add('visually-hidden');\n    submitButton.removeAttribute('disabled');\n  }\n};\n","/**\n * Autocomplete for FAQ management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-12-27\n */\n\nimport autocomplete, { AutocompleteItem } from 'autocompleter';\nimport { fetchFaqsByAutocomplete } from '../api';\nimport { addElement } from '../../../../assets/src/utils';\n\ninterface Faq {\n  question: string;\n  adminUrl: string;\n}\n\ntype FaqItem = Faq & AutocompleteItem;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const autoComplete = document.getElementById('pmf-faq-overview-search-input') as HTMLInputElement | null;\n\n  if (autoComplete) {\n    const csrfToken = (document.getElementById('pmf-csrf-token') as HTMLInputElement).value;\n    autocomplete<FaqItem>({\n      input: autoComplete,\n      minLength: 1,\n      onSelect: (item: FaqItem) => {\n        window.location.href = item.adminUrl;\n      },\n      fetch: async (text: string, update: (items: FaqItem[]) => void) => {\n        const match = text.toLowerCase();\n        const faqs = await fetchFaqsByAutocomplete(match, csrfToken);\n        update(\n          faqs.success.filter((n: FaqItem) => {\n            return n.question.toLowerCase().indexOf(match) !== -1;\n          })\n        );\n      },\n      render: (item: FaqItem, currentValue: string): HTMLDivElement => {\n        const regex = new RegExp(currentValue, 'gi');\n        return addElement('div', {\n          classList: 'pmf-faq-list-result border',\n          innerHTML: item.question.replace(regex, (match) => `<strong>${match}</strong>`),\n        }) as HTMLDivElement;\n      },\n      emptyMsg: 'No users found',\n    });\n  }\n});\n","/**\n * FAQ edit handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-04-30\n */\n\nimport { create, update, deleteFaq } from '../api';\nimport { pushErrorNotification, pushNotification, serialize } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\ninterface SerializedData {\n  faqId: string;\n  [key: string]: any;\n}\n\nexport const handleSaveFaqData = (): void => {\n  const submitButton = document.getElementById('faqEditorSubmit') as HTMLButtonElement | null;\n\n  if (submitButton) {\n    submitButton.addEventListener('click', async (event: Event) => {\n      event.preventDefault();\n      const form = document.getElementById('faqEditor') as HTMLFormElement;\n      const formData = new FormData(form);\n\n      const serializedData = serialize(formData) as SerializedData;\n\n      let response: Response | undefined;\n      if (serializedData.faqId === '0') {\n        response = await create(serializedData);\n      } else {\n        response = await update(serializedData);\n      }\n\n      if (response?.success) {\n        const data = response.data ? JSON.parse(response.data) : {};\n        const faqId = document.getElementById('faqId') as HTMLInputElement;\n        const revisionId = document.getElementById('revisionId') as HTMLInputElement;\n\n        faqId.value = data.id;\n        revisionId.value = data.revisionId;\n\n        pushNotification(response.success);\n      } else {\n        if (response && response.error) {\n          pushErrorNotification(response.error);\n        }\n      }\n    });\n  }\n};\n\nexport const handleDeleteFaqEditorModal = (): void => {\n  const deleteButton = document.getElementById('faqEditorDelete') as HTMLButtonElement | null;\n  const confirmDeleteButton = document.getElementById('pmf-confirm-delete-faq') as HTMLButtonElement | null;\n\n  if (!deleteButton || !confirmDeleteButton) {\n    return;\n  }\n\n  confirmDeleteButton.addEventListener('click', async (event: Event): Promise<void> => {\n    event.preventDefault();\n\n    const faqId = deleteButton.getAttribute('data-faq-id') as string;\n    const faqLanguage = deleteButton.getAttribute('data-faq-language') as string;\n    const csrfToken = deleteButton.getAttribute('data-pmf-csrf-token') as string;\n\n    if (!faqId || !faqLanguage || !csrfToken) {\n      pushErrorNotification('Fehlende Parameter zum Lschen der FAQ.');\n      return;\n    }\n\n    try {\n      const response = await deleteFaq(faqId, faqLanguage, csrfToken);\n\n      if (response?.success) {\n        pushNotification(response.success);\n        // Nach kurzer Verzgerung zur FAQ-bersicht umleiten\n        window.setTimeout(() => {\n          window.location.href = './faqs';\n        }, 1000);\n      } else if (response?.error) {\n        pushErrorNotification(response.error);\n      } else {\n        pushErrorNotification('Beim Lschen der FAQ ist ein unbekannter Fehler aufgetreten.');\n      }\n    } catch (error) {\n      console.error(error);\n      pushErrorNotification('Beim Lschen der FAQ ist ein Fehler aufgetreten.');\n    }\n  });\n};\n\nexport const handleUpdateQuestion = (): void => {\n  const input = document.getElementById('question') as HTMLInputElement | null;\n  if (input) {\n    input.addEventListener('input', () => {\n      const output = document.getElementById('pmf-admin-question-output') as HTMLElement;\n      output.innerText = `: ${input.value}`;\n    });\n  }\n};\n\nexport const handleResetButton = (): void => {\n  const resetButton = document.querySelector('button[type=\"reset\"]') as HTMLButtonElement | null;\n  if (resetButton) {\n    resetButton.addEventListener('click', (event: Event): void => {\n      event.preventDefault();\n      const form = document.getElementById('faqEditor') as HTMLFormElement;\n      form.reset();\n      const revisionSelect = document.getElementById('selectedRevisionId') as HTMLSelectElement | null;\n\n      if (revisionSelect && revisionSelect.options.length > 0) {\n        const lastOption = revisionSelect.options[revisionSelect.options.length - 1] as HTMLOptionElement;\n        revisionSelect.value = lastOption.value;\n        revisionSelect.dispatchEvent(new Event('change'));\n      }\n    });\n  }\n};\n","/**\n * Glossary administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-03-05\n */\n\nimport { createGlossary, deleteGlossary, getGlossary, updateGlossary } from '../api';\nimport { addElement, pushNotification } from '../../../../assets/src/utils';\n\nexport const handleDeleteGlossary = (): void => {\n  const deleteButtons: NodeListOf<HTMLButtonElement> = document.querySelectorAll('.pmf-admin-delete-glossary');\n\n  if (deleteButtons) {\n    deleteButtons.forEach((button: HTMLButtonElement): void => {\n      button.addEventListener('click', async (event: Event): Promise<void> => {\n        event.preventDefault();\n\n        const glossaryId = button.getAttribute('data-pmf-glossary-id') as string;\n        const csrfToken = button.getAttribute('data-pmf-csrf-token') as string;\n        const glossaryLang = button.getAttribute('data-pmf-glossary-language') as string;\n\n        const response = await deleteGlossary(glossaryId, glossaryLang, csrfToken);\n\n        if (response) {\n          (button.closest('tr') as HTMLElement).remove();\n          pushNotification(response.success);\n        }\n      });\n    });\n  }\n};\n\nexport const handleAddGlossary = (): void => {\n  const saveGlossaryButton = document.getElementById('pmf-admin-glossary-add') as HTMLButtonElement | null;\n  const modal = document.getElementById('addGlossaryModal') as HTMLElement | null;\n  const modalBackdrop: HTMLCollectionOf<Element> = document.getElementsByClassName('modal-backdrop fade show');\n\n  if (saveGlossaryButton) {\n    saveGlossaryButton.addEventListener('click', async (event: Event) => {\n      event.preventDefault();\n\n      const glossaryLanguage = (document.getElementById('language') as HTMLInputElement).value as string;\n      const glossaryItem = (document.getElementById('item') as HTMLInputElement).value as string;\n      const glossaryDefinition = (document.getElementById('definition') as HTMLInputElement).value as string;\n      const csrfToken = (document.getElementById('pmf-csrf-token') as HTMLInputElement).value as string;\n\n      const response = await createGlossary(glossaryLanguage, glossaryItem, glossaryDefinition, csrfToken);\n\n      if (response) {\n        if (modal) {\n          modal.style.display = 'none';\n          modal.classList.remove('show');\n        }\n        if (modalBackdrop[0]) {\n          modalBackdrop[0].parentNode?.removeChild(modalBackdrop[0]);\n        }\n\n        const tableBody = document.querySelector('#pmf-admin-glossary-table tbody') as HTMLElement;\n        const row = addElement('tr', {}, [\n          addElement('td', { innerText: glossaryItem }),\n          addElement('td', { innerText: glossaryDefinition }),\n          addElement('td', { classList: 'text-end' }, [\n            addElement(\n              'button',\n              {\n                classList: 'btn btn-danger pmf-admin-delete-glossary',\n                'data-pmf-glossary-id': glossaryItem,\n                'data-pmf-csrf-token': '',\n                'data-pmf-glossary-language': glossaryLanguage,\n                type: 'button',\n                innerText: 'Delete',\n              },\n              [addElement('i', { class: 'bi bi-trash' })]\n            ),\n          ]),\n        ]);\n        tableBody.appendChild(row);\n        pushNotification(response.success);\n      }\n    });\n  }\n};\n\nexport const onOpenUpdateGlossaryModal = (): void => {\n  const updateGlossaryModal = document.getElementById('updateGlossaryModal') as HTMLElement | null;\n\n  if (updateGlossaryModal) {\n    updateGlossaryModal.addEventListener('show.bs.modal', async (event: Event): Promise<void> => {\n      const relatedEvent = event as unknown as { relatedTarget?: Element };\n      let triggeredElement =\n        (relatedEvent.relatedTarget as HTMLElement | null) ?? (document.activeElement as HTMLElement | null);\n\n      // If focus is on a child element, climb up to the element carrying the data attributes\n      if (triggeredElement && !triggeredElement.hasAttribute('data-pmf-glossary-id')) {\n        triggeredElement = triggeredElement.closest('[data-pmf-glossary-id]') as HTMLElement | null;\n      }\n\n      const glossaryId = triggeredElement?.getAttribute('data-pmf-glossary-id') ?? null;\n      const glossaryLang = triggeredElement?.getAttribute('data-pmf-glossary-language') ?? null;\n\n      if (!glossaryId || !glossaryLang) {\n        return;\n      }\n\n      // Pre-fill hidden fields so they are present even if the API call fails\n      (document.getElementById('update-id') as HTMLInputElement).value = glossaryId;\n      (document.getElementById('update-language') as HTMLInputElement).value = glossaryLang;\n\n      try {\n        const response = await getGlossary(glossaryId, glossaryLang);\n\n        (document.getElementById('update-item') as HTMLInputElement).value = response?.item ?? '';\n        (document.getElementById('update-definition') as HTMLInputElement).value = response?.definition ?? '';\n      } catch (e) {\n        pushNotification('Unable to load glossary item. Please try again.');\n      }\n    });\n  }\n};\n\nexport const handleUpdateGlossary = (): void => {\n  const updateGlossaryButton = document.getElementById('pmf-admin-glossary-update') as HTMLButtonElement | null;\n  const modal = document.getElementById('updateGlossaryModal') as HTMLElement | null;\n  const modalBackdrop: HTMLCollectionOf<Element> = document.getElementsByClassName('modal-backdrop fade show');\n\n  if (updateGlossaryButton) {\n    updateGlossaryButton.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n\n      const glossaryId = (document.getElementById('update-id') as HTMLInputElement).value as string;\n      const glossaryLanguage = (document.getElementById('update-language') as HTMLInputElement).value as string;\n      const glossaryItem = (document.getElementById('update-item') as HTMLInputElement).value as string;\n      const glossaryDefinition = (document.getElementById('update-definition') as HTMLInputElement).value as string;\n      const csrfToken = (document.getElementById('update-csrf-token') as HTMLInputElement).value as string;\n\n      const response = await updateGlossary(glossaryId, glossaryLanguage, glossaryItem, glossaryDefinition, csrfToken);\n\n      if (response) {\n        if (modal) {\n          modal.style.display = 'none';\n          modal.classList.remove('show');\n        }\n        if (modalBackdrop[0]) {\n          modalBackdrop[0].parentNode?.removeChild(modalBackdrop[0]);\n        }\n\n        const itemLink = document.querySelector(\n          `#pmf-glossary-id-${glossaryId} td:nth-child(1) a`\n        ) as HTMLElement | null;\n        const definitionCell = document.querySelector(\n          `#pmf-glossary-id-${glossaryId} td:nth-child(2)`\n        ) as HTMLElement | null;\n\n        if (itemLink) {\n          itemLink.innerText = glossaryItem;\n        }\n        if (definitionCell) {\n          definitionCell.innerText = glossaryDefinition;\n        }\n\n        pushNotification(response.success);\n      }\n    });\n  }\n};\n","/**\n * Fetch data for glossary management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-01-27\n */\n\nimport { Response } from '../interfaces';\n\nexport const createGlossary = async (\n  language: string,\n  item: string,\n  definition: string,\n  csrfToken: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/glossary/create', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrfToken,\n        language: language,\n        item: item,\n        definition: definition,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteGlossary = async (\n  glossaryId: string,\n  glossaryLang: string,\n  csrfToken: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/glossary/delete', {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrfToken,\n        id: glossaryId,\n        lang: glossaryLang,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const getGlossary = async (glossaryId: string, glossaryLanguage: string): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/glossary/${glossaryId}/${glossaryLanguage}`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const updateGlossary = async (\n  glossaryId: string,\n  glossaryLanguage: string,\n  item: string,\n  definition: string,\n  csrfToken: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch('./api/glossary/update', {\n      method: 'PUT',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: csrfToken,\n        id: glossaryId,\n        lang: glossaryLanguage,\n        item: item,\n        definition: definition,\n      }),\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Markdown administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-03-05\n */\n\nimport { Modal } from 'bootstrap';\nimport { fetchMarkdownContent, fetchMediaBrowserContent } from '../api';\nimport { MediaBrowserApiResponse, Response } from '../interfaces';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\n\nexport const handleMarkdownForm = (): void => {\n  const answerHeight = localStorage.getItem('phpmyfaq.answer.height') as string;\n  const answer = document.getElementById('answer-markdown') as HTMLTextAreaElement;\n  const markdownTabs = document.getElementById('markdown-tabs') as HTMLElement;\n  const insertImage = document.getElementById('pmf-markdown-insert-image') as HTMLElement;\n  const insertImageButton = document.getElementById('pmf-markdown-insert-image-button') as HTMLElement;\n  const imageUpload = document.getElementById('pmf-markdown-upload-image') as HTMLElement;\n  const imageUploadInput = document.getElementById('pmf-markdown-upload-image-input') as HTMLElement;\n\n  // Store the height of the textarea\n  if (answer) {\n    if (answerHeight !== 'undefined') {\n      answer.style.height = answerHeight as string;\n    }\n\n    answer.addEventListener('mouseup', () => {\n      localStorage.setItem('phpmyfaq.answer.height', answer.style.height);\n    });\n  }\n\n  // Handle the Markdown preview\n  if (markdownTabs) {\n    const tab = document.querySelector('a[data-markdown-tab=\"preview\"]') as HTMLElement;\n\n    if (tab) {\n      tab.addEventListener('shown.bs.tab', async (): Promise<void> => {\n        const preview = document.getElementById('markdown-preview') as HTMLElement;\n        if (preview && answer) {\n          preview.style.height = answer.style.height;\n          try {\n            const response = (await fetchMarkdownContent(answer.value)) as unknown as Response;\n            preview.innerHTML = response.success;\n          } catch (error) {\n            if (error instanceof Error) {\n              console.error(error);\n            } else {\n              console.error('Unknown error:', error);\n            }\n          }\n        }\n      });\n    }\n  }\n\n  // Handle inserting images from Modal\n  if (insertImage) {\n    const container = document.getElementById('pmf-markdown-insert-image-modal') as HTMLElement;\n    const modal = new Modal(container);\n    insertImage.addEventListener('click', async (event: Event): Promise<void> => {\n      event.preventDefault();\n      modal.show();\n\n      const response = (await fetchMediaBrowserContent()) as MediaBrowserApiResponse;\n\n      if (response.success) {\n        const list = document.getElementById('pmf-markdown-insert-image-list') as HTMLElement;\n        list.innerHTML = ''; // Clear previous content\n\n        response.data.sources.forEach((source): void => {\n          source.files.forEach((file): void => {\n            const listItem = document.createElement('div') as HTMLElement;\n            listItem.classList.add('list-group-item', 'd-flex', 'align-items-center');\n            listItem.innerHTML = `\n              <div class=\"form-check me-2\">\n                <input type=\"checkbox\" class=\"form-check-input\" id=\"checkbox-${file.file}\" data-image-url=\"${source.baseurl}/${source.path}/${file.file}\">\n                <label class=\"form-check-label d-none\" for=\"checkbox-${file.file}\" aria-hidden=\"true\">Select</label>\n              </div>\n              <img src=\"${source.baseurl}/${source.path}/${file.file}\" class=\"img-thumbnail\" alt=\"${file.file}\" style=\"height: 100px;\">\n            `;\n            list.appendChild(listItem);\n          });\n        });\n      }\n    });\n\n    // Add event listener to the insert image button\n    insertImageButton.addEventListener('click', (): void => {\n      const checkboxes = document.querySelectorAll('.form-check-input:checked') as NodeListOf<HTMLInputElement>;\n      let markdownImages: string = '';\n\n      checkboxes.forEach((checkbox: HTMLInputElement): void => {\n        const imageUrl = (checkbox as HTMLInputElement).dataset.imageUrl as string;\n        if (imageUrl) {\n          markdownImages += `![Image](${imageUrl})\\n`;\n        }\n      });\n\n      // Insert the Markdown images at the cursor position\n      const startPos: number = answer.selectionStart;\n      const endPos: number = answer.selectionEnd;\n      answer.value = answer.value.substring(0, startPos) + markdownImages + answer.value.substring(endPos);\n      answer.setSelectionRange(startPos + markdownImages.length, startPos + markdownImages.length);\n      answer.focus();\n\n      modal.hide();\n    });\n  }\n\n  // Handle image upload\n  if (imageUpload) {\n    imageUpload.addEventListener('click', (event: Event): void => {\n      event.preventDefault();\n      imageUploadInput.click();\n    });\n\n    imageUploadInput.addEventListener('change', async (event: Event): Promise<void> => {\n      const input = event.target as HTMLInputElement;\n      const csrfToken = (document.getElementById('pmf-markdown-upload-image-csrf-token') as HTMLInputElement)\n        .value as string;\n      if (input.files) {\n        const formData = new FormData();\n        for (const file of input.files) {\n          formData.append('files[]', file);\n        }\n\n        try {\n          const response = await fetch('./api/content/images?csrf=' + csrfToken, {\n            method: 'POST',\n            body: formData,\n          });\n\n          if (!response.ok) {\n            throw new Error('Network response was not ok');\n          }\n\n          const responseData = await response.json();\n          if (responseData.success) {\n            pushNotification('Files uploaded successfully');\n          } else {\n            pushErrorNotification('Upload failed:' + responseData.messages);\n          }\n        } catch (error) {\n          pushErrorNotification('Error uploading files: ' + error);\n        }\n      }\n    });\n  }\n};\n","/**\n * Fetch data from Markdown processor API\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-03-03\n */\nimport { Response } from '../interfaces';\n\nexport const fetchMarkdownContent = async (text: string): Promise<Response> => {\n  try {\n    const response = await fetch(`./api/content/markdown`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ text }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Fetch data from media browser\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2025-03-03\n */\n\nimport { MediaBrowserApiResponse } from '../interfaces/';\n\nexport const fetchMediaBrowserContent = async (): Promise<MediaBrowserApiResponse> => {\n  try {\n    const response = await fetch(`./api/media-browser`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ action: 'files' }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * News administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @author    Jan Harms <modelrailroader@gmx-topmail.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-04-20\n */\n\nimport { activateNews, addNews, deleteNews, updateNews } from '../api';\nimport { Modal } from 'bootstrap';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { Response } from '../interfaces';\n\ninterface NewsData {\n  news: string;\n  newsHeader: string;\n  authorName: string;\n  authorEmail: string;\n  active: boolean;\n  comment: boolean;\n  link: string;\n  linkTitle: string;\n  langTo: string;\n  target: string;\n  csrfToken: string;\n  id?: string;\n}\n\nexport const handleAddNews = (): void => {\n  const submit = document.getElementById('submitAddNews') as HTMLButtonElement | null;\n  if (submit) {\n    submit.addEventListener('click', async (event: Event) => {\n      event.preventDefault();\n      let target = '';\n      document.querySelectorAll<HTMLInputElement>('#target').forEach((item) => {\n        if (item.checked) {\n          target = item.value;\n        }\n      });\n\n      const data: NewsData = {\n        news: (document.getElementById('editor') as HTMLInputElement).value,\n        newsHeader: (document.getElementById('newsheader') as HTMLInputElement).value,\n        authorName: (document.getElementById('authorName') as HTMLInputElement).value,\n        authorEmail: (document.getElementById('authorEmail') as HTMLInputElement).value,\n        active: (document.getElementById('active') as HTMLInputElement).checked,\n        comment: (document.getElementById('comment') as HTMLInputElement).checked,\n        link: (document.getElementById('link') as HTMLInputElement).value,\n        linkTitle: (document.getElementById('linkTitle') as HTMLInputElement).value,\n        langTo: (document.getElementById('langTo') as HTMLInputElement).value,\n        target: target,\n        csrfToken: (document.getElementById('pmf-csrf-token') as HTMLInputElement).value,\n      };\n      const response = (await addNews(data)) as unknown as Response;\n      if (typeof response.success === 'string') {\n        pushNotification(response.success);\n        setTimeout(() => {\n          window.location.href = './news';\n        }, 3000);\n      } else {\n        pushErrorNotification(response.error);\n      }\n    });\n  }\n};\n\nexport const handleNews = (): void => {\n  const deleteNewsButton = document.getElementById('deleteNews') as HTMLButtonElement | null;\n  if (deleteNewsButton) {\n    document.querySelectorAll<HTMLButtonElement>('#deleteNews').forEach((item) => {\n      item.addEventListener('click', (event: Event) => {\n        event.preventDefault();\n        const modal = new Modal(document.getElementById('confirmDeleteNewsModal') as HTMLElement);\n        (document.getElementById('newsId') as HTMLInputElement).value = item.getAttribute('data-pmf-newsid') as string;\n        modal.show();\n      });\n    });\n    (document.getElementById('pmf-delete-news-action') as HTMLButtonElement).addEventListener(\n      'click',\n      async (event: Event) => {\n        event.preventDefault();\n        const csrfToken = (document.getElementById('pmf-csrf-token-delete') as HTMLInputElement).value;\n        const id = (document.getElementById('newsId') as HTMLInputElement).value;\n        const response = (await deleteNews(csrfToken, id)) as unknown as Response;\n        if (typeof response.success === 'string') {\n          pushNotification(response.success);\n          setTimeout(() => {\n            window.location.reload();\n          }, 3000);\n        } else {\n          pushErrorNotification(response.error);\n        }\n      }\n    );\n    document.querySelectorAll<HTMLInputElement>('#activate').forEach((item) => {\n      item.addEventListener('click', async () => {\n        const response = await activateNews(\n          item.getAttribute('data-pmf-id') as string,\n          item.checked,\n          item.getAttribute('data-pmf-csrf-token') as string\n        );\n\n        if (typeof response.success === 'string') {\n          pushNotification(response.success);\n        } else {\n          pushErrorNotification(response.error);\n        }\n      });\n    });\n  }\n};\n\nexport const handleEditNews = (): void => {\n  const submit = document.getElementById('submitEditNews') as HTMLButtonElement | null;\n  if (submit) {\n    submit.addEventListener('click', async (event: Event) => {\n      event.preventDefault();\n      let target = '';\n      document.querySelectorAll<HTMLInputElement>('#target').forEach((item) => {\n        if (item.checked) {\n          target = item.value;\n        }\n      });\n\n      const data: NewsData = {\n        id: (document.getElementById('id') as HTMLInputElement).value,\n        csrfToken: (document.getElementById('pmf-csrf-token') as HTMLInputElement).value,\n        news: (document.getElementById('editor') as HTMLInputElement).value,\n        newsHeader: (document.getElementById('newsheader') as HTMLInputElement).value,\n        authorName: (document.getElementById('authorName') as HTMLInputElement).value,\n        authorEmail: (document.getElementById('authorEmail') as HTMLInputElement).value,\n        active: (document.getElementById('active') as HTMLInputElement).checked,\n        comment: (document.getElementById('comment') as HTMLInputElement).checked,\n        link: (document.getElementById('link') as HTMLInputElement).value,\n        linkTitle: (document.getElementById('linkTitle') as HTMLInputElement).value,\n        langTo: (document.getElementById('langTo') as HTMLInputElement).value,\n        target: target,\n      };\n\n      const reponse = (await updateNews(data)) as unknown as Response;\n      if (typeof reponse.success === 'string') {\n        pushNotification(reponse.success);\n        setTimeout(() => {\n          window.location.href = './news';\n        }, 3000);\n      } else {\n        pushErrorNotification(reponse.error);\n      }\n    });\n  }\n};\n","/**\n * Fetch data for news\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @author    Jan Harms <modelrailroader@gmx-topmail.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-04-21\n */\n\nexport const addNews = async (data: Record<string, any> = {}): Promise<void> => {\n  try {\n    const response = await fetch('api/news/create', {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(data),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteNews = async (csrfToken: string, id: string): Promise<void> => {\n  try {\n    const response = await fetch('api/news/delete', {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n        csrfToken: csrfToken,\n        id: id,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const updateNews = async (data: Record<string, any> = {}): Promise<void> => {\n  try {\n    const response = await fetch('api/news/update', {\n      method: 'PUT',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(data),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const activateNews = async (id: string, status: string, csrfToken: string): Promise<void> => {\n  try {\n    const response = await fetch('api/news/activate', {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n        id: id,\n        status: status,\n        csrfToken: csrfToken,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Handle data for FAQs overview management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-02-26\n */\n\nimport { Modal } from 'bootstrap';\nimport { deleteFaq, fetchAllFaqsByCategory, fetchCategoryTranslations } from '../api';\nimport { normalizeLanguageCode } from '../utils';\nimport { addElement, pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { CategoryTranslations, Faq, FaqList, Response } from '../interfaces';\n\nexport const handleFaqOverview = async (): Promise<void> => {\n  const collapsedCategories: NodeListOf<Element> = document.querySelectorAll('.accordion-collapse');\n\n  if (collapsedCategories) {\n    initializeCheckboxState();\n\n    collapsedCategories.forEach((category: Element): void => {\n      const categoryId = category.getAttribute('data-pmf-categoryId') as string;\n      const language = category.getAttribute('data-pmf-language') as string;\n\n      category.addEventListener('hidden.bs.collapse', (): void => {\n        clearCategoryTable(categoryId);\n      });\n\n      category.addEventListener('shown.bs.collapse', async (): Promise<void> => {\n        const onlyInactive: boolean = getInactiveCheckboxState();\n        const onlyNew: boolean = getNewCheckboxState();\n\n        const faqs = (await fetchAllFaqsByCategory(categoryId, language, onlyInactive, onlyNew)) as FaqList;\n        await populateCategoryTable(categoryId, faqs.faqs, faqs.isAllowedToTranslate);\n        const toggleStickyFaq: NodeListOf<HTMLInputElement> = document.querySelectorAll('.pmf-admin-sticky-faq');\n        const toggleActiveFaq: NodeListOf<HTMLInputElement> = document.querySelectorAll('.pmf-admin-active-faq');\n        const translationDropdown: NodeListOf<HTMLElement> = document.querySelectorAll('#dropdownAddNewTranslation');\n\n        translationDropdown.forEach((element: Element): void => {\n          element.addEventListener('click', async (event: Event): Promise<void> => {\n            event.preventDefault();\n\n            const translations = (await fetchCategoryTranslations(categoryId)) as CategoryTranslations;\n            const dropdownMenu = element.parentElement.querySelector('.dropdown-menu') as HTMLElement;\n            const faqId = element.getAttribute('data-pmf-faq-id') as string;\n            const options: string[] = [];\n\n            dropdownMenu.querySelectorAll('#dropdownTranslation').forEach((link) => {\n              options.push(link.innerText);\n            });\n\n            for (let [languageCode] of Object.entries(translations as Record<string, unknown>)) {\n              if (languageCode !== language) {\n                let displayName;\n                try {\n                  const normalizedCode: string = normalizeLanguageCode(languageCode);\n                  displayName = new Intl.DisplayNames([language], { type: 'language' }).of(normalizedCode);\n                } catch (e) {\n                  displayName = null;\n                }\n\n                if (displayName && !options.includes(` ${displayName}`)) {\n                  const newTranslationLink: HTMLElement = addElement('a', {\n                    classList: 'dropdown-item',\n                    id: 'dropdownTranslation',\n                    href: `./faq/translate/${faqId}/${languageCode}`,\n                    innerText: ` ${displayName}`,\n                  });\n                  dropdownMenu.appendChild(newTranslationLink);\n                }\n              }\n            }\n          });\n        });\n\n        toggleStickyFaq.forEach((element: Element): void => {\n          element.addEventListener('change', async (event: Event): Promise<void> => {\n            event.preventDefault();\n\n            const target = event.target as HTMLInputElement;\n            const categoryId = target.getAttribute('data-pmf-category-id-sticky') as string;\n            const faqId = target.getAttribute('data-pmf-faq-id') as string;\n            const token = target.getAttribute('data-pmf-csrf') as string;\n\n            await saveStatus(categoryId, [faqId], token, target.checked, 'sticky');\n          });\n        });\n\n        toggleActiveFaq.forEach((element: Element): void => {\n          element.addEventListener('change', async (event: Event): Promise<void> => {\n            event.preventDefault();\n\n            const target = event.target as HTMLInputElement;\n            const categoryId = target.getAttribute('data-pmf-category-id-active') as string;\n            const faqId = target.getAttribute('data-pmf-faq-id') as string;\n            const token = target.getAttribute('data-pmf-csrf') as string;\n\n            await saveStatus(categoryId, [faqId], token, target.checked, 'active');\n          });\n        });\n      });\n    });\n  }\n};\n\nexport const handleDeleteFaqModal = (): void => {\n  const deleteFaqModalElement = document.getElementById('deleteFaqConfirmModal') as HTMLElement | null;\n\n  if (deleteFaqModalElement) {\n    const deleteFaqModal = new Modal(deleteFaqModalElement);\n    const confirmDeleteFaqButton = document.getElementById('confirmDeleteFaqButton') as HTMLButtonElement;\n    let currentFaqId: string = '';\n    let currentFaqLanguage: string = '';\n    let currentToken: string = '';\n\n    document.addEventListener('click', (event: Event): void => {\n      const target = event.target as HTMLElement;\n      if (target.closest('.pmf-button-delete-faq')) {\n        event.preventDefault();\n        const deleteButton = target.closest('.pmf-button-delete-faq') as HTMLElement;\n\n        currentFaqId = deleteButton.getAttribute('data-pmf-id') || '';\n        currentFaqLanguage = deleteButton.getAttribute('data-pmf-language') || '';\n        currentToken = deleteButton.getAttribute('data-pmf-token') || '';\n\n        deleteFaqModal.show();\n      }\n    });\n\n    confirmDeleteFaqButton.addEventListener('click', async (): Promise<void> => {\n      if (!currentFaqId || !currentFaqLanguage || !currentToken) {\n        return;\n      }\n\n      try {\n        const result = (await deleteFaq(currentFaqId, currentFaqLanguage, currentToken)) as Response;\n        if (result.success) {\n          const faqTableRow = document.getElementById(`faq_${currentFaqId}_${currentFaqLanguage}`) as HTMLElement;\n          if (faqTableRow) {\n            faqTableRow.remove();\n          }\n          pushNotification(result.success);\n        }\n      } catch (error) {\n        console.error(error);\n        pushErrorNotification('Fehler beim Lschen der FAQ');\n      }\n\n      deleteFaqModal.hide();\n      currentFaqId = '';\n      currentFaqLanguage = '';\n      currentToken = '';\n    });\n  }\n};\n\nconst saveStatus = async (\n  categoryId: string,\n  faqIds: string[],\n  token: string,\n  checked: boolean,\n  type: 'active' | 'sticky'\n): Promise<void> => {\n  let url;\n  const languageElement = document.getElementById(`${type}_record_${categoryId}_${faqIds[0]}`) as HTMLElement;\n  const faqLanguage = languageElement.getAttribute('lang') as string;\n\n  if ('active' === type) {\n    url = './api/faq/activate';\n  } else {\n    url = './api/faq/sticky';\n  }\n\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        csrf: token,\n        categoryId: categoryId,\n        faqIds: faqIds,\n        faqLanguage: faqLanguage,\n        checked: checked,\n      }),\n    });\n\n    if (response.ok) {\n      const result = await response.json();\n      if (result.success) {\n        pushNotification(result.success);\n      } else {\n        pushErrorNotification(result.error);\n      }\n    } else {\n      throw new Error('Network response was not ok: ' + (await response.text()));\n    }\n  } catch (error: any) {\n    console.error(await error.cause.response.json());\n  }\n};\n\nconst populateCategoryTable = async (categoryId: string, faqs: Faq[], isAllowedToTranslate: boolean): Promise<void> => {\n  const tableBody = document.getElementById(`tbody-category-id-${categoryId}`) as HTMLElement;\n  const csrfToken = tableBody.getAttribute('data-pmf-csrf') as string;\n\n  faqs.forEach((faq: Faq): void => {\n    const row: HTMLTableRowElement = document.createElement('tr');\n    row.setAttribute('id', `faq_${faq.id.toString()}_${faq.language}`);\n\n    row.append(\n      addElement('td', { classList: 'align-middle text-center' }, [\n        addElement('a', {\n          classList: 'text-decoration-none',\n          href: `./faq/edit/${faq.id.toString()}/${faq.language}`,\n          innerText: faq.id.toString(),\n        }),\n      ])\n    );\n    row.append(addElement('td', { classList: 'align-middle text-center', innerText: faq.language }));\n    row.append(\n      addElement('td', { classList: 'align-middle text-center' }, [\n        addElement('a', {\n          classList: 'text-decoration-none',\n          href: `./faq/edit/${faq.id.toString()}/${faq.language}`,\n          innerText: faq.solution_id.toString(),\n        }),\n      ])\n    );\n    row.append(\n      addElement('td', {}, [\n        addElement('a', {\n          classList: 'text-decoration-none',\n          href: `./faq/edit/${faq.id.toString()}/${faq.language}`,\n          innerText: faq.question,\n        }),\n      ])\n    );\n    row.append(addElement('td', { classList: 'small', innerText: faq.created }));\n    row.append(\n      addElement('td', { classList: 'align-middle' }, [\n        addElement('input', {\n          classList: 'form-check-input pmf-admin-sticky-faq',\n          type: 'checkbox',\n          'data-pmfCategoryIdSticky': faq.category_id.toString(),\n          'data-pmfFaqId': faq.id.toString(),\n          'data-pmfCsrf': csrfToken,\n          lang: faq.language,\n          id: `sticky_record_${faq.category_id}_${faq.id.toString()}`,\n          checked: faq.sticky === 'yes',\n        }),\n      ])\n    );\n    row.append(\n      addElement('td', { classList: 'align-middle' }, [\n        addElement('input', {\n          classList: 'form-check-input pmf-admin-active-faq',\n          type: 'checkbox',\n          'data-pmfCategoryIdActive': faq.category_id.toString(),\n          'data-pmfFaqId': faq.id.toString(),\n          'data-pmfCsrf': csrfToken,\n          lang: faq.language,\n          id: `active_record_${faq.category_id.toString()}_${faq.id.toString()}`,\n          checked: faq.active === 'yes',\n        }),\n      ])\n    );\n    row.append(\n      addElement('td', { classList: 'align-middle text-center' }, [\n        addElement('a', { classList: 'btn btn-primary', href: `./faq/edit/${faq.id.toString()}/${faq.language}` }, [\n          addElement('i', { classList: 'bi bi-pencil', 'aria-hidden': 'true' }),\n        ]),\n      ])\n    );\n    row.append(\n      addElement('td', { classList: 'align-middle text-center' }, [\n        addElement('a', { classList: 'btn btn-info', href: `./faq/copy/${faq.id.toString()}/${faq.language}` }, [\n          addElement('i', { classList: 'bi bi-copy', 'aria-hidden': 'true' }),\n        ]),\n      ])\n    );\n    if (isAllowedToTranslate) {\n      row.append(\n        addElement('td', { classList: 'align-middle text-center' }, [\n          addElement('div', { classList: 'checkbox' }, [\n            addElement(\n              'a',\n              {\n                classList: 'btn btn-secondary dropdown-toggle',\n                href: '#',\n                role: 'button',\n                id: 'dropdownAddNewTranslation',\n                'data-bsToggle': 'dropdown',\n                'aria-haspopup': 'true',\n                'aria-expanded': 'false',\n                'data-pmfFaqId': faq.id.toString(),\n              },\n              [addElement('i', { classList: 'bi bi-globe', 'aria-hidden': 'true' })]\n            ),\n            addElement('div', { classList: 'dropdown-menu', 'aria-labelledby': 'dropdownAddNewTranslation' }, [\n              addElement('a', { classList: 'dropdown-item', id: 'dropdownTranslation', innerText: '' }),\n            ]),\n          ]),\n        ])\n      );\n    }\n    row.append(\n      addElement('td', { classList: 'text-center' }, [\n        addElement(\n          'button',\n          {\n            classList: 'btn btn-danger pmf-button-delete-faq',\n            type: 'button',\n            'data-pmfId': faq.id.toString(),\n            'data-pmfLanguage': faq.language,\n            'data-pmfToken': csrfToken,\n          },\n          [\n            addElement('i', {\n              classList: 'bi bi-trash',\n              'aria-hidden': 'true',\n              'data-pmfId': faq.id.toString(),\n              'data-pmfLanguage': faq.language,\n              'data-pmfToken': csrfToken,\n            }),\n          ]\n        ),\n      ])\n    );\n\n    tableBody.appendChild(row);\n  });\n};\n\nconst clearCategoryTable = (categoryId: string): void => {\n  const tableBody = document.getElementById(`tbody-category-id-${categoryId}`) as HTMLElement;\n  tableBody.innerHTML = '';\n};\n\nconst initializeCheckboxState = (): void => {\n  const filterForInactive = document.getElementById('pmf-checkbox-filter-inactive') as HTMLInputElement | null;\n  const filterForNew = document.getElementById('pmf-checkbox-filter-new') as HTMLInputElement | null;\n\n  const storedInactiveState: string | null = localStorage.getItem('pmfCheckboxFilterInactive');\n  const storedNewState: string | null = localStorage.getItem('pmfCheckboxFilterNew');\n\n  if (filterForInactive && storedInactiveState !== null) {\n    filterForInactive.checked = JSON.parse(storedInactiveState);\n  }\n\n  if (filterForNew && storedNewState !== null) {\n    filterForNew.checked = JSON.parse(storedNewState);\n  }\n\n  if (filterForInactive) {\n    filterForInactive.addEventListener('change', (): void => {\n      localStorage.setItem('pmfCheckboxFilterInactive', JSON.stringify(filterForInactive.checked));\n    });\n  }\n\n  if (filterForNew) {\n    filterForNew.addEventListener('change', (): void => {\n      localStorage.setItem('pmfCheckboxFilterNew', JSON.stringify(filterForNew.checked));\n    });\n  }\n};\n\n// Getter for the inactive checkbox state\nconst getInactiveCheckboxState = (): boolean => {\n  const storedInactiveState = localStorage.getItem('pmfCheckboxFilterInactive');\n  return storedInactiveState !== null ? JSON.parse(storedInactiveState) : false;\n};\n\n// Getter for the new checkbox state\nconst getNewCheckboxState = (): boolean => {\n  const storedNewState = localStorage.getItem('pmfCheckboxFilterNew');\n  return storedNewState !== null ? JSON.parse(storedNewState) : false;\n};\n","/**\n * phpMyFAQ admin open questions\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-03-04\n */\n\nimport { addElement, pushErrorNotification, serialize } from '../../../../assets/src/utils';\nimport { toggleQuestionVisibility } from '../api';\n\nexport const handleOpenQuestions = (): void => {\n  const deleteButton = document.getElementById('pmf-delete-questions') as HTMLButtonElement | null;\n\n  if (deleteButton) {\n    deleteButton.addEventListener('click', (event: Event) => {\n      event.preventDefault();\n\n      const responseMessage = document.getElementById('returnMessage') as HTMLElement;\n      const form = document.querySelector('#phpmyfaq-open-questions') as HTMLFormElement;\n      const questions = new FormData(form);\n\n      responseMessage.innerHTML = '';\n      fetch('./api/question/delete', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          data: serialize(questions),\n        }),\n      })\n        .then(async (response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          throw new Error('Network response was not ok: ', { cause: { response } });\n        })\n        .then((response) => {\n          if (response.success) {\n            responseMessage.append(\n              addElement('div', { classList: 'alert alert-success', innerText: response.success })\n            );\n            const questionsToDelete = document.querySelectorAll('tr td input:checked') as NodeListOf<HTMLInputElement>;\n            questionsToDelete.forEach((toDelete) => {\n              toDelete.parentNode?.parentNode?.parentNode?.remove();\n            });\n          } else {\n            responseMessage.append(addElement('div', { classList: 'alert alert-danger', innerText: response.error }));\n          }\n        })\n        .catch(async (error) => {\n          const errorMessage = await error.cause.response.json();\n          responseMessage.append(addElement('div', { classList: 'alert alert-danger', innerText: errorMessage }));\n        });\n    });\n  }\n};\n\nexport const handleToggleVisibility = (): void => {\n  const toggleVisibility = document.querySelectorAll('.pmf-toggle-visibility') as NodeListOf<HTMLElement>;\n\n  if (toggleVisibility) {\n    toggleVisibility.forEach((element) => {\n      element.addEventListener('click', async (event: Event) => {\n        event.preventDefault();\n\n        const questionId = element.getAttribute('data-pmf-question-id') as string;\n        const visibility = element.getAttribute('data-pmf-visibility') as string;\n        const csrfToken = element.getAttribute('data-pmf-csrf') as string;\n\n        const response = await toggleQuestionVisibility(questionId, visibility, csrfToken);\n\n        if (response.success) {\n          element.innerText = response.success;\n        } else {\n          pushErrorNotification(response.error);\n        }\n\n        console.log(questionId, visibility, csrfToken);\n      });\n    });\n  }\n};\n","/**\n * Fetch data for open questions management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-12-02\n */\n\nimport { Response } from '../interfaces';\n\nexport const toggleQuestionVisibility = async (\n  questionId: string,\n  visibility: boolean,\n  csrfToken: string\n): Promise<Response | undefined> => {\n  try {\n    const response = await fetch(`./api/question/visibility/toggle`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        questionId: questionId,\n        visibility: visibility,\n        csrfToken: csrfToken,\n      }),\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * JavaScript functions for all tag administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2014-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2014-08-16\n */\n\nimport autocomplete from 'autocompleter';\nimport { addElement, pushNotification } from '../../../../assets/src/utils';\nimport { deleteTag, fetchTags } from '../api';\n\ninterface Tag {\n  tagName: string;\n}\n\nexport const handleTags = (): void => {\n  const editTagButtons = document.querySelectorAll<HTMLButtonElement>('.btn-edit');\n  const deleteButtons = document.querySelectorAll<HTMLButtonElement>('.btn-delete');\n  const tagForm = document.getElementById('tag-form') as HTMLFormElement | null;\n  const tagsAutocomplete = document.querySelector('.pmf-tags-autocomplete') as HTMLInputElement | null;\n\n  if (editTagButtons) {\n    editTagButtons.forEach((element) => {\n      element.addEventListener('click', (event: Event) => {\n        const target = event.target as HTMLElement;\n        const tagId = target.getAttribute('data-btn-id') as string;\n        const span = document.querySelector(`span[id=\"tag-id-${tagId}\"]`) as HTMLSpanElement | null;\n\n        if (span) {\n          span.replaceWith(\n            addElement('input', {\n              type: 'text',\n              name: 'tag',\n              value: span.innerText,\n              classList: 'form-control',\n              id: `tag-id-${tagId}`,\n            })\n          );\n        } else {\n          const input = document.querySelector(`input[id=\"tag-id-${tagId}\"]`) as HTMLInputElement;\n          input.replaceWith(\n            addElement('span', {\n              innerHTML: input.value.replace(/\\//g, '&#x2F;'),\n              id: `tag-id-${tagId}`,\n            })\n          );\n        }\n      });\n    });\n  }\n\n  if (deleteButtons) {\n    deleteButtons.forEach((element) => {\n      element.addEventListener('click', async (event: Event) => {\n        const target = event.target as HTMLElement;\n        const tagId = target.getAttribute('data-pmf-id') as string;\n\n        const response = await deleteTag(tagId);\n        if (response.success) {\n          pushNotification(response.success);\n          const row = document.getElementById(`pmf-row-tag-id-${tagId}`) as HTMLElement;\n          row.remove();\n        } else {\n          throw new Error('Network response was not ok: ' + JSON.stringify(response.error));\n        }\n      });\n    });\n  }\n\n  if (tagForm) {\n    tagForm.addEventListener('submit', (event: Event) => {\n      event.preventDefault();\n\n      const input = document.querySelector('input:focus') as HTMLInputElement;\n      const tagId = input.getAttribute('id')!.replace('tag-id-', '');\n      const tag = input.value;\n      const csrf = (document.querySelector('input[name=pmf-csrf-token]') as HTMLInputElement).value;\n\n      fetch('./api/content/tag', {\n        method: 'PUT',\n        headers: {\n          Accept: 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          csrf: csrf,\n          id: tagId,\n          tag: tag,\n        }),\n      })\n        .then(async (response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          throw new Error('Network response was not ok: ', { cause: { response } });\n        })\n        .then(() => {\n          input.replaceWith(\n            addElement(\n              'span',\n              {\n                innerHTML: input.value.replace(/\\//g, '&#x2F;'),\n                id: `tag-id-${tagId}`,\n              },\n              [\n                addElement('span', {\n                  classList: 'ms-1 badge rounded-pill bg-success',\n                  innerHTML: '',\n                }),\n              ]\n            )\n          );\n        })\n        .catch(async (error) => {\n          const errorMessage = await error.cause.response.json();\n          const table = document.querySelector('.table') as HTMLElement;\n          table.insertAdjacentElement(\n            'beforebegin',\n            addElement('div', { classList: 'alert alert-danger', innerText: errorMessage })\n          );\n        });\n    });\n  }\n\n  if (tagsAutocomplete) {\n    autocomplete<Tag>({\n      input: tagsAutocomplete,\n      minLength: 1,\n      onSelect: async (item, input) => {\n        let currentTags = input.value;\n        let currentTagsArray = currentTags.split(',');\n        if (currentTags.length === 0) {\n          currentTags = item.tagName;\n        } else {\n          currentTagsArray[currentTagsArray.length - 1] = item.tagName;\n          currentTags = currentTagsArray.join(',');\n        }\n        input.value = currentTags;\n      },\n      fetch: async (text, callback) => {\n        let match = text.toLowerCase();\n        const tags = await fetchTags(match);\n        callback(\n          tags.filter((tag) => {\n            const lastCommaIndex = match.lastIndexOf(',');\n            match = match.substring(lastCommaIndex + 1);\n            return tag.tagName.toLowerCase().indexOf(match) !== -1;\n          })\n        );\n      },\n      render: (item, value) => {\n        const regex = new RegExp(value, 'gi');\n        return addElement('div', {\n          classList: 'pmf-tag-list-result border',\n          innerHTML: item.tagName,\n        });\n      },\n      emptyMsg: 'No tags found.',\n    });\n  }\n};\n","/**\n * Tag Autocomplete API functionality\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-04-12\n */\n\ninterface TagResponse {\n  id: string;\n  name: string;\n}\n\nexport const fetchTags = async (searchString: string): Promise<TagResponse[]> => {\n  try {\n    const response = await fetch(`./api/content/tags?search=${searchString}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    return await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const deleteTag = async (tagId: string): Promise<void> => {\n  try {\n    const response = await fetch(`./api/content/tags/${tagId}`, {\n      method: 'DELETE',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    await response.json();\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * Sort sticky FAQs according to your own wishes\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Jan Harms <model_railroader@gmx-topmail.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-12-27\n */\n\nimport Sortable from 'sortablejs';\nimport { pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\n\nexport const handleStickyFaqs = (): void => {\n  const stickyFAQs = document.getElementById('stickyFAQs') as HTMLElement | null;\n  if (stickyFAQs) {\n    Sortable.create(stickyFAQs, {\n      animation: 100,\n      draggable: '.list-group-item',\n      handle: '.list-group-item',\n      sort: true,\n      filter: '.sortable-disabled',\n      dataIdAttr: 'data-pmf-faqid',\n      onEnd: async (event: Sortable.SortableEvent) => {\n        const currentOrder = Array.from(event.from.children).map((item) => {\n          return item.getAttribute('data-pmf-faqid');\n        }) as string[];\n        await saveStatus(currentOrder);\n      },\n    });\n  }\n};\n\nconst saveStatus = async (currentOrder: string[]): Promise<void> => {\n  const stickyFAQs = document.getElementById('stickyFAQs') as HTMLElement;\n  const successAlert = document.getElementById('successAlert') as HTMLElement | null;\n  const csrf = stickyFAQs.getAttribute('data-csrf') as string;\n\n  if (successAlert) {\n    successAlert.remove();\n  }\n\n  try {\n    const response = await fetch('./api/faqs/sticky/order', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        faqIds: currentOrder,\n        csrf: csrf,\n      }),\n    });\n\n    if (response.ok) {\n      const jsonResponse = await response.json();\n      pushNotification(jsonResponse.success);\n    } else {\n      const errorResponse = await response.json();\n      throw new Error('Network response was not ok: ' + JSON.stringify(errorResponse));\n    }\n  } catch (error) {\n    if (error instanceof Error) {\n      pushErrorNotification(error.message);\n    } else {\n      console.error('Unknown error:', error);\n    }\n  }\n};\n","/**\n * JavaScript functions for user frontend\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2010-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2010-05-02\n */\n\nimport { Modal } from 'bootstrap';\nimport { fetchUserData, fetchUserRights, deleteUser, postUserData, overwritePassword } from '../api';\nimport { capitalize, pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { Response, UserData } from '../interfaces';\n\n/**\n * Updates the current loaded user\n * @param userId\n */\nexport const updateUser = async (userId: string): Promise<void> => {\n  await setUserData(userId);\n  await setUserRights(userId);\n};\n\n/**\n * Sets the user data\n * @param {string} userId\n */\nconst setUserData = async (userId: string): Promise<void> => {\n  const userData = (await fetchUserData(userId)) as unknown as UserData;\n\n  updateInput('current_user_id', userData.userId);\n  updateInput('pmf-user-list-autocomplete', userData.login);\n  updateInput('last_modified', userData.lastModified);\n  updateInput('update_user_id', userData.userId);\n  updateInput('modal_user_id', userData.userId);\n  updateInput('auth_source', capitalize(userData.authSource));\n  updateInput('user_status', userData.status);\n  updateInput('display_name', userData.displayName);\n  updateInput('email', userData.email);\n  updateInput('overwrite_twofactor', userData.twoFactorEnabled);\n\n  if (userData.isSuperadmin) {\n    const superAdmin = document.getElementById('is_superadmin') as HTMLInputElement;\n    superAdmin.setAttribute('checked', 'checked');\n    document.querySelectorAll('.permission').forEach((checkbox) => {\n      (checkbox as HTMLInputElement).removeAttribute('disabled');\n    });\n    document.querySelectorAll('#pmf-user-rights-save').forEach((element) => {\n      (element as HTMLButtonElement).removeAttribute('disabled');\n    });\n    (document.getElementById('checkAll') as HTMLInputElement).removeAttribute('disabled');\n    (document.getElementById('uncheckAll') as HTMLInputElement).setAttribute('disabled', '');\n  } else {\n    const superAdmin = document.getElementById('is_superadmin') as HTMLInputElement;\n    superAdmin.removeAttribute('checked');\n  }\n\n  if (userData.twoFactorEnabled) {\n    const twoFactorEnabled = document.getElementById('overwrite_twofactor') as HTMLInputElement;\n    twoFactorEnabled.setAttribute('checked', 'checked');\n    twoFactorEnabled.removeAttribute('disabled');\n  }\n\n  if (userData.status !== 'protected') {\n    const deleteUser = document.getElementById('pmf-delete-user') as HTMLButtonElement;\n    deleteUser.classList.remove('disabled');\n  }\n  const saveUser = document.getElementById('pmf-user-save') as HTMLButtonElement;\n  saveUser.classList.remove('disabled');\n\n  window.history.pushState({}, '', `./user/edit/${userId}`);\n};\n\nconst setUserRights = async (userId: string): Promise<void> => {\n  clearUserRights();\n  const userRights = await fetchUserRights(userId);\n  userRights.forEach((right) => {\n    const checkbox = document.getElementById(`user_right_${right}`) as HTMLInputElement;\n    checkbox.setAttribute('checked', 'checked');\n  });\n\n  (document.getElementById('rights_user_id') as HTMLInputElement).value = userId;\n};\n\nconst clearUserForm = async (): Promise<void> => {\n  updateInput('current_user_id', '');\n  updateInput('pmf-user-list-autocomplete', '');\n  updateInput('last_modified', '');\n  updateInput('update_user_id', '');\n  updateInput('modal_user_id', '');\n  updateInput('auth_source', '');\n  updateInput('user_status', '');\n  updateInput('display_name', '');\n  updateInput('email', '');\n  updateInput('overwrite_twofactor', '');\n\n  clearUserRights();\n\n  (document.getElementById('pmf-user-save') as HTMLButtonElement).classList.add('disabled');\n  (document.getElementById('pmf-delete-user') as HTMLButtonElement).classList.add('disabled');\n};\n\nconst clearUserRights = (): void => {\n  document.querySelectorAll('.permission').forEach((item) => {\n    if ((item as HTMLInputElement).checked) {\n      (item as HTMLInputElement).removeAttribute('checked');\n    }\n  });\n};\n\nconst updateInput = (id: string, value: string): void => {\n  const input = document.getElementById(id) as HTMLInputElement;\n  if (input) {\n    input.value = value;\n    input.removeAttribute('disabled');\n  }\n};\n\nexport const handleUsers = async (): Promise<void> => {\n  const currentUserId = document.getElementById('current_user_id') as HTMLInputElement;\n\n  if (currentUserId?.value) {\n    await updateUser(currentUserId.value);\n  }\n\n  const toggleCheckAll = document.getElementById('checkAll') as HTMLInputElement;\n  const toggleUncheckAll = document.getElementById('uncheckAll') as HTMLInputElement;\n  const modal = document.getElementById('addUserModal') as HTMLElement;\n  const modalBackdrop = document.getElementsByClassName('modal-backdrop fade show') as HTMLCollectionOf<HTMLElement>;\n  const addUser = document.getElementById('pmf-add-user-action') as HTMLButtonElement;\n  const addUserForm = document.getElementById('pmf-add-user-form') as HTMLFormElement;\n  const passwordToggle = document.getElementById('add_user_automatic_password') as HTMLInputElement;\n  const passwordInputs = document.getElementById('add_user_show_password_inputs') as HTMLElement;\n  const isSuperAdmin = document.getElementById('is_superadmin') as HTMLInputElement;\n\n  if (isSuperAdmin) {\n    isSuperAdmin.addEventListener('click', () => {\n      if (isSuperAdmin.checked) {\n        document.querySelectorAll('.permission').forEach((checkbox) => {\n          (checkbox as HTMLInputElement).removeAttribute('disabled');\n        });\n        document.querySelectorAll('#pmf-user-rights-save').forEach((element) => {\n          (element as HTMLButtonElement).removeAttribute('disabled');\n        });\n        (document.getElementById('checkAll') as HTMLInputElement).setAttribute('disabled', '');\n        (document.getElementById('uncheckAll') as HTMLInputElement).setAttribute('disabled', '');\n      } else {\n        document.querySelectorAll('.permission').forEach((checkbox) => {\n          (checkbox as HTMLInputElement).removeAttribute('disabled');\n        });\n        document.querySelectorAll('#pmf-user-rights-save').forEach((element) => {\n          (element as HTMLButtonElement).removeAttribute('disabled');\n        });\n        (document.getElementById('checkAll') as HTMLInputElement).removeAttribute('disabled');\n        (document.getElementById('uncheckAll') as HTMLInputElement).removeAttribute('disabled');\n      }\n    });\n  }\n\n  if (passwordToggle) {\n    passwordToggle.addEventListener('click', () => {\n      passwordInputs.classList.toggle('d-none');\n    });\n  }\n\n  if (toggleCheckAll && toggleUncheckAll) {\n    toggleCheckAll.addEventListener('click', () => {\n      document.querySelectorAll('.permission').forEach((checkbox) => {\n        (checkbox as HTMLInputElement).checked = true;\n      });\n    });\n    toggleUncheckAll.addEventListener('click', () => {\n      document.querySelectorAll('.permission').forEach((checkbox) => {\n        (checkbox as HTMLInputElement).checked = false;\n      });\n    });\n  }\n\n  if (addUser) {\n    addUser.addEventListener('click', async (event) => {\n      event.preventDefault();\n      const csrf = (document.getElementById('add_user_csrf') as HTMLInputElement).value;\n      const userName = (document.getElementById('add_user_name') as HTMLInputElement).value;\n      const realName = (document.getElementById('add_user_realname') as HTMLInputElement).value;\n      const automaticPassword = (document.getElementById('add_user_automatic_password') as HTMLInputElement)?.checked;\n      const email = (document.getElementById('add_user_email') as HTMLInputElement).value;\n      const password = (document.getElementById('add_user_password') as HTMLInputElement).value;\n      const passwordConfirm = (document.getElementById('add_user_password_confirm') as HTMLInputElement).value;\n      const superAdmin = document.querySelector('#add_user_is_superadmin') as HTMLInputElement;\n\n      let isSuperAdmin: boolean = false;\n      if (superAdmin) {\n        isSuperAdmin = superAdmin.checked as boolean;\n      }\n\n      addUserForm.classList.add('was-validated');\n\n      const userData = {\n        csrf,\n        userName,\n        realName,\n        email,\n        automaticPassword,\n        password,\n        passwordConfirm,\n        isSuperAdmin,\n      };\n\n      try {\n        const response = (await postUserData('./api/user/add', userData)) as unknown as Response;\n        if (typeof response.success === 'string') {\n          modal.style.display = 'none';\n          modal.classList.remove('show');\n          modalBackdrop[0].parentNode?.removeChild(modalBackdrop[0]);\n          pushNotification(response.success);\n          setTimeout(() => {\n            location.reload();\n          }, 1500);\n        } else {\n          pushErrorNotification(response.error as string);\n        }\n      } catch (error) {\n        console.error('Error adding user: ', error);\n        throw error;\n      }\n    });\n  }\n\n  const buttonExportAllUsers = document.getElementById('pmf-button-export-users') as HTMLButtonElement;\n\n  if (buttonExportAllUsers) {\n    buttonExportAllUsers.addEventListener('click', (event) => {\n      event.preventDefault();\n      window.location.href = './api/user/users/csv';\n    });\n  }\n\n  const buttonOverwritePassword = document.getElementById('pmf-user-password-overwrite-action') as HTMLButtonElement;\n  const container = document.getElementById('pmf-modal-user-password-overwrite') as HTMLElement;\n\n  if (buttonOverwritePassword) {\n    const modal = new Modal(container);\n\n    buttonOverwritePassword.addEventListener('click', async (event) => {\n      event.preventDefault();\n\n      const csrf = (document.getElementById('modal_csrf') as HTMLInputElement).value;\n      const userId = (document.getElementById('modal_user_id') as HTMLInputElement).value;\n      const newPassword = (document.getElementById('npass') as HTMLInputElement).value;\n      const passwordRepeat = (document.getElementById('bpass') as HTMLInputElement).value;\n\n      const response = (await overwritePassword(csrf, userId, newPassword, passwordRepeat)) as unknown as Response;\n      if (response.success) {\n        pushNotification(response.success);\n        modal.hide();\n      }\n      if (response.error) {\n        pushErrorNotification(response.error);\n      }\n    });\n  }\n\n  // Delete user\n  const deleteUserButton = document.getElementById('pmf-delete-user') as HTMLButtonElement;\n  const deleteUserConfirmed = document.getElementById('pmf-delete-user-yes') as HTMLButtonElement;\n\n  if (deleteUserButton) {\n    deleteUserButton.addEventListener('click', (event) => {\n      event.preventDefault();\n      const modalDeleteConfirmation = new Modal(\n        document.getElementById('pmf-modal-user-confirm-delete') as HTMLElement\n      );\n      modalDeleteConfirmation.show();\n      const username = document.getElementById('pmf-username-delete') as HTMLElement;\n      const userid = document.getElementById('pmf-user-id-delete') as HTMLInputElement;\n      username.innerText = (document.getElementById('display_name') as HTMLInputElement).value;\n      userid.value = (document.getElementById('current_user_id') as HTMLInputElement).value;\n      (document.getElementById('source_page') as HTMLInputElement).value = 'users';\n    });\n    deleteUserConfirmed.addEventListener('click', async (event) => {\n      event.preventDefault();\n      const source = document.getElementById('source_page') as HTMLInputElement;\n      if (source.value === 'users') {\n        const userId = (document.getElementById('pmf-user-id-delete') as HTMLInputElement).value;\n        const csrfToken = (document.getElementById('csrf-token-delete-user') as HTMLInputElement).value;\n        const response = (await deleteUser(userId, csrfToken)) as unknown as Response;\n        if (response.success) {\n          pushNotification(response.success);\n          await clearUserForm();\n        }\n        if (response.error) {\n          pushErrorNotification(response.error);\n        }\n      }\n    });\n  }\n\n  // Edit user\n  const editUserButton = document.getElementById('pmf-user-save') as HTMLButtonElement;\n  if (editUserButton) {\n    editUserButton.addEventListener('click', async (event) => {\n      event.preventDefault();\n      const userId = (document.getElementById('update_user_id') as HTMLInputElement).value;\n      let userData = {\n        csrfToken: (document.getElementById('pmf-csrf-token') as HTMLInputElement).value,\n        display_name: (document.getElementById('display_name') as HTMLInputElement).value,\n        email: (document.getElementById('email') as HTMLInputElement).value,\n        last_modified: (document.getElementById('last_modified') as HTMLInputElement).value,\n        user_status: (document.getElementById('user_status') as HTMLInputElement).value,\n        is_superadmin: (document.getElementById('is_superadmin') as HTMLInputElement).checked,\n        overwrite_twofactor: (document.getElementById('overwrite_twofactor') as HTMLInputElement).checked,\n        userId: userId,\n      };\n\n      const response = (await postUserData('./api/user/edit', userData)) as unknown as Response;\n      if (response.success) {\n        pushNotification(response.success);\n      }\n      if (response.error) {\n        pushErrorNotification(response.error);\n      }\n      await updateUser(userId);\n    });\n  }\n\n  // Update user rights\n  document.querySelectorAll('#pmf-user-rights-save').forEach((item) => {\n    item.addEventListener('click', async (event) => {\n      event.preventDefault();\n      let rightData: string[] = [];\n      document.querySelectorAll('.permission').forEach(async (checkbox) => {\n        if ((checkbox as HTMLInputElement).checked) {\n          rightData.push((checkbox as HTMLInputElement).value);\n        }\n      });\n      const userId = (document.getElementById('rights_user_id') as HTMLInputElement).value;\n      let data = {\n        csrfToken: (document.getElementById('pmf-csrf-token-rights') as HTMLInputElement).value,\n        userId: userId,\n        userRights: rightData,\n      };\n      const response = (await postUserData('./api/user/update-rights', data)) as unknown as Response;\n      if (response.success) {\n        pushNotification(response.success);\n      }\n      if (response.error) {\n        pushErrorNotification(response.error);\n      }\n      await updateUser(userId);\n    });\n  });\n};\n","/**\n * Autocomplete for user management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-03-23\n */\n\nimport autocomplete, { AutocompleteItem, EventTrigger } from 'autocompleter';\nimport { updateUser } from './users';\nimport { fetchUsers } from '../api';\nimport { addElement } from '../../../../assets/src/utils';\nimport { UserAutocomplete } from '../interfaces';\n\ntype UserSuggestion = UserAutocomplete & AutocompleteItem;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const autoComplete = document.getElementById('pmf-user-list-autocomplete') as HTMLInputElement;\n\n  if (autoComplete) {\n    autocomplete<UserSuggestion>({\n      input: autoComplete,\n      minLength: 1,\n      onSelect: async (item: UserSuggestion, input: HTMLInputElement | HTMLTextAreaElement) => {\n        input.value = item.label;\n        await updateUser(item.value);\n      },\n      fetch: async (\n        text: string,\n        update: (items: UserSuggestion[] | false) => void,\n        _trigger: EventTrigger,\n        _cursorPos: number\n      ): Promise<void> => {\n        const match: string = text.toLowerCase();\n        const users = (await fetchUsers(match)) as unknown as UserSuggestion[] | undefined;\n        const list: UserSuggestion[] = (users ?? []).filter((n: UserSuggestion): boolean =>\n          n.label.toLowerCase().includes(match)\n        );\n        update(list);\n      },\n      render: (item: UserSuggestion, currentValue: string): HTMLDivElement => {\n        const safe: string = currentValue.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const regex = new RegExp(safe, 'gi');\n        return addElement('div', {\n          classList: 'pmf-user-list-result border',\n          innerHTML: item.label.replace(regex, (content: string): string => `<strong>${content}</strong>`),\n        }) as HTMLDivElement;\n      },\n      emptyMsg: 'No users found',\n    });\n  }\n});\n","/**\n * Functions for handling user management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-03-23\n */\n\nimport { addElement, pushErrorNotification, pushNotification } from '../../../../assets/src/utils';\nimport { activateUser, deleteUser } from '../api';\nimport { Modal } from 'bootstrap';\nimport { Response } from '../interfaces';\n\nexport const handleUserList = (): void => {\n  const activateButtons = document.querySelectorAll('.btn-activate-user');\n  const deleteButtons = document.querySelectorAll('.btn-delete-user');\n\n  if (activateButtons) {\n    activateButtons.forEach((button) => {\n      button.addEventListener('click', async (event) => {\n        event.preventDefault();\n\n        const target = event.target as HTMLElement;\n        const csrfToken = target.getAttribute('data-csrf-token')!;\n        const userId = target.getAttribute('data-user-id')!;\n\n        const response = (await activateUser(userId, csrfToken)) as unknown as Response;\n\n        if (typeof response.success === 'string') {\n          const icon = document.querySelector(`.icon_user_id_${userId}`) as HTMLElement;\n          icon.classList.remove('bi-ban');\n          icon.classList.add('bi-check-circle-o');\n          const button = document.getElementById(`btn_activate_user_id_${userId}`) as HTMLElement;\n          button.remove();\n        } else {\n          const message = document.getElementById('pmf-user-message') as HTMLElement;\n          message.insertAdjacentElement(\n            'afterend',\n            addElement('div', { classList: 'alert alert-danger', innerText: response.error })\n          );\n        }\n      });\n    });\n  }\n\n  if (deleteButtons) {\n    deleteButtons.forEach((button: Element): void => {\n      button.addEventListener('click', (event: Event): void => {\n        event.preventDefault();\n\n        const modalElement = document.getElementById('pmf-modal-user-confirm-delete') as HTMLElement;\n        if (!modalElement) {\n          pushErrorNotification('Fehler: Lschdialog nicht gefunden.');\n          return;\n        }\n        const deleteModal = Modal.getOrCreateInstance(modalElement);\n        deleteModal.show();\n        const usernameDelete = document.getElementById('pmf-username-delete') as HTMLElement;\n        usernameDelete.innerText = button.getAttribute('data-username')!;\n        const userIdDelete = document.getElementById('pmf-user-id-delete') as HTMLInputElement;\n        userIdDelete.value = button.getAttribute('data-user-id')!;\n        const sourcePage = document.getElementById('source_page') as HTMLInputElement;\n        sourcePage.value = 'user-list';\n      });\n    });\n\n    const deleteUserConfirm = document.getElementById('pmf-delete-user-yes') as HTMLElement;\n    if (deleteUserConfirm) {\n      deleteUserConfirm.addEventListener('click', async (event: PointerEvent): Promise<void> => {\n        event.preventDefault();\n        const source = document.getElementById('source_page') as HTMLInputElement;\n        if (source.value === 'user-list') {\n          const userId = (document.getElementById('pmf-user-id-delete') as HTMLInputElement).value;\n          const csrfToken = (document.getElementById('csrf-token-delete-user') as HTMLInputElement).value;\n          const response = (await deleteUser(userId, csrfToken)) as unknown as Response;\n          if (response.success) {\n            pushNotification(response.success);\n            const row = document.getElementById('row_user_id_' + userId) as HTMLElement;\n            row.remove();\n          }\n          if (response.error) {\n            pushErrorNotification(response.error);\n          }\n        }\n      });\n    }\n  }\n};\n","/**\n * Functions for handling group management\n *\n * @todo move fetch() functionality to api functions\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-01-04\n */\n\nimport { fetchAllGroups, fetchAllMembers, fetchAllUsersForGroups, fetchGroup, fetchGroupRights } from '../api';\nimport { selectAll, unSelectAll } from '../utils';\nimport { Group, Member, User } from '../interfaces';\n\nexport const handleGroups = async (): Promise<void> => {\n  clearGroupList();\n\n  const groupListSelect = document.querySelector<HTMLSelectElement>('#group_list_select') as HTMLSelectElement;\n  if (!groupListSelect) {\n    return;\n  }\n\n  const addMember = document.querySelector<HTMLButtonElement>('.pmf-add-member') as HTMLButtonElement;\n  const removeMember = document.querySelector<HTMLButtonElement>('.pmf-remove-member') as HTMLButtonElement;\n  const selectAllUsers = document.getElementById('select_all_group_user_list') as HTMLButtonElement;\n  const unSelectAllUsers = document.getElementById('unselect_all_group_user_list') as HTMLButtonElement;\n  const selectAllMembers = document.getElementById('select_all_members') as HTMLButtonElement;\n  const unSelectAllMembers = document.getElementById('unselect_all_members') as HTMLButtonElement;\n  const groups: Group[] = await fetchAllGroups();\n\n  groups.forEach((group: Group): void => {\n    const option: HTMLOptionElement = document.createElement('option');\n    option.value = group.group_id;\n    option.textContent = group.name;\n    groupListSelect.appendChild(option);\n  });\n\n  await processGroupList();\n\n  // Events\n  groupListSelect.addEventListener('change', (event: Event): void => {\n    handleGroupSelect(event);\n  });\n\n  selectAllUsers.addEventListener('click', (): void => {\n    selectAll('group_user_list');\n  });\n\n  unSelectAllUsers.addEventListener('click', (): void => {\n    unSelectAll('group_user_list');\n  });\n\n  addMember.addEventListener('click', (): void => {\n    addGroupMembers();\n    selectAll('group_member_list');\n  });\n\n  removeMember.addEventListener('click', (): void => {\n    removeGroupMembers();\n    selectAll('group_member_list');\n  });\n\n  selectAllMembers.addEventListener('click', (): void => {\n    selectAll('group_member_list');\n  });\n\n  unSelectAllMembers.addEventListener('click', (): void => {\n    unSelectAll('group_member_list');\n  });\n};\n\nconst handleGroupSelect = async (event: Event): Promise<void> => {\n  const groupId: string = (event.target as HTMLSelectElement)?.value;\n\n  if (groupId) {\n    clearGroupData();\n    await getGroupData(groupId);\n    clearGroupRights();\n    await getGroupRights(groupId);\n    clearUserList();\n    await getUserList();\n    clearMemberList();\n    await getMemberList(groupId);\n\n    // Activate user inputs\n    const saveGroupDetails = document.getElementById('saveGroupDetails') as HTMLButtonElement;\n    const saveMembersList = document.getElementById('saveMembersList') as HTMLButtonElement;\n    const saveGroupRights = document.getElementById('saveGroupRights') as HTMLButtonElement;\n    const deleteGroup = document.getElementById('deleteGroup') as HTMLButtonElement;\n    const groupAddMember = document.getElementById('groupAddMember') as HTMLButtonElement;\n    const groupRemoveMember = document.getElementById('groupRemoveMember') as HTMLButtonElement;\n\n    saveGroupDetails.disabled = false;\n    saveMembersList.disabled = false;\n    saveGroupRights.disabled = false;\n    deleteGroup.disabled = false;\n    groupAddMember.disabled = false;\n    groupRemoveMember.disabled = false;\n\n    document.querySelectorAll<HTMLInputElement>('.permission').forEach((item: HTMLInputElement): void => {\n      item.disabled = false;\n    });\n  }\n};\n\nconst getGroupData = async (groupId: string): Promise<void> => {\n  const groupData: Group = await fetchGroup(groupId);\n\n  (document.getElementById('update_group_id') as HTMLInputElement).value = groupData.group_id;\n  (document.getElementById('update_group_name') as HTMLInputElement).value = groupData.name;\n  (document.getElementById('update_group_description') as HTMLInputElement).value = groupData.description || '';\n\n  const autoJoinCheckbox = document.getElementById('update_group_auto_join') as HTMLInputElement;\n  autoJoinCheckbox.checked = 1 === parseInt(groupData.auto_join || '0');\n};\n\nconst clearGroupList = (): void => {\n  const groupList = document.getElementById('group_list_select') as HTMLSelectElement;\n  if (groupList) {\n    groupList.textContent = '';\n  }\n};\n\nconst processGroupList = async (): Promise<void> => {\n  clearGroupData();\n  clearGroupRights();\n  clearUserList();\n  await getUserList();\n  clearMemberList();\n};\n\nconst clearGroupData = (): void => {\n  const updateGroupAutoJoin = document.getElementById('update_group_auto_join') as HTMLInputElement;\n  const updateGroupId = document.getElementById('update_group_id') as HTMLInputElement;\n  if (updateGroupId) {\n    updateGroupId.value = '';\n  }\n  const updateGroupName = document.getElementById('update_group_name') as HTMLInputElement;\n  if (updateGroupName) {\n    updateGroupName.value = '';\n  }\n  const updateGroupDescription = document.getElementById('update_group_description') as HTMLInputElement;\n  if (updateGroupDescription) {\n    updateGroupDescription.value = '';\n  }\n  if (updateGroupAutoJoin.checked) {\n    updateGroupAutoJoin.checked = false;\n  }\n};\n\nconst clearGroupRights = (): void => {\n  const groupRightsCheckboxes: NodeListOf<HTMLInputElement> = document.querySelectorAll<HTMLInputElement>(\n    '#groupRights input[type=checkbox]'\n  );\n  if (groupRightsCheckboxes) {\n    groupRightsCheckboxes.forEach((checkbox: HTMLInputElement): void => {\n      checkbox.checked = false;\n    });\n  }\n};\n\nconst getGroupRights = async (groupId: string): Promise<void> => {\n  const groupRights: string[] = await fetchGroupRights(groupId);\n\n  if (groupRights) {\n    (document.getElementById('rights_group_id') as HTMLInputElement).value = groupId;\n    groupRights.forEach((right) => {\n      (document.getElementById(`group_right_${right}`) as HTMLInputElement).checked = true;\n    });\n  }\n};\n\nconst clearUserList = (): void => {\n  const groupUserListOptions: NodeListOf<HTMLSelectElement> =\n    document.querySelectorAll<HTMLSelectElement>('#group_user_list option');\n  if (groupUserListOptions) {\n    groupUserListOptions.forEach((option: HTMLSelectElement): void => {\n      option.value = '';\n    });\n  }\n};\n\nconst getUserList = async (): Promise<void> => {\n  const groupUserList = document.querySelector<HTMLSelectElement>('#group_user_list') as HTMLSelectElement;\n  const allUsers: User[] = await fetchAllUsersForGroups();\n\n  groupUserList.textContent = '';\n  allUsers.forEach((user: User): void => {\n    const option: HTMLOptionElement = document.createElement('option');\n    option.value = user.user_id;\n    option.textContent = user.login;\n    groupUserList.appendChild(option);\n  });\n};\n\nconst clearMemberList = (): void => {\n  const groupMemberList = document.querySelector<HTMLSelectElement>('#group_member_list') as HTMLSelectElement;\n  groupMemberList.textContent = '';\n};\n\nconst getMemberList = async (groupId: string): Promise<void> => {\n  const groupMemberList = document.querySelector<HTMLSelectElement>('#group_member_list') as HTMLSelectElement;\n  const members: Member[] = await fetchAllMembers(groupId);\n\n  groupMemberList.textContent = '';\n  members.forEach((member: Member) => {\n    const option: HTMLOptionElement = document.createElement('option');\n    option.value = member.user_id;\n    option.textContent = member.login;\n    option.selected = true;\n    groupMemberList.appendChild(option);\n  });\n  (document.getElementById('update_member_group_id') as HTMLInputElement).value = groupId;\n};\n\nconst addGroupMembers = (): void => {\n  const selectedGroup = document.querySelector<HTMLSelectElement>(\n    '#group_list_select option:checked'\n  ) as HTMLSelectElement;\n  if (selectedGroup === null) {\n    // @todo refactor alert() to something more beautiful.\n    alert('Please choose a group.');\n    return;\n  }\n\n  const allUsers = document.getElementById('group_user_list') as HTMLSelectElement;\n  const selectedUsers = [...allUsers.options]\n    .filter((option: HTMLOptionElement): boolean => option.selected)\n    .map((option: HTMLOptionElement) => {\n      return { value: option.value, login: option.innerText };\n    });\n  const allMembers = document.getElementById('group_member_list') as HTMLSelectElement;\n  const members = [...allMembers.options].map((option: HTMLOptionElement) => {\n    return { value: option.value, login: option.innerText };\n  });\n\n  if (selectedUsers) {\n    selectedUsers.forEach((user) => {\n      let isMember: boolean = false;\n\n      members.forEach((member) => {\n        isMember = user.value === member.value;\n      });\n\n      if (isMember === false) {\n        const groupMemberList = document.getElementById('group_member_list') as HTMLSelectElement;\n        const option: HTMLOptionElement = document.createElement('option');\n        option.value = user.value;\n        option.textContent = user.login;\n        option.selected = true;\n        groupMemberList.appendChild(option);\n      }\n    });\n  }\n};\n\nconst removeGroupMembers = (): void => {\n  const memberList = document.getElementById('group_member_list') as HTMLSelectElement;\n  const selectedMembers: string[] = [...memberList.options]\n    .filter((option: HTMLOptionElement): boolean => option.selected)\n    .map((option: HTMLOptionElement): string => option.value);\n\n  if (selectedMembers.length === 0) {\n    // @todo refactor alert() to something more beautiful.\n    alert('Please choose a member.');\n    return;\n  }\n\n  for (const member of [...document.querySelectorAll<HTMLSelectElement>('#group_member_list option')]) {\n    if (selectedMembers.includes(member.value)) {\n      member.remove();\n    }\n  }\n};\n","/**\n * Fetch data for group management\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2023-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2023-01-02\n */\n\nimport { Group, Member, User } from '../interfaces';\n\nexport const fetchAllGroups = async (): Promise<Group[]> => {\n  try {\n    const response = await fetch('./api/group/groups', {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchAllUsersForGroups = async (): Promise<User[]> => {\n  try {\n    const response = await fetch('./api/group/users', {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchAllMembers = async (groupId: string): Promise<Member[]> => {\n  try {\n    const response = await fetch(`./api/group/members/${groupId}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchGroup = async (groupId: string): Promise<Group> => {\n  try {\n    const response = await fetch(`./api/group/data/${groupId}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const fetchGroupRights = async (groupId: string): Promise<string[]> => {\n  try {\n    const response = await fetch(`./api/group/permissions/${groupId}`, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    });\n\n    if (response.status === 200) {\n      return await response.json();\n    } else {\n      throw new Error('Network response was not ok.');\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n","/**\n * phpMyFAQ admin backend code\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne\n * @copyright 2019-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2019-12-20\n */\n\nimport { getLatestVersion, renderVisitorCharts, renderTopTenCharts, handleVerificationModal } from './dashboard';\nimport {\n  handleClearRatings,\n  handleClearVisits,\n  handleCreateReport,\n  handleDeleteAdminLog,\n  handleDeleteSessions,\n  handleSessions,\n  handleSessionsFilter,\n  handleStatistics,\n  handleTruncateSearchTerms,\n} from './statistics';\nimport {\n  handleConfiguration,\n  handleInstances,\n  handleStopWords,\n  handleElasticsearch,\n  handleCheckForUpdates,\n  handleSaveConfiguration,\n  handleFormEdit,\n  handleFormTranslations,\n  handleOpenSearch,\n} from './configuration';\nimport {\n  handleAttachmentUploads,\n  handleCategories,\n  handleDeleteAttachments,\n  handleDeleteComments,\n  handleFaqForm,\n  handleFaqOverview,\n  handleMarkdownForm,\n  handleFileFilter,\n  handleOpenQuestions,\n  handleTags,\n  renderEditor,\n  handleStickyFaqs,\n  handleCategoryDelete,\n  handleUploadCSVForm,\n  handleDeleteGlossary,\n  handleAddGlossary,\n  onOpenUpdateGlossaryModal,\n  handleUpdateGlossary,\n  handleAddNews,\n  handleNews,\n  handleEditNews,\n  handleSaveFaqData,\n  handleUpdateQuestion,\n  handleRefreshAttachments,\n  handleToggleVisibility,\n  handleResetCategoryImage,\n  handleResetButton,\n  handleDeleteFaqEditorModal,\n} from './content';\nimport { handleUserList, handleUsers } from './user';\nimport { handleGroups } from './group';\nimport { handlePasswordStrength, handlePasswordToggle } from '../../../assets/src/utils';\nimport { handleSessionTimeout, initializeTooltips, sidebarToggle } from './utils';\nimport '../../../assets/src/utils/theme-switcher';\n\ndocument.addEventListener('DOMContentLoaded', async (): Promise<void> => {\n  'use strict';\n\n  // Session timeout\n  handleSessionTimeout();\n\n  // Login\n  handlePasswordToggle();\n  handlePasswordStrength();\n\n  // Sidebar\n  sidebarToggle();\n\n  // Dashboard\n  await renderVisitorCharts();\n  await renderTopTenCharts();\n  await getLatestVersion();\n  await handleVerificationModal();\n\n  // User  User Management\n  await handleUsers();\n  handleUserList();\n\n  // Group  Group Management\n  await handleGroups();\n\n  // Content  Categories\n  handleCategories();\n  handleResetCategoryImage();\n  await handleCategoryDelete();\n\n  // Content  add/edit FAQs\n  renderEditor();\n  handleFaqForm();\n  handleMarkdownForm();\n  handleAttachmentUploads();\n  handleFileFilter();\n  handleSaveFaqData();\n  handleUpdateQuestion();\n  handleDeleteFaqEditorModal();\n  handleResetButton();\n  await handleFaqOverview();\n\n  // Content  Comments\n  handleDeleteComments();\n\n  // Content  Open questions\n  handleOpenQuestions();\n  handleToggleVisibility();\n\n  // Content  Attachments\n  handleDeleteAttachments();\n  handleRefreshAttachments();\n\n  // Content  Glossary\n  handleDeleteGlossary();\n  handleAddGlossary();\n  onOpenUpdateGlossaryModal();\n  handleUpdateGlossary();\n\n  // Content  Tags\n  handleTags();\n\n  // Content  Sticky FAQs\n  handleStickyFaqs();\n\n  // Statistics\n  handleDeleteAdminLog();\n  handleStatistics();\n  handleCreateReport();\n  handleTruncateSearchTerms();\n  handleClearRatings();\n  handleClearVisits();\n  handleDeleteSessions();\n  handleSessionsFilter();\n\n  // Configuration  FAQ configuration\n  await handleConfiguration();\n  await handleSaveConfiguration();\n\n  // Configuration  Instance\n  handleInstances();\n\n  // Configuration  Stop Words\n  handleStopWords();\n\n  // Configuration  Online Update\n  handleCheckForUpdates();\n\n  // Configuration  Elasticsearch / OpenSearch configuration\n  await handleElasticsearch();\n  await handleOpenSearch();\n\n  // Import & Export  Import Records\n  await handleUploadCSVForm();\n\n  // Statistics  User-tracking\n  handleSessions();\n\n  handleFormEdit();\n  handleFormTranslations();\n\n  // News\n  handleAddNews();\n  handleNews();\n  handleEditNews();\n\n  // Initialize tooltips everywhere\n  initializeTooltips();\n});\n","/**\n * Loads the correct sidebar on window load,\n * collapses the sidebar on window resize.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2014-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2014-03-22\n */\n\nexport const sidebarToggle = (): void => {\n  const sidebarToggle = document.body.querySelector('#sidebarToggle') as HTMLElement | null;\n\n  if (sidebarToggle) {\n    sidebarToggle.addEventListener('click', (event: Event) => {\n      event.preventDefault();\n      document.body.classList.toggle('pmf-admin-sidenav-toggled');\n      localStorage.setItem(\n        'pmf-admin|sidebar-toggle',\n        document.body.classList.contains('pmf-admin-sidenav-toggled').toString()\n      );\n    });\n  }\n};\n","/**\n * Media browser administration stuff\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2024-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-01-07\n */\n\nexport const handleFileFilter = (): void => {\n  const filterInput = document.getElementById('filter') as HTMLInputElement | null;\n  const fileDivs = document.querySelectorAll('div.mce-file');\n\n  if (filterInput) {\n    filterInput.addEventListener('keyup', (event) => {\n      const filter = (event.target as HTMLInputElement).value;\n      fileDivs.forEach((fileDiv) => {\n        if (fileDiv.textContent && fileDiv.textContent.search(new RegExp(filter, 'i')) < 0) {\n          (fileDiv as HTMLElement).style.display = 'none';\n        } else {\n          (fileDiv as HTMLElement).style.display = 'block';\n        }\n      });\n    });\n  }\n\n  document.addEventListener('click', (event: Event) => {\n    const target = event.target as HTMLElement;\n    if (target.matches('div.mce-file')) {\n      const src = target.getAttribute('data-src');\n      if (src) {\n        window.parent.postMessage(\n          {\n            mceAction: 'phpMyFAQMediaBrowserAction',\n            url: src,\n          },\n          '*'\n        );\n      }\n    }\n  });\n};\n","/**\n * Statistics Handling\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2022-03-21\n */\n\nexport const handleStatistics = (): void => {\n  const buttonsDeleteSearchTerm = document.querySelectorAll('.pmf-delete-search-term');\n\n  if (buttonsDeleteSearchTerm) {\n    buttonsDeleteSearchTerm.forEach((element) => {\n      element.addEventListener('click', async (event: Event): Promise<void> => {\n        event.preventDefault();\n\n        const target = event.target as HTMLElement;\n        const searchTermId = target.getAttribute('data-delete-search-term-id');\n        const csrf = target.getAttribute('data-csrf-token');\n\n        if (confirm('Are you sure?')) {\n          try {\n            const response = await fetch('./api/search/term', {\n              method: 'DELETE',\n              headers: {\n                Accept: 'application/json, text/plain, */*',\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({\n                csrf: csrf,\n                searchTermId: searchTermId,\n              }),\n            });\n\n            if (response.ok) {\n              const jsonResponse = await response.json();\n              const row = document.getElementById(`row-search-id-${jsonResponse.deleted}`) as HTMLElement;\n              row.addEventListener('click', () => (row.style.opacity = '0'));\n              row.addEventListener('transitionend', () => row.remove());\n            } else {\n              const errorMessage = await response.json();\n              throw new Error(`Network response was not ok: ${errorMessage.error}`);\n            }\n          } catch (error) {\n            console.error((error as Error).message);\n          }\n        }\n      });\n    });\n  }\n};\n","/**\n * Stuff for importing records via csv-file\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at https://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @author    Jan Harms <model_railroader@gmx-topmail.de>\n * @copyright 2022-2025 phpMyFAQ Team\n * @license   https://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2024-01-13\n */\n\nimport { pushNotification, pushErrorNotification } from '../../../../assets/src/utils';\n\nexport const handleUploadCSVForm = async (): Promise<void> => {\n  const submitButton = document.getElementById('submitButton') as HTMLButtonElement | null;\n  if (submitButton) {\n    submitButton.addEventListener('click', async (event: Event) => {\n      event.preventDefault();\n      const fileInput = document.getElementById('fileInputCSVUpload') as HTMLInputElement;\n      const form = document.getElementById('uploadCSVFileForm') as HTMLFormElement;\n      const csrf = form.getAttribute('data-pmf-csrf') as string;\n      const file = fileInput.files?.[0];\n      if (!file) {\n        pushErrorNotification('No file selected.');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('csrf', csrf);\n      try {\n        const response = await fetch('./api/faq/import', {\n          method: 'POST',\n          body: formData,\n        });\n        if (response.ok) {\n          const jsonResponse = await response.json();\n          pushNotification(jsonResponse.success);\n          fileInput.value = '';\n        } else if (response.status === 400) {\n          const jsonResponse = await response.json();\n          pushErrorNotification(jsonResponse.error);\n          fileInput.value = '';\n        } else {\n          const errorResponse = await response.json();\n          throw new Error('Network response was not ok: ' + JSON.stringify(errorResponse));\n        }\n      } catch (error: any) {\n        if (error.storedAll === false) {\n          error.messages.forEach((message: string) => {\n            pushErrorNotification(message);\n          });\n        } else {\n          console.error('An error occurred:', error);\n        }\n      }\n    });\n  }\n};\n"],"names":["deleteAttachments","async","attachmentId","csrfToken","response","fetch","method","headers","Accept","body","JSON","stringify","attId","csrf","json","error","setCategoryTree","categoryTree","categoryId","cache","redirect","referrerPolicy","fetchSeoMetaTags","currentValue","ok","text","fetchFaqsByAutocomplete","searchTerm","search","status","Error","postUserData","url","data","deleteUser","userId","VERSION_SPECIAL","dev","alpha","a","beta","b","rc","pl","p","parseVersion","version","result","parts","special","specialNumber","specialMatch","trim","toLowerCase","match","parseInt","substring","index","replace","split","part","num","isNaN","push","versionCompare","version1","version2","operator","v1","v2","maxLength","Math","max","length","i","part1","part2","special1","special2","compareVersions","getThemeColors","styles","getComputedStyle","document","documentElement","primary","getPropertyValue","bodyColor","bodyColorRgb","borderColorVar","gridColor","tooltipBg","handleVerificationModal","verificationModal","getElementById","Translator","TranslationService","addEventListener","spinner","getAttribute","updates","language","lang","loadTranslations","classList","remove","innerText","translate","remoteHashes","getRemoteHashes","issues","verifyHashes","console","ul","createElement","filename","hashValue","Object","entries","li","textContent","appendChild","add","window","onload","masonryElement","querySelector","Masonry","percentPosition","handleDeleteAdminLog","buttonDeleteAdminLog","event","preventDefault","target","deleteAdminLog","success","pushNotification","pushErrorNotification","handleClearRatings","buttonClearRatings","clearRatings","handleCreateReport","createReportButton","form","formData","FormData","serializedData","serialize","blob","createReport","URL","createObjectURL","anchor","href","download","Date","toISOString","click","removeChild","revokeObjectURL","handleTruncateSearchTerms","buttonTruncateSearchTerms","confirm","truncateSearchTerms","handleClearVisits","buttonClearVisits","clearVisits","handleDeleteSessions","buttonDeleteSessions","value","month","deleteSessions","handleSaveConfiguration","saveConfigurationButton","availableFields","querySelectorAll","forEach","input","name","startsWith","append","saveConfiguration","handleSMTPPasswordToggle","passwordField","getElementsByName","containerDiv","innerHTML","insertAdjacentElement","type","setAttribute","icon","toggle","handleTranslation","translationSelectBox","options","fetchTranslations","insertAdjacentHTML","handleTemplates","templateSelectBox","fetchTemplates","handleFaqsSortingKeys","faqsOrderSelectBox","dataset","pmfConfigurationCurrentValue","fetchFaqsSortingKeys","handleFaqsSortingOrder","fetchFaqsSortingOrder","handleFaqsSortingPopular","faqsPopularSelectBox","fetchFaqsSortingPopular","handlePermLevel","permLevelSelectBox","fetchPermLevel","handleReleaseEnvironment","releaseEnvironmentSelectBox","fetchReleaseEnvironment","handleSearchRelevance","searchRelevanceSelectBox","fetchSearchRelevance","handleSeoMetaTags","seoMetaTagsSelectBoxes","seoMetaTagsSelectBox","handleConfigurationTab","languageElement","fetchConfiguration","tabContent","firstChild","toString","dateLastChecked","date","toLocaleString","onAttributeChange","mutationsList","mutation","attributeName","toggleSessionWarningModal","sessionWarningModal","Modal","top","show","hide","reloadCurrentPage","reloadButton","location","reload","selectAll","selectId","selectElement","option","selected","unSelectAll","formatBytes","bytes","decimals","dm","floor","log","parseFloat","pow","toFixed","normalizeLanguageCode","code","_","region","toUpperCase","handleElasticsearch","buttons","element","action","fetchElasticsearchAction","setInterval","elasticsearchStats","div","fetchElasticsearchStatistics","indexName","stats","count","indices","total","docs","sizeInBytes","store","size_in_bytes","html","handleFormEdit","checked","inputId","formId","formid","inputid","fetchActivateInput","fetchSetInputAsRequired","tabAskQuestion","tabAddContent","tabContentAskQuestion","tabContentAddContent","handleFormTranslations","disabled","children","label","fetchEditTranslation","fetchDeleteTranslation","addTranslationButton","languageSelect","translationInput","translation","fetchAddTranslation","setTimeout","handleInstances","addInstanceButton","deleteInstanceButton","container","modal","instance","comment","email","admin","password","addInstance","added","table","row","addElement","id","ariaHidden","instanceId","deleteInstance","deleted","style","opacity","errorMessage","cause","handleOpenSearch","fetchOpenSearchAction","openSearchStats","fetchOpenSearchStatistics","fetchStopWordsByLanguage","stopWordsList","fetchByLanguage","setContentAndHandler","stopWordsHtml","buildStopWordsHTML","stopWordInputs","saveStopWordHandleOnEnter","saveStopWord","saveOldValue","startLoadingIndicator","loadingIndicator","startLoading","stopLoadingIndicator","stopWordData","tr","elementId","buildStopWordInputElementId","td","buildStopWordInputElement","stopword","outerHTML","stopWord","parseStopWordInputElemId","info","charCode","keyCode","deleteStopWord","blur","stopWordId","stopWordLanguage","stopWordsLang","postStopWord","borderColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","removeStopWord","handleStreamingProgress","progressBarId","progressBar","reader","getReader","bar","pump","done","read","width","decodedValue","TextDecoder","decode","parse","progress","e","debug","handleCheckForUpdates","checkHealthButton","checkUpdateButton","downloadButton","extractButton","installButton","buttonActivate","fetchHealthCheck","card","replaceWith","warning","activateMaintenanceMode","checkForUpdates","versionCurrent","versionLastChecked","installedVersion","availableVersion","message","releaseEnvironment","downloadPackage","divExtractPackage","extractPackage","divInstallPackage","createTemporaryBackup","startTemporaryBackup","installPackage","startInstallation","updateDatabase","startDatabaseUpdate","handleAttachmentUploads","filesToUpload","fileUploadButton","files","fileSize","fileList","numFiles","fileItems","fileId","size","output","multiples","multiple","approx","className","stopImmediatePropagation","uploadAttachments","modalBackdrop","attachmentList","attachment","fileName","display","handleRefreshAttachments","refreshButtons","button","newButton","cloneNode","refreshAttachments","delete","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","arguments","source","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","configurable","writable","_extends","assign","hasOwnProperty","call","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","userAgent","pattern","navigator","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","capture","passive","on","el","fn","off","removeEventListener","matches","selector","msMatchesSelector","webkitMatchesSelector","getParentOrHost","host","nodeType","parentNode","closest","ctx","includeCTX","_throttleTimeout","R_SPACE","toggleClass","state","css","prop","val","defaultView","currentStyle","matrix","selfOnly","appliedTransforms","transform","matrixFn","DOMMatrix","WebKitCSSMatrix","CSSMatrix","MSCSSMatrix","find","tagName","list","getElementsByTagName","n","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","getBoundingClientRect","elRect","left","bottom","right","height","innerHeight","innerWidth","containerRect","elMatrix","scaleX","scaleY","d","isScrolledPast","elSide","parentSide","parent","getParentAutoScrollElement","elSideVal","getChild","childNum","includeDragEl","currentChild","Sortable","ghost","dragged","draggable","lastChild","last","lastElementChild","previousElementSibling","nodeName","clone","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","scrollLeft","scrollTop","includeSelf","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","isRectEqual","rect1","rect2","round","throttle","callback","ms","args","scrollBy","x","y","Polymer","$","jQuery","Zepto","dom","getChildContainingRectFromElement","ghostEl","rect","Array","from","child","_rect$left","_rect$top","_rect$right","_rect$bottom","animated","childRect","min","Infinity","expando","getTime","AnimationStateManager","animationCallbackId","animationStates","captureAnimationState","animation","slice","fromRect","thisAnimationDuration","childMatrix","f","addAnimationState","removeAnimationState","splice","arr","Number","indexOfObject","animateAll","_this","clearTimeout","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","sqrt","calculateRealTime","animate","animationResetTimer","currentRect","duration","translateX","translateY","animatingX","animatingY","forRepaintDummy","offsetWidth","repaint","easing","plugins","defaults","initializeByDefault","PluginManager","mount","plugin","pluginName","concat","pluginEvent","eventName","sortable","evt","eventCanceled","cancel","eventNameGlobal","initializePlugins","initialized","modified","modifyOption","getEventProperties","eventProperties","modifiedValue","optionListeners","_excluded","_ref","originalEvent","bind","dragEl","parentEl","rootEl","nextEl","lastDownEl","cloneEl","cloneHidden","dragStarted","moved","putSortable","activeSortable","active","oldIndex","oldDraggableIndex","newIndex","newDraggableIndex","hideGhostForTarget","_hideGhostForTarget","unhideGhostForTarget","_unhideGhostForTarget","cloneNowHidden","cloneNowShown","dispatchSortableEvent","_dispatchEvent","targetEl","toEl","fromEl","extraEventProperties","onName","charAt","substr","CustomEvent","createEvent","initEvent","bubbles","cancelable","to","item","pullMode","lastPutMode","allEventProperties","dispatchEvent","activeGroup","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","targetMoveDistance","ghostRelativeParent","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","cssText","pointerEvents","_detectDirection","elCSS","elWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","secondChildWidth","flexDirection","gridTemplateColumns","touchingSideChild2","clear","_prepareGroup","toFn","pull","sameGroup","group","otherGroup","join","originalGroup","checkPull","checkPut","put","revertClone","stopPropagation","nearestEmptyInsertDetectEvent","touches","nearest","clientX","clientY","some","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","ret","_onDragOver","_checkOutsideTargetEl","_isOutsideThisEl","sort","handle","test","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","setData","dataTransfer","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_onTapStart","get","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_generateId","str","src","sum","charCodeAt","_nextTick","_cancelNextTick","contains","_getDirection","touch","pointerType","originalTarget","shadowRoot","path","composedPath","root","inputs","idx","_saveInputCheckedState","isContentEditable","criteria","_prepareDragStart","dragStartFn","ownerDocument","nextSibling","_lastX","_lastY","_onDrop","_disableDelayedDragEvents","_triggerDragStart","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","abs","_onTouchMove","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","fallback","_appendGhost","_nulling","_emulateDragOver","elementFromPoint","ghostMatrix","relativeScrollOffset","dx","dy","c","cssMatrix","removeAttribute","_hideClone","cloneId","insertBefore","_loopId","effectAllowed","_dragStartId","revert","vertical","isOwner","canSort","fromSortable","completedFired","dragOverEvent","_ignoreWhileAnimating","completed","elLastChild","lastElRect","childContainingRect","spacer","_ghostIsLast","changed","firstElRect","_ghostIsFirst","targetBeforeFirstSwap","sibling","differentLevel","differentRowCol","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_dragElInRowColumn","side1","scrolledPastTop","scrollBefore","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","_getSwapDirection","dragIndex","nextElementSibling","after","moveVector","extra","axis","insertion","_showClone","_offMoveEvents","_offUpEvents","clearInterval","save","handleEvent","dropEffect","_globalDragOver","toArray","order","useAnimation","items","set","destroy","utils","is","extend","dst","nextTick","cancelNextTick","detectDirection","_len","_key","create","scrollEl","scrollRootEl","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","autoScrolls","scrolling","clearAutoScrolls","autoScroll","pid","clearPointerElemChangedInterval","isFallback","scroll","scrollCustomFn","sens","scrollSensitivity","speed","scrollSpeed","scrollThisInstance","scrollFn","layersOut","currentParent","canScrollX","canScrollY","scrollPosX","scrollPosY","vx","vy","layer","scrollOffsetY","scrollOffsetX","bubbleScroll","drop","toSortable","changedTouches","onSpill","Revert","Remove","startIndex","dragStart","_ref2","_ref3","_ref4","parentSortable","AutoScroll","forceAutoScrollFallback","_handleAutoScroll","_handleFallbackAutoScroll","dragOverCompleted","dragOverBubble","nulling","ogElemScroller","newElem","nestedQuery","identifier","handleCategoryDelete","deleteButtons","modalElement","deleteModal","confirmButton","currentCategoryId","currentLanguage","deleteCategory","deleteComments","responseMessage","comments","pathname","then","toDelete","catch","Config","controls","classSpan","command","exec","memorizeExec","isChildActive","editor","current","s","currentBpx","Dom","isElement","Boolean","control","isActive","btn","present","childTemplate","i18n","tooltip","pluginSystem","Plugin","super","afterInit","jodit","registerCommand","second","third","commitStyle","attributes","class","beforeDestruct","Icon","getHash","tags","attributesReg","separator","attrReg","tagsHash","isString","map","elm","attr","allowAttributes","attributeMap","attrName","attr2","removeFormatForCollapsedSelection","fake","fakeNode","createInside","range","safeInsertNode","collapse","mainInline","furthest","isInlineBlock","cursorOnTheLeft","before","cursorOnTheRight","leftHand","splitSelection","setCursorBefore","safeRemove","node","isTag","INSEPARABLE_TAGS","cleanHTML","timeout","removeEmptyElements","fillEmptyParagraph","replaceNBSP","replaceOldTags","allowTags","denyTags","useIframeSandbox","removeOnError","safeJavaScriptLink","disableCleanFilter","eraser","TABLE_CONTAINER_TAGS","Set","nodeElm","hadEffect","allow","attrs","removeAttrs","o","isBlock","isEmpty","br","arg","argi","currentNode","isText","nodeValue","isCollapsed","setCursorAfter","INV_REG","focusBox","isOrContains","newNodeElm","oldParent","isHTMLElement","replaceIfMatched","sanitizeHTMLElement","currentSelectionNode","deny","IS_INLINE","isTemporary","trimInv","isRemovableNode","filters","__decorate","decorators","desc","r","Reflect","decorate","cleanHtml","walker","LazyWalker","j","isEditMode","isInDestruct","isEditorMode","getReadOnly","onChangeCleanHTML","setWork","startWalker","dcf","has","isConnected","visitNodeWalker","affected","fire","beforeCommand","cloneRange","fakeLeft","fakeRight","setStartBefore","selectRange","setEndAfter","shouldUnwrap","between","unwrap","clearParent","findNotEmptySibling","pn","setStartAfter","setEndBefore","removeFormatForSelection","onBeforeSetNativeEditorValue","sandBox","iframe","sandbox","onSafeHTML","safeHTML","destruct","watch","hook","cut","isDisabled","copy","selectall","init","_a","registerButton","CLIPBOARD_ID","selectedText","clipboardData","getDataTransfer","ew","TEXT_PLAIN","stripTags","TEXT_HTML","buffer","defaultActionOnPaste","INSERT_AS_HTML","focus","events","_b","cached","pluginKey","copyStyles","getStyle","box","defaultStyles","copyformat","exists","up","ideal","span","format","borderWidth","getStyles","onMouseUp","update","extendLang","langs","fullsize","globalFullSize","toggleFullSize","mode","isFullSize","activated","textIcons","consts.MODE_SOURCE","consts.MODE_WYSIWYG","fullsizeStack","isEnabled","oldHeight","oldWidth","wasToggled","resize","ow","enable","setMod","toolbar","isJoditObject","toolbarContainer","Node","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","hr","insertNode","block","parentElement","next","enter","setCursorIn","imageProcessor","replaceDataURIToBlobIdInView","JODIT_IMAGE_PROCESSOR_BINDED","JODIT_IMAGE_BLOB_ID","uri","onAfterGetValueFromEditor","consumer","SOURCE_CONSUMER","onBeforeSetElementValue","includes","afterChange","$$","dataBind","complete","ElementOnLoad","ArrayBuffer","dataUri","dataURI","byteString","atob","mimeString","ab","ia","Uint8Array","Blob","dataURItoBlob","replaceDataURIToBlobUUID","select","debounce","image","dialogWidth","openOnDblClick","editSrc","useImageEditor","editTitle","editAlt","editLink","editSize","editBorderRadius","editMargins","editClass","availableClasses","editStyle","editId","editAlign","showPreview","selectImageAfterClose","UIImageMainTab","UIGroup","appendChildToContainer","view","handlers","render","onStateImageSrcChange","getElm","values","imageSrc","onImageSrcChange","onEditImageClick","openImageEditor","onChangeImageClick","openImagePopup","onStateTitleChange","imageTitle","onTitleChange","onStateAltChange","imageAlt","onAltChange","onStateImageLinkChange","imageLink","onImageLinkChange","onStateImageLinkOpenInNewTabChange","imageLinkOpenInNewTab","onImageLinkOpenInNewTabChange","hideFieldByOptions","opt","optKey","elmKey","changeImage","needShowChangeImage","filebrowser","ajax","uploader","editImage","needShowEditImage","fixImage","component","normalSizeFromString","normalSizeToString","isNumber","UIImagePositionTab","UIElement","classInput","onStateAlignChange","align","onChangeAlign","onStateValuesBorderRadiusChange","borderRadius","onChangeBorderRadius","onStateValuesIdChange","onChangeId","onStateValuesStyleChange","onChangeStyle","onStateValuesClassesChange","classes","onChangClasses","onLockMarginClick","marginIsLocked","onChangeMarginIsLocked","marginBottom","lockMargin","marginTop","onStateValuesMarginChange","onChangeMargin","UIImagePropertiesForm","elementName","selfElm","elements","activeTabState","__mainTab","__positionTab","TabsWidget","content","sizeIsLocked","onChangeSizeIsLocked","lockSize","imageWidth","onLockSizeClick","onStateValuesSizeChange","imageHeight","od","activeElement","onImageWidthChange","isNumeric","w","h","ratio","onStateValuesImageSrcChange","imageViewSrc","Image","readValuesFromImage","sourceImage","cssFloat","readAlign","equal","wasEmptyField","kebabCase","readMargins","readLink","naturalWidth","offsetHeight","naturalHeight","readSizes","applyValuesToImage","link","wrap","replaceChild","applyLink","updatedWidth","updatedHeight","applySize","margins","applyMargin","oldValue","v","sides","margin","side","hAlignElement","imageProperties","activeTab","loadExternal","yes","uploadRemoteImage","resp","alert","newfilename","baseurl","dataProvider","getPathByUrl","timestamp","openImageEditorDialog","dialog","popup","Popup","closePopup","close","setContent","FileSelectorWidget","upload","isArray","open","position","dlg","minWidth","screen","minHeight","__buttons","check","onAction","synchronizeValues","removeNode","setHeader","setFooter","setSize","markOwner","Button","__lock","setModal","setPosition","promise","resolve","reject","isAbortError","finally","__unlock","lock","unlock","self","readonly","_c","getKey","isCell","indent","outdent","currentBox","arrow","indentMargin","applyIndentToBox","processedElements","indentCommand","enterBlock","isBrMode","BR","wrapNextInline","eachSelection","wrapInline","restore","hotkeys","defaultValue","isPlainObject","center","justify","alignElement","defaultLineHeight","lineHeight","applyLineHeight","ignoreA","addStyle","isFocused","parentBlock","previousValue","autobind","mediaFakeTag","mediaInFakeBlock","mediaBlocks","keyFake","rxp","RegExp","isDestructed","getMode","wrapper","contenteditable","defaultTimeout","pasteInsertHtml","isDragEvent","insertCursorAtPoint","isVoid","isNode","start","end","removeExtraFragments","insertHTML","currentIndex","listBox","previewBox","paste","onKeyDown","KEY_UP","KEY_DOWN","KEY_ENTER","selectIndex","childNodes","showDialog","createDialog","SPACE_REG_EXP","pasteButton","cancelButton","hasAttribute","unshift","askBeforePasteFromWord","processPasteFromWord","defaultActionOnPasteFromWord","pasteFromWordActionList","INSERT_AS_TEXT","INSERT_ONLY_TEXT","pasteFromWord","processWordHTML","texts","isHtmlFromWord","msg","title","buttonList","tabIndex","one","variant","askInsertTypeDialog","insertType","insertFromWordByType","applyStyles","cleanFromWord","requires","preview","MODE_SOURCE","MODE_WYSIWYG","_1","onDestrcut","print","border","getContainer","afterFinishPrint","myWindow","contentWindow","write","defaultLanguage","getMatchedCSSRules","styleSheets","cssRules","flat","selectorText","CSSCriticalPath","opts","pushCSS","pair","varValue","def","createTreeWalker","NodeFilter","SHOW_ELEMENT","FILTER_ACCEPT","nextNode","scanFullPage","rules","parseTree","generateCSS","finalCSS","k","ed","generateCriticalCSS","head","allowResizeTags","resizer","showSize","hideSizeTimeout","forImageChangeAttributes","min_width","min_height","useAspectRatio","keyBInd","LOCK_KEY","isResizeMode","isShown","startX","startY","fromHTML","sizeViewer","pointerX","pointerY","isAltMode","onClickElement","updateSize","workplacePosition","getWorkplacePosition","pos","offset","newTop","newLeft","hideSizeViewer","resizeHandle","onStartResizing","eventEmitter","isReadOnly","addEventListeners","rgx","__onChangeEditor","onEditorClick","__bind","__afterInsertImage","consts.KEY_DELETE","onDelete","onKeyUp","onClickOutside","onResize","onEndResizing","diff_x","diff_y","new_w","new_h","uar","showSizeViewer","KEY_ALT","changeAttrs","isImage","workplace","zIndex","useSearch","lazyIdleTimeout","useCustomHighlightAPI","globalWindow","Highlight","execCommand","findNext","findPrevious","TMP_ATTR","highlightTextRanges","rng","restRanges","ci","startContainer","endContainer","ranges","createRange","setStart","startOffset","setEnd","endOffset","searchHighlight","CSS","highlights","checkNativeSelectionMethod","markTemporary","startText","diff","endText","normalizeRanges","isSelectionWrapper","step","getSelectionWrappers","clearSelectionWrappers","clearNativeSelection","SentenceFinder","searchIndex","fuzzySearchIndex","queue","endIndex","needle","results","len","startQueueIndex","UISearch","_currentIndex","countBox","query","queryInput","replaceInput","selInfo","isOpened","prev","replaceBtn","refs","closeButton","replaceButton","removeMarkers","consts.KEY_ENTER","onEditorKeyDown","getRealMode","consts.KEY_ESC","consts.KEY_F3","shiftKey","searchAndReplace","calcSticky","selStr","sel","enabled","previousQuery","drawPromise","walkerCount","wrapFrameRequest","ui","updateCounters","calcCounts","onPressReplaceButton","findAndReplace","tryScrollToElement","parentBox","scrollIntoViewIfNeeded","findQueryBounds","walkerKey","break","bounds","findCurrentIndexInRanges","bound","deleteContents","textNode","findAndSelect","IS_PROD","rejectCallback","cancelAnimationFrame","__drawSelectionRanges","findIndex","isValidCache","every","_d","sentence","fuzzySearch","sRange","drawParts","shift","requestAnimationFrame","normalizeSelectionBeforeCutAndCopy","normalizeTripleClick","proxyEventsList","onStartSelection","camelCase","onOutsideClick","closestElement","beforeCommandCut","onCopyNormalizeSelectionBound","beforeCommandSelectAll","expandSelection","onTripleClickNormalizeSelection","detail","isTrusted","beautifyHTML","IS_IE","sourceEditor","sourceEditorNativeOptions","showGutter","theme","highlightActiveLine","sourceEditorCDNUrlsJS","beautifyHTMLCDNUrlsJS","MODE_SPLIT","toggleMode","SourceEditor","toWYSIWYG","fromWYSIWYG","isReady","onReady","replaceUndoManager","onReadyAlways","AceEditor","proxyOnBlur","proxyOnFocus","proxyOnMouseDown","aceExists","ace","getLastColumnIndex","session","getLine","getLastColumnIndices","rows","getLength","lastColumnIndices","lastColIndex","getRowColumnIndices","characterIndex","column","setSelectionRangeIndices","startRowColumn","endRowColumn","setSelectionRange","getIndexByRowColumn","tryInitAceEditor","fakeMirror","edit","setOption","setTheme","renderer","setShowGutter","getSession","setMode","setHighlightActiveLine","setUseWrapMode","setUseWorker","$blockScrolling","constants.MODE_WYSIWYG","setValue","getValue","hasFocus","constants.MODE_SOURCE","constants.MODE_SPLIT","loadNext","editHTMLDocumentMode","clearSelection","setReadOnly","getSelectionStart","getRange","getSelectionEnd","insertRaw","getCursor","insert","setRange","setPlaceHolder","history","commands","addCommand","bindKey","win","mac","undo","redo","TextAreaEditor","autosize","dir","minHeightD","raw","startPos","endPos","selectionStart","selectionEnd","ctrlKey","metaKey","createSourceEditor","isFunction","__oldMirrorValue","tempMarkerStart","tempMarkerStartReg","tempMarkerEnd","tempMarkerEndReg","onInsertHTML","force","new_value","getEditorValue","getMirrorValue","setMirrorValue","getNormalPosition","m","res","INVISIBLE_SPACE","clnInv","consts.INVISIBLE_SPACE_REG_EXP","onSelectAll","setFocusToMirror","saveSelection","marker","markerStart","markerEnd","removeSelection","selectionEndCursor","setMirrorSelectionRange","onReadonlyReact","mirrorContainer","KEY_ESC","syncValueFromWYSIWYG","html_beautify","initSourceEditor","usePopupForSpecialCharacters","specialCharacters","bindDestruct","__countInRow","tBodies","chars","jIndex","KEY_RIGHT","KEY_LEFT","video","parseUrlToVideoEmbed","convertMediaUrlToVideoEmbed","defaultWidth","defaultHeight","formLink","UIForm","UIBlock","UIInput","required","placeholder","validators","submit","formCode","UITextArea","tabs","insertCode","onSubmit","Jodit","modules","closeOnClickOverlay","searchInput","resultsContainer","selectLink","question","addCodeSnippetButton","selectedLanguage","selectedCode","codeSnippet","showHelp","optionHelp","getCategoryPermissions","categories","permissions","setPermissions","perms","user","restrictedGroups","allGroups","checkForHash","questionInputValue","questionHelp","submitButton","autoComplete","autocomplete","minLength","onSelect","adminUrl","regex","emptyMsg","handleSaveFaqData","faqId","revisionId","handleDeleteFaqEditorModal","deleteButton","confirmDeleteButton","faqLanguage","token","deleteFaq","handleDeleteGlossary","glossaryId","glossaryLang","deleteGlossary","handleAddGlossary","saveGlossaryButton","getElementsByClassName","glossaryLanguage","glossaryItem","glossaryDefinition","definition","createGlossary","tableBody","onOpenUpdateGlossaryModal","updateGlossaryModal","triggeredElement","relatedTarget","getGlossary","handleUpdateGlossary","updateGlossaryButton","updateGlossary","itemLink","definitionCell","handleMarkdownForm","answerHeight","localStorage","getItem","answer","markdownTabs","insertImage","insertImageButton","imageUpload","imageUploadInput","setItem","tab","fetchMarkdownContent","fetchMediaBrowserContent","sources","file","listItem","checkboxes","markdownImages","checkbox","imageUrl","responseData","messages","handleAddNews","news","newsHeader","authorName","authorEmail","linkTitle","langTo","addNews","handleNews","deleteNews","activateNews","handleEditNews","reponse","updateNews","handleFaqOverview","collapsedCategories","initializeCheckboxState","category","clearCategoryTable","onlyInactive","getInactiveCheckboxState","onlyNew","getNewCheckboxState","faqs","currentUrl","protocol","endsWith","searchParams","fetchAllFaqsByCategory","populateCategoryTable","isAllowedToTranslate","toggleStickyFaq","toggleActiveFaq","translations","fetchCategoryTranslations","dropdownMenu","languageCode","displayName","normalizedCode","Intl","DisplayNames","of","newTranslationLink","saveStatus","faqIds","faq","solution_id","created","category_id","sticky","role","filterForInactive","filterForNew","storedInactiveState","storedNewState","handleToggleVisibility","toggleVisibility","questionId","visibility","toggleQuestionVisibility","handleTags","editTagButtons","tagForm","tagsAutocomplete","tagId","deleteTag","tag","currentTags","currentTagsArray","searchString","fetchTags","lastCommaIndex","lastIndexOf","currentOrder","stickyFAQs","successAlert","errorResponse","jsonResponse","updateUser","setUserData","setUserRights","userData","fetchUserData","updateInput","login","lastModified","capitalize","authSource","twoFactorEnabled","isSuperadmin","pushState","clearUserRights","userRights","fetchUserRights","handleUsers","currentUserId","toggleCheckAll","toggleUncheckAll","addUser","addUserForm","passwordToggle","passwordInputs","isSuperAdmin","userName","realName","automaticPassword","passwordConfirm","superAdmin","buttonExportAllUsers","buttonOverwritePassword","newPassword","passwordRepeat","overwritePassword","deleteUserButton","deleteUserConfirmed","username","userid","clearUserForm","editUserButton","display_name","last_modified","user_status","is_superadmin","overwrite_twofactor","rightData","_trigger","_cursorPos","fetchUsers","safe","handleUserList","activateButtons","activateUser","getOrCreateInstance","deleteUserConfirm","handleGroups","clearGroupList","groupListSelect","addMember","removeMember","selectAllUsers","unSelectAllUsers","selectAllMembers","unSelectAllMembers","fetchAllGroups","group_id","processGroupList","handleGroupSelect","addGroupMembers","removeGroupMembers","groupId","clearGroupData","getGroupData","clearGroupRights","getGroupRights","clearUserList","getUserList","clearMemberList","getMemberList","saveGroupDetails","saveMembersList","saveGroupRights","deleteGroup","groupAddMember","groupRemoveMember","groupData","fetchGroup","description","auto_join","groupList","updateGroupAutoJoin","updateGroupId","updateGroupName","updateGroupDescription","groupRightsCheckboxes","groupRights","fetchGroupRights","groupUserListOptions","groupUserList","allUsers","fetchAllUsersForGroups","user_id","groupMemberList","members","fetchAllMembers","member","selectedUsers","isMember","selectedMembers","showWarning","config","MutationObserver","observe","handleSessionTimeout","handlePasswordToggle","handlePasswordStrength","sidebarToggle","context","Chart","register","registerables","colors","visitorChart","labels","datasets","backgroundColor","pointStyle","pointRadius","pointHoverRadius","pointBackgroundColor","pointBorderColor","fill","cubicInterpolationMode","tension","responsive","interaction","intersect","maintainAspectRatio","legend","color","titleColor","scales","ticks","grid","applyVisitorTheme","ds","mutations","attributeFilter","getData","visit","number","renderVisitorCharts","colorsForBars","doughnutChart","applyBarTheme","dynamicColors","random","visits","renderTopTenCharts","loader","versionText","getLatestVersion","nestedSortables","onStart","onEnd","serializedTree","nested","handleCategories","resetButton","categoryExistingImage","categoryImageInput","categoryImageLabel","handleResetCategoryImage","prefersDark","matchMedia","joditEditor","make","activeButtonsInReadOnly","toolbarButtonSize","saveModeInStorage","spellcheck","editorClassName","triggerChangeEvent","debugLanguage","defaultMode","useSplitMode","greyscale","palette","full","colorPickerDefaultTab","imageDefaultWidth","removeButtons","disablePlugins","extraPlugins","extraButtons","isSuccess","getMessage","contentType","createNewFolder","deleteFolder","moveFolder","showFoldersPanel","showFileSize","showFileName","setJoditTheme","applyTheme","addListener","applyThemeFromAttr","themeAttr","hljs","highlightElement","renderEditor","deleteAttachmentButtons","inputTags","inputSearchKeywords","listItemToDelete","categoryOptions","selectedOptions","questionInput","handleFaqForm","filterInput","fileDivs","fileDiv","postMessage","mceAction","handleFileFilter","handleUpdateQuestion","reset","revisionSelect","lastOption","Event","handleResetButton","deleteFaqComments","deleteNewsComments","handleDeleteComments","questions","handleOpenQuestions","handleDeleteAttachments","handleStickyFaqs","buttonsDeleteSearchTerm","searchTermId","handleStatistics","day","handleSessionsFilter","configTabList","tabLoaded","configTabTrigger","Tab","Element","handleConfiguration","stopWordsLanguageSelector","addStopWordInput","handleStopWords","fileInput","storedAll","handleUploadCSVForm","firstHour","lastHour","exportSessions","handleSessions","tooltipTriggerEl","Tooltip"],"mappings":"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A,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACA,UACA,WACA,QACA,WACA,SACA,QACA,SACA,SACA,UACA,UACA,QACA,QACA,SACA,QACA,SACA,SACA,UACA,UACA,SACA,WACA,UACA,SACA,SACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,SACA,UACA,UACA,WACA,WACA,WACA,UACA,SACA,WACA,WACA,UACA,SACA,QACA,WACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,WACA,WACA,UACA,SACA,WACA,UACA,UACA,WACA,WACA,UACA,WACA,SACA,UACA,UACA,WACA,WACA,WACA,UACA,SACA,WACA,WACA,UACA,SACA,QACA,WACA,WACA,WACA,UACA,WACA,SACA,WACA,WACA,WACA,WACA,UACA,SACA,WACA,UACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,UACA,UACA,UACA,WACA,UACA,UACA,SACA,SACA,SACA,SACA,UACA,WAEJ/0B,EAAKpH,IAAI,UC7NM,8qCD8NfmF,EAAOnkB,UAAUokB,SAASvlB,QAAU,CAChC4iC,QAAS,CAAC,eAAgB,eAC1Blc,QAAS,2BACT2Y,MAAO,CAACxZ,EAAQC,EAAS0Z,KACrB,MAAMxoC,EAAY6uB,EAAO9pB,EAAE+xB,KAAK,0CAChC,GAAI92B,EAAW,CACX,GAAI6uB,EAAOiF,EAAEuxB,6BAA8B,CACvC,MAAMprB,EAAMpL,EAAO7J,EAAEvnB,MAIrB,OAHAw8B,EAAIhnC,UAAUkB,IAAI,iBAClB8lC,EAAI/lC,YAAY8L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,WAAY,QAAS,QAAS,QAClEC,kBAAmB,SACnB1e,MAAOqe,EAAYhwD,QAAU,OAAS,UACtCswD,mBAAmB,EACnBC,YAAY,EACZC,iBAAiB,EACjBC,oBAAoB,EACpBn4D,MAAO,OACPuK,OAAQ,OACRk6B,UAAW,IACXzpB,UAAW,GACX3sB,SAAU,OACV+pE,eAAe,EACfhtB,UAAU,EACV5T,SAAS,EACTW,MAAO,IACPkgC,YAAa9V,GAAMxW,aACnBusB,cAAc,EACd/tB,wBAAwB,EACxBC,sBAAsB,EACtBC,6BAA8B,oBAC9B6pB,OAAQ,CACNiE,UAAW,CACT,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,QAAS,CACP,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,KAAM,CACJ,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJC,sBAAuB,aACvBC,kBAAmB,IACnBtgC,eAAgB,CAAEC,8BAA8B,GAChDsgC,cAAe,GACfC,eAAgB,GAChBC,aAAc,CAAC,WAAY,eAC3BC,aAAc,GACdrgE,QAAS,CACP,SACA,IACA,OACA,gBACA,YACA,SACA,IACA,KACA,KACA,cACA,YACA,IACA,UACA,SACA,IACA,OACA,WACA,aACA,QACA,YACA,OACA,SACA,QACA,UACA,IACA,OACA,MACA,QACA,YACA,IACA,QACA,QACA,QACA,OACA,IACA,OACA,OACA,IACA,YACA,KACA,SACA,aACA,IACA,UACA,WACA,UACA,QACA,IACA,WACA,eAEFw8B,OAAQ,CAAA,EACR0B,WAAW,EACX2G,SAAU,CACRvzC,IAAK,kCAAqC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","x_google_ignoreList":[32,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191]}